import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{t as N,h as Ft,a as ga,z as ka,b1 as Za,D as ia,V as ha,ad as ra,al as Na,ae as Ma,H as la,A as Vt,af as fa,F as Da,U as Ga,b2 as ja,ar as Ba,p as dt,a_ as W,a$ as yt,j as Re,k as ct,g as e,s,l as a,aF as v,aq as I,m as t,d as i,M as wa,b3 as na,f as Ve,am as qt,b4 as va,aE as Ca,a3 as da,b0 as Pa}from"../chunks/Wiajt4P9.js";import{c as pa,g as $a,f as u,e as z,a as l,d as tt}from"../chunks/D9b-f7YM.js";import{i as x,s as Ct,a as rt,p as It,c as Ot,b as qa}from"../chunks/BfjrTVym.js";import{i as ut}from"../chunks/C1Os28la.js";import{s as c}from"../chunks/CddicKyh.js";import{d as Ke,a as Fe,c as pt,s as _t,r as Xt,e as ba,f as La,g as oa,h as Qt,i as Ta,j as Wa,k as za,m as Ra,n as Ha,l as Ya}from"../chunks/DEhYkdjB.js";import{s as bt,e as Ye,i as Oe,b as Et,T as Ua}from"../chunks/jA6-vvz4.js";import{g as Ja}from"../chunks/Bgy1zoV3.js";import{_ as ma}from"../chunks/PPVm8Dsz.js";import{s as Va}from"../chunks/lM-wFhJv.js";function Aa(fe,H,r=!1,_=!1,U=!1){var h=fe,f="";N(()=>{var S=ka;if(f===(f=H()??"")){Ft&&ga();return}if(S.nodes_start!==null&&(Za(S.nodes_start,S.nodes_end),S.nodes_start=S.nodes_end=null),f!==""){if(Ft){ia.data;for(var b=ga(),$=b;b!==null&&(b.nodeType!==ha||b.data!=="");)$=b,b=ra(b);if(b===null)throw Na(),Ma;pa(ia,$),h=la(b);return}var n=f+"";r?n=`<svg>${n}</svg>`:_&&(n=`<math>${n}</math>`);var o=$a(n);if((r||_)&&(o=Vt(o)),pa(Vt(o),o.lastChild),r||_)for(;Vt(o);)h.before(Vt(o));else h.before(o)}})}function Fa(fe,H){let r=null,_=Ft;var U;if(Ft){r=ia;for(var h=Vt(document.head);h!==null&&(h.nodeType!==ha||h.data!==fe);)h=ra(h);if(h===null)fa(!1);else{var f=ra(h);h.remove(),la(f)}}Ft||(U=document.head.appendChild(Da()));try{Ga(()=>H(U),ja)}finally{_&&(fa(!0),la(r))}}function Ia(fe){return function(...H){var r=H[0];return r.stopPropagation(),fe?.apply(this,H)}}function _a(fe,H){var r=fe.$$events?.[H.type],_=Ba(r)?r.slice():r==null?[]:[r];for(var U of _)U.call(this,H)}var Xa=u('<span class="pill role-pill instructor-pill svelte-1kexf3p">Instructor</span>'),Ea=u('<span class="pill role-pill assistant-pill svelte-1kexf3p">Asst Instructor</span>'),Ka=u('<span class="pill role-pill helper-pill svelte-1kexf3p">Helper</span>'),Oa=u('<div class="role-row svelte-1kexf3p"><!> <!> <!></div>'),Qa=u('<div class="profile-details svelte-1kexf3p"><div class="profile-info svelte-1kexf3p"><div class="profile-name svelte-1kexf3p"> </div> <div class="profile-meta-row svelte-1kexf3p"><span class="pill belt-pill svelte-1kexf3p"> </span> <span class="pill is3-pill svelte-1kexf3p"> </span></div> <!></div></div>'),es=u('<button><div class="avatar-large svelte-1kexf3p"> </div> <!></button>'),ts=u('<div class="floating-controls svelte-1kexf3p" aria-label="Logout control"><button class="logout-btn svelte-1kexf3p" type="button"><span class="logout-icon svelte-1kexf3p"><svg class="logout-icon-svg svelte-1kexf3p" viewBox="0 0 24 24"><line x1="12" y1="4" x2="12" y2="11"></line><path d="M8.5 6.75a6 6 0 1 0 7 0"></path></svg></span> Logout</button></div> <!>',1);function as(fe,H){dt(H,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,U]=Ct(),h=I(),f=I(),S=I(),b=I(),$=I(),n=I(),o=I();let A=I(!1);function te(){Ke.set(null),localStorage.removeItem("tkStudentSession"),Ja("/login")}function V(){v(A,!e(A))}function ae(Z){if(!Z||typeof Z!="string")return"#64748b";const L=Z.toLowerCase();return L.includes("white")?"#e5e7eb":L.includes("yellow")?"#facc15":L.includes("orange")?"#fb923c":L.includes("green")?"#22c55e":L.includes("blue")?"#3b82f6":L.includes("purple")?"#a855f7":L.includes("red")?"#ef4444":L.includes("brown")?"#92400e":L.includes("black")||L.includes("degree")?"#020617":"#64748b"}function he(Z){if(!Z||typeof Z!="string")return"#ffffff";const L=Z.toLowerCase();return L.includes("white")||L.includes("yellow")||L.includes("orange")?"#0f172a":"#ffffff"}function Y(Z){return Z?Z.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Dr\.?|Miss|Master)\s+/i,"").trim().split(" ").map(ne=>ne[0]||"").join("").toUpperCase():""}function G(Z){return Z?Z>=12?"#5f2a88":Z>=9?"#3e3370":Z>=6?"#3b4f7a":(Z>=3,"#56679a"):"#56679a"}W(()=>r(),()=>{v(h,r())}),W(()=>e(h),()=>{v(f,Y(e(h)?.name||e(h)?.displayName||""))}),W(()=>e(h),()=>{v(S,e(h)?.is3Level??0)}),W(()=>e(h),()=>{v(b,Array.isArray(e(h)?.roles)?e(h).roles:[])}),W(()=>e(b),()=>{v($,e(b).includes("instructor"))}),W(()=>e(b),()=>{v(n,e(b).includes("assistant"))}),W(()=>e(b),()=>{v(o,e(b).includes("helper"))}),yt(),ut();var j=ts(),ge=Re(j),w=a(ge);t(ge);var se=s(ge,2);{var y=Z=>{var L=es(),ne=a(L),d=a(ne,!0);t(ne);var oe=s(ne,2);{var D=qe=>{var Le=Qa(),Q=a(Le),ce=a(Q),F=a(ce,!0);t(ce);var pe=s(ce,2),re=a(pe),le=a(re,!0);t(re);var ke=s(re,2),ze=a(ke);t(ke),t(pe);var B=s(pe,2);{var M=K=>{var P=Oa(),Se=a(P);{var me=k=>{var R=Xa();l(k,R)};x(Se,k=>{e($)&&k(me)})}var Ge=s(Se,2);{var X=k=>{var R=Ea();l(k,R)};x(Ge,k=>{e(n)&&k(X)})}var ee=s(Ge,2);{var je=k=>{var R=Ka();l(k,R)};x(ee,k=>{e(o)&&k(je)})}t(P),l(K,P)};x(B,K=>{(e($)||e(n)||e(o))&&K(M)})}t(Q),t(Le),N((K,P)=>{c(F,(e(h),i(()=>e(h).displayName||e(h).name))),bt(re,K),c(le,(e(h),i(()=>e(h).rank))),bt(ke,P),c(ze,`IS3 L${e(S)??""}`)},[()=>(e(h),i(()=>`background:${ae(e(h).rank)}; color:${he(e(h).rank)}`)),()=>(e(S),i(()=>`background:${G(e(S))}`))]),l(qe,Le)};x(oe,qe=>{e(A)&&qe(D)})}t(L),N(qe=>{Fe(L,1,`profile-card ${e(A)?"expanded":"collapsed"}`,"svelte-1kexf3p"),bt(L,qe),c(d,e(f))},[()=>(e(h),e(S),i(()=>`--belt:${ae(e(h).rank)}; --is3:${G(e(S))};`))]),z("click",L,V),z("mouseenter",L,()=>v(A,!0)),z("mouseleave",L,()=>v(A,!1)),l(Z,L)};x(se,Z=>{e(h)&&Z(y)})}z("click",w,te),l(fe,j),ct(),U()}const ea=wa("status"),ya=Object.freeze(Object.defineProperty({__proto__:null,activeTab:ea},Symbol.toStringTag,{value:"Module"}));var ss=u('<button><svg class="floating-tab-icon svelte-yjh58o" aria-hidden="true"><!></svg> <span class="floating-tab-label"> </span></button>'),is=u('<div class="floating-tab-bar svelte-yjh58o"></div>');function rs(fe,H){dt(H,!1);const r=()=>rt(ea,"$activeTab",_),[_,U]=Ct(),h=I(),f=[{id:"status",label:"STATUS",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="5"/><circle cx="12" cy="12" r="1.5"/>',inactiveColor:"#1e3a58",activeColor:"#2563a3"},{id:"messages",label:"SOCIAL",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>',inactiveColor:"#113c32",activeColor:"#1d795b"},{id:"achievements",label:"ACHIEVEMENTS",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0",inner:'<path d="M12 2l2.39 6.91L21 9.24l-5 3.63L17.39 21 12 17.27 6.61 21 8 12.88 3 9.24l6.61-0.33L12 2z"/>',inactiveColor:"#4f472c",activeColor:"#7f6f41"},{id:"training",label:"TRAINING",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<rect x="2" y="9" width="4" height="6" rx="1"/><rect x="18" y="9" width="4" height="6" rx="1"/><path d="M6 12h12"/>',inactiveColor:"#3c2c63",activeColor:"#5e45a3"},{id:"news",label:"NEWS",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/>',inactiveColor:"#512730",activeColor:"#8b3a3a"}];function S($){ea.set($)}W(()=>r(),()=>{v(h,r())}),yt(),ut();var b=is();Ye(b,5,()=>f,Oe,($,n)=>{var o=ss(),A=a(o),te=a(A);Aa(te,()=>(e(n),i(()=>e(n).inner)),!0),t(A);var V=s(A,2),ae=a(V,!0);t(V),t(o),N(()=>{Fe(o,1,(e(h),e(n),i(()=>`floating-tab-btn ${e(h)===e(n).id?"is-active":""}`)),"svelte-yjh58o"),bt(o,(e(n),i(()=>`--tab-bg:${e(n).inactiveColor}; --tab-bg-active:${e(n).activeColor};`))),pt(A,"viewBox",(e(n),i(()=>e(n).viewBox))),pt(A,"fill",(e(n),i(()=>e(n).fill))),pt(A,"stroke",(e(n),i(()=>e(n).stroke))),pt(A,"stroke-width",(e(n),i(()=>e(n).strokeWidth))),c(ae,(e(n),i(()=>e(n).label)))}),z("click",o,()=>S(e(n).id)),l($,o)}),t(b),l(fe,b),ct(),U()}var ls=u('<p class="muted svelte-1blbebk">Select a student to view their feed.</p>'),ns=u('<p class="muted svelte-1blbebk">Add buddies to see promotions and stripe progress here.</p>'),os=u('<span class="ready svelte-1blbebk">Ready for next stripe!</span>'),vs=u('<span class="progress svelte-1blbebk"> </span>'),ds=u('<span class="divider svelte-1blbebk">â€¢</span> <span class="last"> </span>',1),cs=u('<div class="comment svelte-1blbebk"><strong> </strong> </div>'),us=u('<div class="comments svelte-1blbebk"></div>'),gs=u('<li class="feed-item svelte-1blbebk"><div class="left"><div class="avatar svelte-1blbebk"> </div></div> <div class="mid"><div class="title svelte-1blbebk"><strong> </strong> Â· <span class="rank svelte-1blbebk"> </span></div> <div class="sub svelte-1blbebk"><!> <!></div> <div class="bar svelte-1blbebk"><div class="bar-fill svelte-1blbebk"></div></div> <div class="interactions svelte-1blbebk"><button title="Fist bump!"> </button> <input class="comment-input svelte-1blbebk" type="text" placeholder="Add a comment..."/></div> <!></div> <div class="right"><span class="chip svelte-1blbebk"> </span></div></li>'),fs=u('<ul class="feed svelte-1blbebk"></ul>'),ps=u('<div class="panel svelte-1blbebk"><h2 class="panel-title svelte-1blbebk">Activity Feed</h2> <!></div>');function bs(fe,H){dt(H,!1);const r=()=>rt(_t,"$students",U),_=()=>rt(Ke,"$activeStudent",U),[U,h]=Ct(),f=I(),S=I(),b=I();let $=I([]),n=I(null),o=I({});function A(w){return w?w.classesPerStripe&&w.classesPerStripe>0?w.classesPerStripe:(w.rank||"").toLowerCase().includes("brown")?12:8:0}function te(w){const se=A(w),y=w?.classesSinceStripe||0;return se-y}function V(w){if(!w)return null;const se=new Date(w);return isNaN(se.getTime())?null:Math.floor((Date.now()-se.getTime())/864e5)}function ae(w){e(n)&&ba(w,e(n).id,"fistBump")}function he(w){if(!e(n))return;const se=e(o)[w];!se||!se.trim()||(ba(w,e(n).id,"comment",se.trim()),na(o,e(o)[w]=""))}W(()=>r(),()=>{v($,r()||[])}),W(()=>_(),()=>{v(n,_()||null)}),W(()=>e(n),()=>{v(f,e(n)?e(n).friends||[]:[])}),W(()=>(e($),e(f)),()=>{v(S,e($).filter(w=>e(f).includes(w.id)))}),W(()=>(e(S),e(n)),()=>{v(b,e(S).map(w=>{const se=te(w),y=V(w.lastClassDate),Z=Array.isArray(w.feedInteractions)?w.feedInteractions:[],L=Z.filter(oe=>oe.type==="fistBump"),ne=Z.filter(oe=>oe.type==="comment"),d=L.some(oe=>oe.actorId===e(n)?.id);return{id:w.id,name:w.displayName||w.name,rank:w.rank,remaining:se,lastClassDays:y,classesPerStripe:A(w),fistBumpCount:L.length,myFistBump:d,comments:ne}}))}),yt(),ut();var Y=ps(),G=s(a(Y),2);{var j=w=>{var se=ls();l(w,se)},ge=w=>{var se=tt(),y=Re(se);{var Z=ne=>{var d=ns();l(ne,d)},L=ne=>{var d=fs();Ye(d,5,()=>e(b),Oe,(oe,D)=>{var qe=gs(),Le=a(qe),Q=a(Le),ce=a(Q,!0);t(Q),t(Le);var F=s(Le,2),pe=a(F),re=a(pe),le=a(re,!0);t(re);var ke=s(re,2),ze=a(ke,!0);t(ke),t(pe);var B=s(pe,2),M=a(B);{var K=J=>{var T=os();l(J,T)},P=J=>{var T=vs(),Ze=a(T);t(T),N(()=>c(Ze,`${e(D),i(()=>e(D).remaining)??""} classes until next stripe`)),l(J,T)};x(M,J=>{e(D),i(()=>e(D).remaining<=0)?J(K):J(P,!1)})}var Se=s(M,2);{var me=J=>{var T=ds(),Ze=s(Re(T),2),xe=a(Ze);t(Ze),N(()=>c(xe,`Last class: ${e(D),i(()=>e(D).lastClassDays===0?"Today":`${e(D).lastClassDays}d ago`)??""}`)),l(J,T)};x(Se,J=>{e(D),i(()=>e(D).lastClassDays!==null)&&J(me)})}t(B);var Ge=s(B,2),X=a(Ge);t(Ge);var ee=s(Ge,2),je=a(ee),k=a(je);t(je);var R=s(je,2);Xt(R),t(ee);var ie=s(ee,2);{var C=J=>{var T=us();Ye(T,5,()=>(e(D),i(()=>e(D).comments)),Oe,(Ze,xe)=>{const be=qt(()=>(e($),e(xe),i(()=>e($).find(Me=>Me.id===e(xe).actorId))));var Ie=cs(),Be=a(Ie),We=a(Be);t(Be);var Ce=s(Be);t(Ie),N(()=>{c(We,`${Ve(e(be)),i(()=>e(be)?.displayName||e(be)?.name||"Unknown")??""}:`),c(Ce,` ${e(xe),i(()=>e(xe).text)??""}`)}),l(Ze,Ie)}),t(T),l(J,T)};x(ie,J=>{e(D),i(()=>e(D).comments.length)&&J(C)})}t(F);var ue=s(F,2),ve=a(ue),we=a(ve);t(ve),t(ue),t(qe),N((J,T,Ze)=>{c(ce,J),c(le,(e(D),i(()=>e(D).name))),c(ze,(e(D),i(()=>e(D).rank))),bt(X,T),Fe(je,1,(e(D),i(()=>`fb-btn ${e(D).myFistBump?"active":""}`)),"svelte-1blbebk"),c(k,`ðŸ‘Š ${e(D),i(()=>e(D).fistBumpCount||"")??""}`),c(we,`${Ze??""} / ${e(D),i(()=>e(D).classesPerStripe)??""}`)},[()=>(e(D),i(()=>e(D).name.split(" ").map(J=>J[0]).join("").toUpperCase())),()=>(e(D),i(()=>`width:${Math.min(100,Math.max(0,(e(D).classesPerStripe-e(D).remaining)/e(D).classesPerStripe*100))}%`)),()=>(e(D),i(()=>e(D).classesPerStripe-Math.max(0,e(D).remaining)))]),z("click",je,()=>ae(e(D).id)),Et(R,()=>e(o)[e(D).id],J=>na(o,e(o)[e(D).id]=J)),z("keydown",R,J=>J.key==="Enter"&&he(e(D).id)),l(oe,qe)}),t(d),l(ne,d)};x(y,ne=>{e(b),i(()=>e(b).length===0)?ne(Z):ne(L,!1)},!0)}l(w,se)};x(G,w=>{e(n)?w(ge,!1):w(j)})}t(Y),l(fe,Y),ct(),h()}var ms=u('<div class="birthday-callout"> </div>'),Is=u('<div class="kpi-item kpi-progress svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Next Stripe</div> <div class="kpi-value svelte-a1y6eq"> </div> <div class="kpi-sub svelte-a1y6eq"> </div></div>'),_s=u("<div></div>"),ys=u('<section class="panel status-progress-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Stripe Progress</h3> <div class="heatbar svelte-a1y6eq" aria-label="Stripe progress heatbar"></div> <p class="status-progress-text svelte-a1y6eq"> </p> <div class="status-progress-meta svelte-a1y6eq"><div class="svelte-a1y6eq"><span class="meta-label svelte-a1y6eq">Classes since stripe</span><span class="meta-value svelte-a1y6eq"> </span></div> <div class="svelte-a1y6eq"><span class="meta-label svelte-a1y6eq">Per stripe</span><span class="meta-value svelte-a1y6eq"> </span></div></div></section>'),hs=u('<div class="event-summary svelte-a1y6eq"> </div>'),ws=u('<div class="event-card svelte-a1y6eq"><div class="event-title svelte-a1y6eq"> </div> <div class="event-meta svelte-a1y6eq"> </div> <!></div>'),Cs=u('<p class="muted svelte-a1y6eq">No upcoming events listed.</p>'),As=u('<p class="badge-description svelte-a1y6eq"> </p>'),Ss=u('<article class="badge-card svelte-a1y6eq"><div class="badge-medal svelte-a1y6eq"> </div> <div class="badge-body svelte-a1y6eq"><div class="badge-name svelte-a1y6eq"> </div> <!></div></article>'),xs=u('<div class="status-achievements-row svelte-a1y6eq"></div>'),ks=u('<p class="muted svelte-a1y6eq">No achievements yetâ€¦ but your next class could unlock one!</p>'),Zs=u("<div></div>"),Ns=u('<section class="status-root svelte-a1y6eq"><!> <header class="status-header svelte-a1y6eq"><span class="eyebrow svelte-a1y6eq">Student Portal</span> <h2 class="svelte-a1y6eq">Status Dashboard</h2></header> <!> <div class="kpi-row svelte-a1y6eq"><!> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Classes This Month</div> <div class="kpi-value svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Total Classes</div> <div class="kpi-value svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Unread Messages</div> <div class="kpi-value svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Badges Earned</div> <div class="kpi-value svelte-a1y6eq"> </div> <div class="kpi-sub svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Days Since Last Class</div> <div class="kpi-value svelte-a1y6eq"> </div></div></div> <div class="status-panels svelte-a1y6eq"><section class="panel quick-actions-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Quick Actions</h3> <div class="actions-grid compact svelte-a1y6eq"><button class="qa-btn svelte-a1y6eq" type="button">View Profile</button> <button class="qa-btn svelte-a1y6eq" type="button">Open Social</button> <button class="qa-btn svelte-a1y6eq" type="button">Start Training</button></div></section> <!> <section class="panel goals-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Goals</h3> <div class="status-quick-grid svelte-a1y6eq"><article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Training Goals</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Practice Items</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip status-strip--highlight svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Assignments Due</span><span class="status-strip-value svelte-a1y6eq"> </span></article></div></section> <section class="panel records-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Personal Records</h3> <div class="status-quick-grid svelte-a1y6eq"><article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Current Rank</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Total Classes</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Member Since</span><span class="status-strip-value svelte-a1y6eq"> </span></article></div></section></div> <div class="status-bottom-panels svelte-a1y6eq"><section class="panel status-hud-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Upcoming Events</h3> <div class="events-grid svelte-a1y6eq"><!></div></section> <section class="panel achievements-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Achievements</h3> <!></section> <section class="panel attendance-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Attendance (Last 30 days)</h3> <div class="attendance-heatmap svelte-a1y6eq"></div> <div class="attendance-legend svelte-a1y6eq"><span class="legend-dot present svelte-a1y6eq"></span> Present â€¢ <span class="legend-dot svelte-a1y6eq"></span> Absent</div></section></div> <!></section>');function Ms(fe,H){dt(H,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,U]=Ct(),h=I(),f=I(),S=I(),b=I(),$=I(),n=I(),o=I(),A=I(),te=I(),V=I(),ae=I(),he=I(),Y=I(),G=I(),j=I(),ge=I(),w=I(),se=I(),y=I(),Z=I(),L=I(),ne=I();let d=I(null);function oe(g){if(!g)return 0;const q=(g.rank||"").toLowerCase().includes("black")||(g.rank||"").toLowerCase().includes("degree");if(g.rankType==="degree"||q){const O=g.yearsRequired||1,E=g.yearsAtRank||0;return O===0?0:Math.min(100,Math.max(0,E/O*100))}else{let O=g.classesPerStripe;(!O||O<=0)&&(O=(g.rank||"").toLowerCase().includes("brown")?12:8);let E=g.classesSinceStripe||0;try{if(g.beltSince&&Array.isArray(g.attendanceDates)){const de=new Date(g.beltSince);isNaN(de.getTime())||(E=g.attendanceDates.filter(it=>{const vt=new Date(it);return!isNaN(vt.getTime())&&vt>=de}).length%O)}}catch{}return O===0?0:Math.min(100,Math.max(0,E/O*100))}}function D(g){if(!g)return"";const q=(g.rank||"").toLowerCase().includes("black")||(g.rank||"").toLowerCase().includes("degree");if(g.rankType==="degree"||q){const O=g.yearsRequired||1,E=g.yearsAtRank||0,de=(O-E).toFixed(1);return de<=0?"Eligible for next degree review":`${de} years until next degree`}else{let O=g.classesPerStripe;(!O||O<=0)&&(O=(g.rank||"").toLowerCase().includes("brown")?12:8);let E=g.classesSinceStripe||0;try{if(g.beltSince&&Array.isArray(g.attendanceDates)){const Te=new Date(g.beltSince);isNaN(Te.getTime())||(E=g.attendanceDates.filter(vt=>{const ft=new Date(vt);return!isNaN(ft.getTime())&&ft>=Te}).length%O)}}catch{}const de=O-E;return de<=0?"Ready for next stripe!":`${de} classes until next stripe`}}function qe(g){if(!g||typeof g!="string")return"#64748b";const q=g.toLowerCase();return q.includes("white")?"#e5e7eb":q.includes("yellow")?"#facc15":q.includes("orange")?"#fb923c":q.includes("green")?"#22c55e":q.includes("blue")?"#3b82f6":q.includes("purple")?"#a855f7":q.includes("red")?"#ef4444":q.includes("brown")?"#92400e":q.includes("black")||q.includes("degree")?"#020617":"#64748b"}function Le(g){return g?g>=12?"#5f2a88":g>=9?"#3e3370":g>=6?"#3b4f7a":(g>=4,"#56679a"):"#56679a"}function Q(g){return g?g>=12?"diamond":g>=9?"gold":g>=6?"silver":g>=3?"bronze":null:null}function ce(g){switch(g){case"bronze":return'<svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="#cd7f32" stroke="#8b4e1e" stroke-width="2"/></svg>';case"silver":return'<svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="#c0c0c0" stroke="#7a7a7a" stroke-width="2"/></svg>';case"gold":return'<svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="#ffd700" stroke="#b08b00" stroke-width="2"/></svg>';case"diamond":return'<svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 2 L20 9 L12 22 L4 9 Z" fill="#ffffff"/></svg>';default:return""}}let F=I({});const pe=La.subscribe(g=>{v(F,g||{})});va(()=>{try{pe()}catch{}});function re(g){return g===null?"Unknown":g===0?"Today":`${g}d`}let le=I(!1),ke=I(!1);function ze(g){if(!g)return console.log("Birthday check: no dateString provided"),!1;try{const q=new Date,O=g.split("-");if(O.length!==3)return console.error("Invalid date format:",g),!1;const E=parseInt(O[1],10)-1,de=parseInt(O[2],10);console.log("Birthday check:",{dateString:g,today:q.toISOString(),todayMonth:q.getMonth(),todayDate:q.getDate(),birthdayMonth:E,birthdayDay:de});const Te=q.getMonth()===E&&q.getDate()===de;return console.log("Birthday match result:",Te),Te}catch(q){return console.error("Birthday parse error:",q),!1}}function B(){if(console.log("triggerConfetti called"),typeof window>"u"){console.log("Window undefined, skipping confetti");return}const g=document.getElementById("fx-root");if(!g){console.warn("fx-root not found for confetti");return}console.log("Creating confetti animation..."),g.innerHTML="";const q=["#facc15","#38bdf8","#22c55e","#ef4444","#a855f7","#fb923c"];for(let O=0;O<60;O++){const E=document.createElement("div");E.className="confetti-piece",E.style.position="absolute",E.style.borderRadius="50%",E.style.pointerEvents="none";const de=Math.random()*100;E.style.left=de+"%",E.style.top="-20px";const Te=8+Math.random()*8;E.style.width=Te+"px",E.style.height=Te+"px",E.style.background=q[Math.floor(Math.random()*q.length)];const it=Math.random()*500,vt=2e3+Math.random()*2e3,ft=de+(Math.random()-.5)*40,Gt=Math.random()*720-360;E.style.animation=`confettiFall ${vt}ms ease-out ${it}ms forwards`,E.style.setProperty("--end-x",ft+"%"),E.style.setProperty("--rotation",Gt+"deg"),g.appendChild(E),setTimeout(()=>E.remove(),vt+it+100)}console.log("Confetti created: 60 pieces")}Ca(()=>{}),W(()=>r(),()=>{v(d,r())}),W(()=>e(d),()=>{v(h,oe(e(d)))}),W(()=>e(d),()=>{v(f,D(e(d)))}),W(()=>e(d),()=>{v(S,e(d)?e(d).classesPerStripe&&e(d).classesPerStripe>0?e(d).classesPerStripe:(e(d).rank||"").toLowerCase().includes("brown")?12:8:0)}),W(()=>(e(d),e(S)),()=>{v(b,(()=>{if(!e(d))return 0;let g=e(d).classesSinceStripe||0;try{if(e(d).beltSince&&Array.isArray(e(d).attendanceDates)){const q=new Date(e(d).beltSince);isNaN(q.getTime())||(g=e(d).attendanceDates.filter(E=>{const de=new Date(E);return!isNaN(de.getTime())&&de>=q}).length%e(S))}}catch{}return g})())}),W(()=>e(d),()=>{v($,(e(d)?.displayName||e(d)?.name||"").split(" ").map(g=>g[0]||"").join("").toUpperCase())}),W(()=>e(d),()=>{v(n,e(d)?.roles?.includes("instructor"))}),W(()=>e(d),()=>{v(o,e(d)?.roles?.includes("assistant"))}),W(()=>(e(n),e(o)),()=>{v(A,e(n)?"Instructor":e(o)?"Assistant Instructor":"Student")}),W(()=>e(d),()=>{v(te,e(d)?.is3Level??0)}),W(()=>e(te),()=>{v(V,Q(e(te)))}),W(()=>e(V),()=>{v(ae,e(V)?ce(e(V)):"")}),W(()=>e(te),()=>{v(he,Le(e(te)))}),W(()=>e(d),()=>{v(Y,qe(e(d)?.rank))}),W(()=>e(d),()=>{v(G,Array.isArray(e(d)?.badges)?e(d).badges:[])}),W(()=>e(d),()=>{v(j,Array.isArray(e(d)?.messages)?e(d).messages.filter(g=>g.toId===e(d).id&&!g.read).length:0)}),W(()=>e(G),()=>{v(ge,e(G).length)}),W(()=>e(G),()=>{v(w,e(G).reduce((g,q)=>{const O=q.level||"Unknown";return g[O]=(g[O]||0)+1,g},{}))}),W(()=>e(d),()=>{v(se,Array.isArray(e(d)?.assignments)?e(d).assignments.filter(g=>g.due).length:0)}),W(()=>e(d),()=>{v(y,Array.isArray(e(d)?.practice)?e(d).practice.length:0)}),W(()=>e(d),()=>{v(Z,(()=>{if(!e(d)?.lastClassDate)return null;const g=new Date(e(d).lastClassDate);return isNaN(g.getTime())?null:Math.floor((Date.now()-g.getTime())/864e5)})())}),W(()=>(e(d),e(ke)),()=>{e(d)&&!e(ke)&&(console.log("Checking birthday for student:",e(d).name,e(d).birthday),ze(e(d).birthday)?(v(le,!0),v(ke,!0),setTimeout(()=>B(),300)):v(le,!1))}),W(()=>(e(F),e(d)),()=>{v(L,new Set((e(F).attendanceDates||e(d)?.attendanceDates||[]).map(g=>(g||"").toString().slice(0,10))))}),W(()=>e(L),()=>{v(ne,(()=>{const g=[];for(let O=29;O>=0;O--){const E=new Date;E.setDate(E.getDate()-O);const de=E.toISOString().slice(0,10);g.push({date:de,short:E.toLocaleDateString("en-US",{month:"short",day:"numeric"}),weekday:E.getDay(),present:e(L).has(de)})}return g})())}),yt(),ut();var M=Ns(),K=a(M);{var P=g=>{var q=ms(),O=a(q);t(q),N(E=>c(O,`ðŸŽ‰ Happy Birthday, ${E??""}!`),[()=>(e(d),i(()=>e(d)?.name?.split(" ")[0]||"there"))]),l(g,q)};x(K,g=>{e(le)&&g(P)})}var Se=s(K,4);Ua(Se,{});var me=s(Se,2),Ge=a(me);{var X=g=>{var q=Is(),O=s(a(q),2),E=a(O);t(O);var de=s(O,2),Te=a(de,!0);t(de),t(q),N(it=>{c(E,`${it??""}%`),c(Te,e(f))},[()=>(e(h),i(()=>Math.round(e(h))))]),l(g,q)};x(Ge,g=>{e(d),i(()=>!((e(d)?.rank||"").toLowerCase().includes("black")||(e(d)?.rank||"").toLowerCase().includes("degree")))&&g(X)})}var ee=s(Ge,2),je=s(a(ee),2),k=a(je,!0);t(je),t(ee);var R=s(ee,2),ie=s(a(R),2),C=a(ie,!0);t(ie),t(R);var ue=s(R,2),ve=s(a(ue),2),we=a(ve,!0);t(ve),t(ue);var J=s(ue,2),T=s(a(J),2),Ze=a(T,!0);t(T);var xe=s(T,2),be=a(xe);t(xe),t(J);var Ie=s(J,2),Be=s(a(Ie),2),We=a(Be,!0);t(Be),t(Ie),t(me);var Ce=s(me,2),Me=a(Ce),_e=s(a(Me),2),Ne=a(_e),Xe=s(Ne,2),Pe=s(Xe,2);t(_e),t(Me);var He=s(Me,2);{var Ue=g=>{var q=ys(),O=s(a(q),2);Ye(O,5,()=>(e(S),i(()=>Array.from({length:e(S)}))),Oe,(wt,jt,$t)=>{const Sa=qt(()=>$t<e(b)),ua=qt(()=>e(S)>1?$t/(e(S)-1):1),xa=qt(()=>(Ve(e(ua)),i(()=>Math.round(0+120*e(ua)))));var Kt=_s();N(()=>{Fe(Kt,1,`heat-seg ${e(Sa)?"is-filled":""}`,"svelte-a1y6eq"),bt(Kt,`--h:${e(xa)};`),pt(Kt,"title",`Class ${$t+1} of ${e(S)}`)}),l(wt,Kt)}),t(O);var E=s(O,2),de=a(E,!0);t(E);var Te=s(E,2),it=a(Te),vt=s(a(it)),ft=a(vt,!0);t(vt),t(it);var Gt=s(it,2),Yt=s(a(Gt)),Jt=a(Yt,!0);t(Yt),t(Gt),t(Te),t(q),N(()=>{c(de,e(f)),c(ft,e(b)),c(Jt,e(S))}),l(g,q)};x(He,g=>{e(d),i(()=>!((e(d)?.rank||"").toLowerCase().includes("black")||(e(d)?.rank||"").toLowerCase().includes("degree")))&&g(Ue)})}var lt=s(He,2),Lt=s(a(lt),2),Bt=a(Lt),Pt=s(a(Bt)),At=a(Pt,!0);t(Pt),t(Bt);var St=s(Bt,2),Tt=s(a(St)),Wt=a(Tt,!0);t(Tt),t(St);var zt=s(St,2),p=s(a(zt)),m=a(p,!0);t(p),t(zt),t(Lt),t(lt);var Ae=s(lt,2),$e=s(a(Ae),2),Je=a($e),mt=s(a(Je)),nt=a(mt,!0);t(mt),t(Je);var at=s(Je,2),xt=s(a(at)),kt=a(xt,!0);t(xt),t(at);var ye=s(at,2),De=s(a(ye)),gt=a(De,!0);t(De),t(ye),t($e),t(Ae),t(Ce);var Zt=s(Ce,2),Nt=a(Zt),Rt=s(a(Nt),2),Mt=a(Rt);{var Ht=g=>{var q=tt(),O=Re(q);Ye(O,1,()=>(e(d),i(()=>e(d).goldStars.slice(0,3))),Oe,(E,de)=>{var Te=ws(),it=a(Te),vt=a(it,!0);t(it);var ft=s(it,2),Gt=a(ft);t(ft);var Yt=s(ft,2);{var Jt=wt=>{var jt=hs(),$t=a(jt,!0);t(jt),N(()=>c($t,(e(de),i(()=>e(de).note)))),l(wt,jt)};x(Yt,wt=>{e(de),i(()=>e(de).note)&&wt(Jt)})}t(Te),N(()=>{c(vt,(e(de),i(()=>e(de).event))),c(Gt,`${e(de),i(()=>e(de).date)??""} â€¢ ${e(de),i(()=>e(de).location)??""}`)}),l(E,Te)}),l(g,q)},et=g=>{var q=Cs();l(g,q)};x(Mt,g=>{e(d),i(()=>Array.isArray(e(d)?.goldStars)&&e(d).goldStars.length>0)?g(Ht):g(et,!1)})}t(Rt),t(Nt);var Qe=s(Nt,2),ht=s(a(Qe),2);{var st=g=>{var q=xs();Ye(q,5,()=>(e(G),i(()=>e(G).slice(0,6))),Oe,(O,E)=>{var de=Ss(),Te=a(de),it=a(Te,!0);t(Te);var vt=s(Te,2),ft=a(vt),Gt=a(ft,!0);t(ft);var Yt=s(ft,2);{var Jt=wt=>{var jt=As(),$t=a(jt,!0);t(jt),N(()=>c($t,(e(E),i(()=>e(E).description)))),l(wt,jt)};x(Yt,wt=>{e(E),i(()=>e(E).description)&&wt(Jt)})}t(vt),t(de),N(wt=>{c(it,wt),c(Gt,(e(E),i(()=>e(E).name)))},[()=>(e(E),i(()=>(e(E).level||"?").charAt(0)))]),l(O,de)}),t(q),l(g,q)},Ut=g=>{var q=ks();l(g,q)};x(ht,g=>{e(G),i(()=>e(G).length)?g(st):g(Ut,!1)})}t(Qe);var Ee=s(Qe,2),ot=s(a(Ee),2);Ye(ot,5,()=>e(ne),Oe,(g,q)=>{var O=Zs();N(()=>{Fe(O,1,(e(q),i(()=>`heatday ${e(q).present?"present":""}`)),"svelte-a1y6eq"),pt(O,"title",(e(q),i(()=>`${e(q).date} â€¢ ${e(q).present?"Present":"Absent"}`)))}),l(g,O)}),t(ot),da(2),t(Ee),t(Zt);var Dt=s(Zt,2);bs(Dt,{}),t(M),N((g,q)=>{c(k,g),c(C,(e(d),i(()=>e(d)?.totalClasses??0))),c(we,(e(F),e(j),i(()=>e(F).unreadMessages??e(j)))),c(Ze,(e(F),e(ge),i(()=>e(F).badgesCount??e(ge)))),c(be,`${e(F),e(w),i(()=>e(F).badgesByLevel?.Bronze||e(w).Bronze||0)??""}B â€¢ ${e(F),e(w),i(()=>e(F).badgesByLevel?.Silver||e(w).Silver||0)??""}S â€¢ ${e(F),e(w),i(()=>e(F).badgesByLevel?.Gold||e(w).Gold||0)??""}G`),c(We,q),c(At,(e(d),i(()=>e(d)?.funStats?.trainingGoals??0))),c(Wt,(e(F),i(()=>e(F).practiceCount??0))),c(m,(e(F),i(()=>e(F).assignmentsDue??0))),c(nt,(e(d),i(()=>e(d)?.rank||"â€”"))),c(kt,(e(d),i(()=>e(d)?.totalClasses??0))),c(gt,(e(d),i(()=>e(d)?.joinDate||"â€”")))},[()=>(e(d),i(()=>(()=>{const g=new Date,q=g.getMonth(),O=g.getFullYear();return(Array.isArray(e(d)?.attendanceDates)?e(d).attendanceDates:[]).filter(de=>{const Te=new Date(de);return!isNaN(Te)&&Te.getMonth()===q&&Te.getFullYear()===O}).length})())),()=>(e(F),e(Z),i(()=>re(e(F).daysSinceLastClass??e(Z))))]),z("click",Ne,()=>window&&window.scrollTo(0,0)),z("click",Xe,()=>ma(()=>Promise.resolve().then(()=>ya),void 0,import.meta.url).then(g=>g.activeTab.set("messages"))),z("click",Pe,()=>ma(()=>Promise.resolve().then(()=>ya),void 0,import.meta.url).then(g=>g.activeTab.set("training"))),l(fe,M),ct(),U()}var Ds=u(`<style>@keyframes modalFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes modalSlideUp {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }</style>`),Gs=u('<div class="modal-backdrop svelte-ta60gp" role="presentation"><div class="modal-content svelte-ta60gp" role="dialog" aria-modal="true" tabindex="-1"><header class="modal-header svelte-ta60gp"><h2 class="svelte-ta60gp"> </h2> <button class="modal-close svelte-ta60gp">âœ•</button></header> <div class="modal-body svelte-ta60gp"><!></div></div></div>');function ta(fe,H){dt(H,!1);let r=It(H,"open",8,!1),_=It(H,"title",8,""),U=It(H,"onClose",8,()=>{});function h(n){n.target===n.currentTarget&&U()()}function f(n){n.key==="Escape"&&r()&&U()()}ut();var S=tt();z("keydown",Pa,f),Fa("ta60gp",n=>{var o=Ds();l(n,o)});var b=Re(S);{var $=n=>{var o=Gs(),A=a(o),te=a(A),V=a(te),ae=a(V,!0);t(V);var he=s(V,2);t(te);var Y=s(te,2),G=a(Y);Va(G,H,"default",{}),t(Y),t(A),t(o),N(()=>c(ae,_())),z("click",he,function(...j){U()?.apply(this,j)}),z("click",A,Ia(function(j){_a.call(this,H,j)})),z("keydown",A,Ia(function(j){_a.call(this,H,j)})),z("click",o,h),z("keydown",o,f),l(n,o)};x(b,n=>{r()&&n($)})}l(fe,S),ct()}var js=u('<span class="role-badge svelte-1btwglb"> </span>'),Bs=u('<div class="contact-roles svelte-1btwglb"></div>'),Ps=u('<button class="btn btn--primary svelte-1btwglb">Add Buddy</button>'),$s=u('<div class="contact-modal svelte-1btwglb"><div class="contact-header svelte-1btwglb"><div class="contact-avatar svelte-1btwglb"> </div> <div class="contact-info svelte-1btwglb"><div class="contact-name svelte-1btwglb"> </div> <div class="contact-rank svelte-1btwglb"> </div> <!> <div class="portal-chip svelte-1btwglb">Student Portal</div></div></div> <div class="contact-actions svelte-1btwglb"><!> <button class="btn svelte-1btwglb">Message</button> <button class="btn svelte-1btwglb">View Profile</button></div></div>');function qs(fe,H){dt(H,!1);const r=()=>rt(_t,"$students",U),_=()=>rt(Ke,"$activeStudent",U),[U,h]=Ct(),f=I();let S=It(H,"open",8,!1),b=It(H,"contact",8,null),$=It(H,"onClose",8,()=>{}),n=It(H,"onViewProfile",8,null);function o(G){return G?G.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Miss|Dr\.?|Master)\s+/i,"").trim().split(/\s+/).map(ge=>ge[0]||"").join("").slice(0,2).toUpperCase():""}function A(G){if(!G||typeof G!="string")return"#64748b";const j=G.toLowerCase();return j.includes("white")?"#e5e7eb":j.includes("yellow")?"#facc15":j.includes("orange")?"#fb923c":j.includes("green")?"#22c55e":j.includes("blue")?"#3b82f6":j.includes("purple")?"#a855f7":j.includes("red")?"#ef4444":j.includes("brown")?"#92400e":j.includes("black")||j.includes("degree")?"#020617":"#64748b"}function te(){const G=_();return!G||!Array.isArray(G.buddies)?!1:G.buddies.some(j=>j.name===(b()?.name||""))}function V(){const G=_();!G||!b()?.id||(oa(G.id,b().id,!0,e(f)),_t.set([...e(f)]),Ke.set({...G}))}W(()=>r(),()=>{v(f,r()||[])}),yt(),ut();var ae=tt(),he=Re(ae);{var Y=G=>{ta(G,{title:"Contact",get onClose(){return $()},children:(j,ge)=>{var w=$s(),se=a(w),y=a(se),Z=a(y,!0);t(y);var L=s(y,2),ne=a(L),d=a(ne,!0);t(ne);var oe=s(ne,2),D=a(oe,!0);t(oe);var qe=s(oe,2);{var Le=re=>{var le=Bs();Ye(le,5,()=>(Ve(b()),i(()=>b().roles)),Oe,(ke,ze)=>{var B=js(),M=a(B,!0);t(B),N(()=>c(M,e(ze))),l(ke,B)}),t(le),l(re,le)};x(qe,re=>{Ve(b()),i(()=>Array.isArray(b().roles)&&b().roles.length)&&re(Le)})}da(2),t(L),t(se);var Q=s(se,2),ce=a(Q);{var F=re=>{var le=Ps();z("click",le,V),l(re,le)};x(ce,re=>{i(()=>!te())&&re(F)})}var pe=s(ce,4);t(Q),t(w),N((re,le)=>{bt(y,re),c(Z,le),c(d,(Ve(b()),i(()=>b().name))),c(D,(Ve(b()),i(()=>b().rank)))},[()=>(Ve(b()),i(()=>`--avatar-bg: ${A(b().rank||"")}`)),()=>(Ve(b()),i(()=>o(b().name)))]),z("click",pe,()=>n()&&n()(b())),l(j,w)},$$slots:{default:!0}})};x(he,G=>{S()&&b()&&G(Y)})}l(fe,ae),ct(),h()}var Ls=u('<span class="role-badge svelte-10urflq"> </span>'),Ts=u('<div class="profile-roles svelte-10urflq"></div>'),Ws=u('<div class="badge-pill svelte-10urflq"> </div>'),zs=u('<div class="profile-badges svelte-10urflq"><div class="section-title svelte-10urflq">Recent Badges</div> <div class="badge-row svelte-10urflq"></div></div>'),Rs=u('<div class="profile-modal svelte-10urflq"><div class="profile-header svelte-10urflq"><div class="profile-avatar svelte-10urflq"> </div> <div class="profile-info svelte-10urflq"><div class="profile-name svelte-10urflq"> </div> <div class="profile-rank svelte-10urflq"> </div> <!></div></div> <div class="profile-stats svelte-10urflq"><div class="stat svelte-10urflq"><span class="label svelte-10urflq">Total Classes</span><span class="value svelte-10urflq"> </span></div> <div class="stat svelte-10urflq"><span class="label svelte-10urflq">Member Since</span><span class="value svelte-10urflq"> </span></div> <div class="stat svelte-10urflq"><span class="label svelte-10urflq">Buddies</span><span class="value svelte-10urflq"> </span></div></div> <!></div>');function Hs(fe,H){dt(H,!1);let r=It(H,"open",8,!1),_=It(H,"student",8,null),U=It(H,"onClose",8,()=>{});function h(n){return n?n.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Miss|Dr\.?|Master)\s+/i,"").trim().split(/\s+/).map(A=>A[0]||"").join("").slice(0,2).toUpperCase():""}function f(n){if(!n||typeof n!="string")return"#64748b";const o=n.toLowerCase();return o.includes("white")?"#e5e7eb":o.includes("yellow")?"#facc15":o.includes("orange")?"#fb923c":o.includes("green")?"#22c55e":o.includes("blue")?"#3b82f6":o.includes("purple")?"#a855f7":o.includes("red")?"#ef4444":o.includes("brown")?"#92400e":o.includes("black")||o.includes("degree")?"#020617":"#64748b"}ut();var S=tt(),b=Re(S);{var $=n=>{ta(n,{title:"Profile",get onClose(){return U()},children:(o,A)=>{var te=Rs(),V=a(te),ae=a(V),he=a(ae,!0);t(ae);var Y=s(ae,2),G=a(Y),j=a(G,!0);t(G);var ge=s(G,2),w=a(ge,!0);t(ge);var se=s(ge,2);{var y=re=>{var le=Ts();Ye(le,5,()=>(Ve(_()),i(()=>_().roles)),Oe,(ke,ze)=>{var B=Ls(),M=a(B,!0);t(B),N(()=>c(M,e(ze))),l(ke,B)}),t(le),l(re,le)};x(se,re=>{Ve(_()),i(()=>Array.isArray(_().roles)&&_().roles.length)&&re(y)})}t(Y),t(V);var Z=s(V,2),L=a(Z),ne=s(a(L)),d=a(ne,!0);t(ne),t(L);var oe=s(L,2),D=s(a(oe)),qe=a(D,!0);t(D),t(oe);var Le=s(oe,2),Q=s(a(Le)),ce=a(Q,!0);t(Q),t(Le),t(Z);var F=s(Z,2);{var pe=re=>{var le=zs(),ke=s(a(le),2);Ye(ke,5,()=>(Ve(_()),i(()=>_().badges.slice(0,4))),Oe,(ze,B)=>{var M=Ws(),K=a(M,!0);t(M),N(()=>c(K,(e(B),i(()=>e(B).name)))),l(ze,M)}),t(ke),t(le),l(re,le)};x(F,re=>{Ve(_()),i(()=>Array.isArray(_().badges)&&_().badges.length)&&re(pe)})}t(te),N((re,le,ke)=>{bt(ae,re),c(he,le),c(j,(Ve(_()),i(()=>_().displayName||_().name))),c(w,(Ve(_()),i(()=>_().rank))),c(d,(Ve(_()),i(()=>_().totalClasses??0))),c(qe,(Ve(_()),i(()=>_().joinDate||"â€”"))),c(ce,ke)},[()=>(Ve(_()),i(()=>`--avatar-bg: ${f(_().rank||"")}`)),()=>(Ve(_()),i(()=>h(_().displayName||_().name))),()=>(Ve(_()),i(()=>Array.isArray(_().buddies)?_().buddies.length:0))]),l(o,te)},$$slots:{default:!0}})};x(b,n=>{r()&&_()&&n($)})}l(fe,S),ct()}var Ys=u('<div class="list-section svelte-g9ob4c">Pinned</div>'),Us=u('<div class="buddy-unread svelte-g9ob4c"> </div>'),Js=u('<div class="buddy-context svelte-g9ob4c"><button class="ctx-btn svelte-g9ob4c">Pin/Unpin</button> <button class="ctx-btn svelte-g9ob4c">Hide/Unhide</button> <button class="ctx-btn svelte-g9ob4c">Mark Unread</button></div>'),Vs=u('<div role="button" tabindex="0"><div class="buddy-avatar svelte-g9ob4c"> </div> <div class="buddy-main svelte-g9ob4c"><div class="buddy-name svelte-g9ob4c"> </div> <div class="buddy-meta svelte-g9ob4c"> </div> <div class="buddy-preview svelte-g9ob4c"> </div></div> <!> <button type="button" class="buddy-menu svelte-g9ob4c">â‹®</button></div> <!>',1),Fs=u('<div class="typing-indicator svelte-g9ob4c"><span class="svelte-g9ob4c"></span><span class="svelte-g9ob4c"></span><span class="svelte-g9ob4c"></span></div>'),Xs=u('<div><div class="bubble-content svelte-g9ob4c"> </div> <div class="bubble-time svelte-g9ob4c"> </div></div>'),Es=u('<div class="thread-header svelte-g9ob4c"><div class="thread-title-row svelte-g9ob4c"><div></div> <h2 class="thread-title svelte-g9ob4c"> </h2></div> <div class="thread-actions svelte-g9ob4c"><button type="button" class="contact-btn svelte-g9ob4c">Contact</button> <button type="button" class="contact-btn svelte-g9ob4c"> </button> <button type="button" class="contact-btn svelte-g9ob4c"> </button> <button type="button" class="contact-btn svelte-g9ob4c">Mark Unread</button> <button type="button" class="contact-btn danger svelte-g9ob4c">Delete Chat</button></div></div> <div class="message-scroll svelte-g9ob4c"><!> <!></div> <div class="message-input-box svelte-g9ob4c"><input type="text" placeholder="Type a message..." class="message-input svelte-g9ob4c"/> <button type="button" class="send-btn svelte-g9ob4c">Send</button></div>',1),Ks=u('<div class="empty-state svelte-g9ob4c"><p class="svelte-g9ob4c">Select a buddy to start chatting</p></div>'),Os=u('<section class="messages-root svelte-g9ob4c"><div class="messages-panel svelte-g9ob4c"><div class="messages-funstrip svelte-g9ob4c"><div class="fun-chip svelte-g9ob4c"><div class="fun-label svelte-g9ob4c">Unread</div> <div class="fun-value svelte-g9ob4c"> </div></div> <div class="fun-chip svelte-g9ob4c"><div class="fun-label svelte-g9ob4c">Buddies</div> <div class="fun-value svelte-g9ob4c"> </div></div> <div class="fun-chip svelte-g9ob4c"><div class="fun-label svelte-g9ob4c">Threads</div> <div class="fun-value svelte-g9ob4c"> </div></div></div> <div class="buddy-list svelte-g9ob4c"><h3 class="buddy-list-title svelte-g9ob4c">Messages</h3> <div class="buddy-filters svelte-g9ob4c"><button type="button">All</button> <button type="button">Buddies</button> <button type="button">Unread</button></div> <div class="buddy-actions-row svelte-g9ob4c"><button type="button" class="mark-all-link svelte-g9ob4c">Mark all read</button> <div class="new-chat svelte-g9ob4c"><input type="text" class="new-chat-input svelte-g9ob4c" placeholder="Start new chatâ€¦"/> <button type="button" class="new-chat-btn svelte-g9ob4c">New Chat</button></div></div> <div class="buddy-search svelte-g9ob4c"><input type="text" class="buddy-search-input svelte-g9ob4c" placeholder="Search contactsâ€¦"/></div> <div class="buddy-list-scroll svelte-g9ob4c"><!> <!></div></div> <div class="message-thread svelte-g9ob4c"><!></div></div></section> <!> <!>',1);function Qs(fe,H){dt(H,!1);const r=()=>rt(Ke,"$activeStudent",U),_=()=>rt(_t,"$students",U),[U,h]=Ct();let f=I(null),S=I(null),b=I(""),$=I([]),n=I([]),o=I([]),A=I([]),te=I([]),V=I(""),ae=I("all"),he=I(!1),Y=I(null),G=I(!1),j=I(null),ge=I(null),w=I(!1),se=I("");function y(p){try{return p==null?p:p.toString()}catch{return p}}function Z(p){if(!p)return p;const m=e(A).find($e=>y($e.id)===y(p));if(m)return y(m.id);const Ae=e(A).find($e=>$e.name===p||$e.displayName===p);return y(Ae?Ae.id:p)}function L(){if(!r()||!e(f))return;const p=r(),m=new Set(p.hiddenChats||[]);m.has(e(f))?m.delete(e(f)):m.add(e(f)),p.hiddenChats=Array.from(m),Ke.set({...p}),_t.set([...e(A)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(A)))}function ne(){if(!r()||!e(f))return;const p=r(),m=new Set(p.pinnedChats||[]);m.has(e(f))?m.delete(e(f)):m.add(e(f)),p.pinnedChats=Array.from(m),Ke.set({...p}),_t.set([...e(A)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(A)))}function d(p){const m=Z(p.name);v(ge,e(ge)===m?null:m)}function oe(p){v(f,Z(p.name)),ne()}function D(p){v(f,Z(p.name)),L()}function qe(p){v(f,Z(p.name)),B()}function Le(){v(w,!0),setTimeout(()=>{v(w,!1)},1500)}function Q(p){if(!p||typeof p!="string")return"#64748b";const m=p.toLowerCase();return m.includes("white")?"#e5e7eb":m.includes("yellow")?"#facc15":m.includes("orange")?"#fb923c":m.includes("green")?"#22c55e":m.includes("blue")?"#3b82f6":m.includes("purple")?"#a855f7":m.includes("red")?"#ef4444":m.includes("brown")?"#92400e":m.includes("black")||m.includes("degree")?"#020617":"#64748b"}function ce(p){return p?p.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Miss|Dr\.?|Master)\s+/i,"").trim().split(/\s+/).map(Ae=>Ae[0]||"").join("").slice(0,2).toUpperCase():""}function F(p){v(S,p.name),v(f,Z(p.name)),v(b,"")}function pe(){if(!e(f))return;const p=Qt(e(A),e(f));p&&(v(Y,{id:p.id,name:p.displayName||p.name,rank:p.rank,roles:p.roles||[]}),v(he,!0))}function re(){v(he,!1),v(Y,null)}function le(p){const m=Qt(e(A),p.id);m&&(v(j,m),v(G,!0))}function ke(){v(G,!1),v(j,null)}function ze(){if(!e(b).trim()||!e(f)||!r())return;const p=Ta(r().id,e(f),e(b),e(A));p&&(v(n,Array.isArray(r().messages)?[...r().messages]:[]),e(n).some(Ae=>Ae.timestamp===p.timestamp&&Ae.text===p.text)||(v(n,[...e(n),p]),Ot(Ke,i(r).messages=e(n),i(r))),v(b,""),_t.set([...e(A)]),Ke.set({...r()}),v(o,e(n).filter(Ae=>y(Ae.fromId)===y(r().id)&&y(Ae.toId)===y(e(f))||y(Ae.toId)===y(r().id)&&y(Ae.fromId)===y(e(f)))),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(A))))}function B(){if(!r()||!e(f))return;const p=r(),m=(p.messages||[]).slice().reverse().findIndex($e=>y($e.fromId)===y(e(f))&&y($e.toId)===y(p.id));if(m===-1)return;const Ae=p.messages.length-1-m;p.messages[Ae]={...p.messages[Ae],read:!1},Ke.set({...p}),_t.set([...e(A)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(A)))}function M(){const p=e(se).trim();if(!p)return;const m=e(A).find(Ae=>(Ae.displayName||Ae.name).toLowerCase().includes(p.toLowerCase()));!m||m.id===r()?.id||(v(f,m.id),v(S,m.displayName||m.name),v(b,""))}function K(){if(!r()||!e(f))return;const p=r(),m=Qt(e(A),e(f));if(!m)return;const Ae=($e,Je,mt)=>Array.isArray($e)?$e.filter(nt=>!(nt.fromId===Je&&nt.toId===mt||nt.fromId===mt&&nt.toId===Je)):[];p.messages=Ae(p.messages,p.id,m.id),m.messages=Ae(m.messages,p.id,m.id),_t.set([...e(A)]),Ke.set({...p}),v(n,[...p.messages]),v(o,[]),v(f,null),v(S,null),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(A)))}function P(p){const m=Z(p.name),Ae=e(n).filter(Je=>Je.fromId===r().id&&Je.toId===m||Je.toId===r().id&&Je.fromId===m);if(Ae.length===0)return"No messages yet";const $e=Ae[Ae.length-1];return $e.text.length>30?$e.text.substring(0,30)+"...":$e.text}function Se(p){return p?new Date(p).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}let me=I();function Ge(){e(me)&&setTimeout(()=>{na(me,e(me).scrollTop=e(me).scrollHeight)},0)}W(()=>r(),()=>{r()&&(!r().hiddenChats||!Array.isArray(r().hiddenChats))&&Ot(Ke,i(r).hiddenChats=[],i(r))}),W(()=>r(),()=>{r()&&(!r().pinnedChats||!Array.isArray(r().pinnedChats))&&Ot(Ke,i(r).pinnedChats=[],i(r))}),W(()=>_(),()=>{v(A,_()||[])}),W(()=>(r(),e(A),e($),e(n),e(te),e(ae),e(V),e(f),e(S)),()=>{if(r()&&e(A).length>0){v($,Array.isArray(r().buddies)?r().buddies:[]),v(n,Array.isArray(r().messages)?r().messages:[]);const p=Array.isArray(r().roles)?r().roles:[],m=p.includes("instructor")||p.includes("assistant"),Ae=new Set(e($).map(ye=>ye.displayName||ye.name)),$e=new Set(e($).map(ye=>ye.id).filter(Boolean)),Je=new Set;e(n).forEach(ye=>{const De=y(ye.fromId)===y(r().id)?y(ye.toId):y(ye.fromId);Je.add(De)});const mt=Array.from(Je).map(ye=>{const De=Qt(e(A),ye);if(!De)return null;const gt=De.displayName||De.name;return Ae.has(gt)||$e.has(y(De.id))?null:{name:gt,rank:De.rank,streak:0,status:"Message thread"}}).filter(Boolean);if(m){const ye=e(A).filter(De=>De.id!==r().id).map(De=>{const gt=De.displayName||De.name;return Ae.has(gt)||$e.has(y(De.id))||Je.has(y(De.id))?null:{name:gt,rank:De.rank,streak:0,status:"Available"}}).filter(Boolean);v(te,[...e($),...mt,...ye])}else v(te,[...e($),...mt]);const nt=new Set((r().hiddenChats||[]).map(ye=>ye));let at=[...e(te)].filter(ye=>!nt.has(Z(ye.name)));if(e(ae)==="buddies"){const ye=new Set(e($).map(De=>De.displayName||De.name));at=at.filter(De=>ye.has(De.name))}else if(e(ae)==="unread"){const ye=new Set((e(n)||[]).filter(De=>y(De.toId)===y(r().id)&&De.read===!1).map(De=>y(De.fromId)));at=at.filter(De=>ye.has(y(Z(De.name))))}const xt=new Set((r().pinnedChats||[]).map(ye=>ye));at.sort((ye,De)=>(xt.has(Z(De.name))?1:0)-(xt.has(Z(ye.name))?1:0));const kt=e(V).trim()===""?at:at.filter(ye=>(ye.name||"").toLowerCase().includes(e(V).toLowerCase()));v(te,kt),!e(f)&&e(te).length>0&&(v(S,e(te)[0].name),v(f,Z(e(S)))),e(f)&&v(o,e(n).filter(ye=>y(ye.fromId)===y(r().id)&&y(ye.toId)===y(e(f))||y(ye.toId)===y(r().id)&&y(ye.fromId)===y(e(f))))}}),W(()=>e(o),()=>{e(o)&&Ge()}),yt(),ut();var X=Os(),ee=Re(X),je=a(ee),k=a(je),R=a(k),ie=s(a(R),2),C=a(ie,!0);t(ie),t(R);var ue=s(R,2),ve=s(a(ue),2),we=a(ve,!0);t(ve),t(ue);var J=s(ue,2),T=s(a(J),2),Ze=a(T,!0);t(T),t(J),t(k);var xe=s(k,2),be=s(a(xe),2),Ie=a(be),Be=s(Ie,2),We=s(Be,2);t(be);var Ce=s(be,2),Me=a(Ce),_e=s(Me,2),Ne=a(_e);Xt(Ne);var Xe=s(Ne,2);t(_e),t(Ce);var Pe=s(Ce,2),He=a(Pe);Xt(He),t(Pe);var Ue=s(Pe,2),lt=a(Ue);{var Lt=p=>{var m=Ys();l(p,m)};x(lt,p=>{r(),i(()=>(r()?.pinnedChats||[]).length>0)&&p(Lt)})}var Bt=s(lt,2);Ye(Bt,1,()=>e(te),p=>p.name,(p,m)=>{var Ae=Vs(),$e=Re(Ae),Je=a($e),mt=a(Je,!0);t(Je);var nt=s(Je,2),at=a(nt),xt=a(at,!0);t(at);var kt=s(at,2),ye=a(kt);t(kt);var De=s(kt,2),gt=a(De,!0);t(De),t(nt);var Zt=s(nt,2);{var Nt=et=>{var Qe=Us(),ht=a(Qe,!0);t(Qe),N(st=>c(ht,st),[()=>(e(n),e(m),r(),i(()=>(e(n)||[]).filter(st=>y(st.fromId)===y(Z(e(m).name))&&y(st.toId)===y(r()?.id)&&st.read===!1).length))]),l(et,Qe)};x(Zt,et=>{e(n),e(m),r(),i(()=>(e(n)||[]).filter(Qe=>y(Qe.fromId)===y(Z(e(m).name))&&y(Qe.toId)===y(r()?.id)&&Qe.read===!1).length>0)&&et(Nt)})}var Rt=s(Zt,2);t($e);var Mt=s($e,2);{var Ht=et=>{var Qe=Js(),ht=a(Qe),st=s(ht,2),Ut=s(st,2);t(Qe),z("click",ht,()=>oe(e(m))),z("click",st,()=>D(e(m))),z("click",Ut,()=>qe(e(m))),l(et,Qe)};x(Mt,et=>{e(ge),e(m),i(()=>e(ge)===Z(e(m).name))&&et(Ht)})}N((et,Qe,ht,st)=>{Fe($e,1,`buddy-row ${et??""}`,"svelte-g9ob4c"),bt(Je,Qe),c(mt,ht),c(xt,(e(m),i(()=>e(m).name))),c(ye,`${e(m),i(()=>e(m).rank||"")??""}${e(m),i(()=>e(m).streak?` Â· Streak: ${e(m).streak}`:"")??""}`),c(gt,st)},[()=>(e(f),e(m),i(()=>e(f)===Z(e(m).name)?"is-active":"")),()=>(e(m),i(()=>`--avatar-bg: ${Q(e(m).rank||"")}`)),()=>(e(m),i(()=>ce(e(m).name))),()=>(e(m),i(()=>P(e(m).name)))]),z("click",Rt,et=>{et.stopPropagation(),d(e(m))}),z("click",$e,()=>F(e(m))),z("keydown",$e,et=>{(et.key==="Enter"||et.key===" ")&&F(e(m))}),l(p,Ae)}),t(Ue),t(xe);var Pt=s(xe,2),At=a(Pt);{var St=p=>{var m=Es(),Ae=Re(m),$e=a(Ae),Je=a($e);let mt;var nt=s(Je,2),at=a(nt,!0);t(nt),t($e);var xt=s($e,2),kt=a(xt),ye=s(kt,2),De=a(ye,!0);t(ye);var gt=s(ye,2),Zt=a(gt,!0);t(gt);var Nt=s(gt,2),Rt=s(Nt,2);t(xt),t(Ae);var Mt=s(Ae,2),Ht=a(Mt);{var et=Ee=>{var ot=Fs();l(Ee,ot)};x(Ht,Ee=>{e(w)&&Ee(et)})}var Qe=s(Ht,2);Ye(Qe,1,()=>e(o),Ee=>Ee.timestamp,(Ee,ot)=>{var Dt=Xs(),g=a(Dt),q=a(g,!0);t(g);var O=s(g,2),E=a(O,!0);t(O),t(Dt),N((de,Te)=>{Fe(Dt,1,`message-bubble ${e(ot),r(),i(()=>e(ot).fromId===r()?.id?"is-sent":"is-received")??""}`,"svelte-g9ob4c"),c(q,(e(ot),i(()=>e(ot).text))),pt(O,"title",de),c(E,Te)},[()=>(e(ot),i(()=>new Date(e(ot).timestamp).toLocaleString())),()=>(e(ot),i(()=>Se(e(ot).timestamp)))]),l(Ee,Dt)}),t(Mt),qa(Mt,Ee=>v(me,Ee),()=>e(me));var ht=s(Mt,2),st=a(ht);Xt(st);var Ut=s(st,2);t(ht),N((Ee,ot,Dt)=>{mt=Fe(Je,1,"presence-dot svelte-g9ob4c",null,mt,Ee),c(at,e(S)),c(De,ot),c(Zt,Dt)},[()=>({"is-unread":(e(n)||[]).some(Ee=>Ee.fromId===e(f)&&Ee.toId===r()?.id&&Ee.read===!1)}),()=>(r(),e(f),i(()=>(r()?.pinnedChats||[]).includes(e(f))?"Unpin":"Pin")),()=>(r(),e(f),i(()=>(r()?.hiddenChats||[]).includes(e(f))?"Unhide":"Hide"))]),z("click",kt,pe),z("click",ye,()=>ne()),z("click",gt,()=>L()),z("click",Nt,B),z("click",Rt,K),Et(st,()=>e(b),Ee=>v(b,Ee)),z("keydown",st,Ee=>{Ee.key==="Enter"?ze():Le()}),z("click",Ut,ze),l(p,m)},Tt=p=>{var m=Ks();l(p,m)};x(At,p=>{e(f)?p(St):p(Tt,!1)})}t(Pt),t(je),t(ee);var Wt=s(ee,2);qs(Wt,{get open(){return e(he)},get contact(){return e(Y)},onClose:re,onViewProfile:le});var zt=s(Wt,2);Hs(zt,{get open(){return e(G)},get student(){return e(j)},onClose:ke}),N((p,m,Ae)=>{c(C,p),c(we,m),c(Ze,Ae),Fe(Ie,1,`filter-chip ${e(ae)==="all"?"is-active":""}`,"svelte-g9ob4c"),Fe(Be,1,`filter-chip ${e(ae)==="buddies"?"is-active":""}`,"svelte-g9ob4c"),Fe(We,1,`filter-chip ${e(ae)==="unread"?"is-active":""}`,"svelte-g9ob4c")},[()=>(e(n),r(),i(()=>Array.isArray(e(n))?e(n).filter(p=>p.toId===r()?.id&&p.read===!1).length:0)),()=>(e($),i(()=>Array.isArray(e($))?e($).length:0)),()=>(e(n),r(),i(()=>Array.isArray(e(n))?new Set(e(n).map(p=>p.fromId===r()?.id?p.toId:p.fromId)).size:0))]),z("click",Ie,()=>v(ae,"all")),z("click",Be,()=>v(ae,"buddies")),z("click",We,()=>v(ae,"unread")),z("click",Me,()=>{if(!r())return;const p=(r().messages||[]).map(m=>m.toId===r().id?{...m,read:!0}:m);Ot(Ke,i(r).messages=p,i(r)),Ke.set({...r()}),_t.set([...e(A)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(A)))}),Et(Ne,()=>e(se),p=>v(se,p)),z("click",Xe,M),Et(He,()=>e(V),p=>v(V,p)),l(fe,X),ct(),h()}var ei=u('<p class="muted svelte-ifefql">Select a student to manage buddies.</p>'),ti=u('<p class="muted svelte-ifefql">No buddies yet. Send a request below.</p>'),ai=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><button class="btn btn-danger svelte-ifefql">Remove</button></div></div></li>'),si=u('<ul class="list svelte-ifefql"></ul>'),ii=u('<p class="muted svelte-ifefql">No incoming requests.</p>'),ri=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><button class="btn svelte-ifefql">Accept</button> <button class="btn btn-muted svelte-ifefql">Reject</button></div></div></li>'),li=u('<ul class="list svelte-ifefql"></ul>'),ni=u('<p class="muted svelte-ifefql">No outgoing requests.</p>'),oi=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><span class="muted svelte-ifefql">Pending</span></div></div></li>'),vi=u('<ul class="list svelte-ifefql"></ul>'),di=u('<p class="muted svelte-ifefql"> </p>'),ci=u('<p class="helper-text svelte-ifefql">ðŸ’¡ As an instructor, you can add anyone directly as a buddy</p>'),ui=u('<span class="muted svelte-ifefql">Buddy</span>'),gi=u('<span class="muted svelte-ifefql">Requested</span>'),fi=u('<button class="btn svelte-ifefql">Accept</button>'),pi=u('<button class="btn svelte-ifefql">Add</button>'),bi=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><!></div></div></li>'),mi=u('<!> <ul class="list svelte-ifefql"></ul>',1),Ii=u('<p class="muted svelte-ifefql">Type a name to search for buddies</p>'),_i=u('<div class="grid svelte-ifefql"><section class="svelte-ifefql"><h3 class="svelte-ifefql">My Buddies</h3> <!></section> <section class="svelte-ifefql"><h3 class="svelte-ifefql">Incoming Requests</h3> <!></section> <section class="svelte-ifefql"><h3 class="svelte-ifefql">Outgoing Requests</h3> <!></section> <section class="add-buddies-section svelte-ifefql"><h3 class="svelte-ifefql">Add Buddies</h3> <div class="search-container svelte-ifefql"><input type="text" class="search-input svelte-ifefql" placeholder="Search by name..."/></div> <!></section></div>'),yi=u('<div class="panel svelte-ifefql"><h2 class="panel-title svelte-ifefql">Buddies</h2> <!></div>');function hi(fe,H){dt(H,!1);const r=()=>rt(_t,"$students",U),_=()=>rt(Ke,"$activeStudent",U),[U,h]=Ct(),f=I(),S=I(),b=I(),$=I(),n=I(),o=I(),A=I(),te=I(),V=I(),ae=I();let he=I([]),Y=I(null),G=I("");function j(d){e(Y)&&(e(n)?oa(e(Y).id,d,!0):Ra(e(Y).id,d))}function ge(d){e(Y)&&oa(e(Y).id,d)}function w(d){e(Y)&&za(e(Y).id,d)}function se(d){e(Y)&&Wa(e(Y).id,d)}W(()=>r(),()=>{v(he,r()||[])}),W(()=>_(),()=>{v(Y,_()||null)}),W(()=>e(Y),()=>{v(f,e(Y)?e(Y).friends||[]:[])}),W(()=>e(Y),()=>{v(S,e(Y)?e(Y).friendRequestsIncoming||[]:[])}),W(()=>e(Y),()=>{v(b,e(Y)?e(Y).friendRequestsOutgoing||[]:[])}),W(()=>e(Y),()=>{v($,e(Y)&&Array.isArray(e(Y).roles)?e(Y).roles:[])}),W(()=>e($),()=>{v(n,e($).includes("instructor")||e($).includes("assistant"))}),W(()=>(e(he),e(Y)),()=>{v(o,e(he).filter(d=>d.id!==e(Y)?.id))}),W(()=>(e(he),e(f)),()=>{v(A,e(he).filter(d=>e(f).includes(d.id)))}),W(()=>(e(he),e(S)),()=>{v(te,e(he).filter(d=>e(S).includes(d.id)))}),W(()=>(e(he),e(b)),()=>{v(V,e(he).filter(d=>e(b).includes(d.id)))}),W(()=>(e(G),e(o)),()=>{v(ae,e(G).trim()===""?[]:e(o).filter(d=>{const oe=(d.displayName||d.name||"").toLowerCase(),D=e(G).toLowerCase();return oe.includes(D)}))}),yt(),ut();var y=yi(),Z=s(a(y),2);{var L=d=>{var oe=ei();l(d,oe)},ne=d=>{var oe=_i(),D=a(oe),qe=s(a(D),2);{var Le=X=>{var ee=ti();l(X,ee)},Q=X=>{var ee=si();Ye(ee,5,()=>e(A),Oe,(je,k)=>{var R=ai(),ie=a(R),C=a(ie),ue=a(C,!0);t(C);var ve=s(C,2),we=a(ve),J=a(we,!0);t(we);var T=s(we,2),Ze=a(T,!0);t(T),t(ve);var xe=s(ve,2),be=a(xe);t(xe),t(ie),t(R),N(Ie=>{c(ue,Ie),c(J,(e(k),i(()=>e(k).displayName||e(k).name))),c(Ze,(e(k),i(()=>e(k).rank)))},[()=>(e(k),i(()=>(e(k).displayName||e(k).name).split(" ").map(Ie=>Ie[0]).join("").toUpperCase()))]),z("click",be,()=>se(e(k).id)),l(je,R)}),t(ee),l(X,ee)};x(qe,X=>{e(A),i(()=>e(A).length===0)?X(Le):X(Q,!1)})}t(D);var ce=s(D,2),F=s(a(ce),2);{var pe=X=>{var ee=ii();l(X,ee)},re=X=>{var ee=li();Ye(ee,5,()=>e(te),Oe,(je,k)=>{var R=ri(),ie=a(R),C=a(ie),ue=a(C,!0);t(C);var ve=s(C,2),we=a(ve),J=a(we,!0);t(we);var T=s(we,2),Ze=a(T,!0);t(T),t(ve);var xe=s(ve,2),be=a(xe),Ie=s(be,2);t(xe),t(ie),t(R),N(Be=>{c(ue,Be),c(J,(e(k),i(()=>e(k).displayName||e(k).name))),c(Ze,(e(k),i(()=>e(k).rank)))},[()=>(e(k),i(()=>(e(k).displayName||e(k).name).split(" ").map(Be=>Be[0]).join("").toUpperCase()))]),z("click",be,()=>ge(e(k).id)),z("click",Ie,()=>w(e(k).id)),l(je,R)}),t(ee),l(X,ee)};x(F,X=>{e(te),i(()=>e(te).length===0)?X(pe):X(re,!1)})}t(ce);var le=s(ce,2),ke=s(a(le),2);{var ze=X=>{var ee=ni();l(X,ee)},B=X=>{var ee=vi();Ye(ee,5,()=>e(V),Oe,(je,k)=>{var R=oi(),ie=a(R),C=a(ie),ue=a(C,!0);t(C);var ve=s(C,2),we=a(ve),J=a(we,!0);t(we);var T=s(we,2),Ze=a(T,!0);t(T),t(ve),da(2),t(ie),t(R),N(xe=>{c(ue,xe),c(J,(e(k),i(()=>e(k).displayName||e(k).name))),c(Ze,(e(k),i(()=>e(k).rank)))},[()=>(e(k),i(()=>(e(k).displayName||e(k).name).split(" ").map(xe=>xe[0]).join("").toUpperCase()))]),l(je,R)}),t(ee),l(X,ee)};x(ke,X=>{e(V),i(()=>e(V).length===0)?X(ze):X(B,!1)})}t(le);var M=s(le,2),K=s(a(M),2),P=a(K);Xt(P),t(K);var Se=s(K,2);{var me=X=>{var ee=tt(),je=Re(ee);{var k=ie=>{var C=di(),ue=a(C);t(C),N(()=>c(ue,`No students found matching "${e(G)??""}"`)),l(ie,C)},R=ie=>{var C=mi(),ue=Re(C);{var ve=J=>{var T=ci();l(J,T)};x(ue,J=>{e(n)&&J(ve)})}var we=s(ue,2);Ye(we,5,()=>e(ae),Oe,(J,T)=>{var Ze=bi(),xe=a(Ze),be=a(xe),Ie=a(be,!0);t(be);var Be=s(be,2),We=a(Be),Ce=a(We,!0);t(We);var Me=s(We,2),_e=a(Me,!0);t(Me),t(Be);var Ne=s(Be,2),Xe=a(Ne);{var Pe=Ue=>{var lt=ui();l(Ue,lt)},He=Ue=>{var lt=tt(),Lt=Re(lt);{var Bt=At=>{var St=gi();l(At,St)},Pt=At=>{var St=tt(),Tt=Re(St);{var Wt=p=>{var m=fi();z("click",m,()=>ge(e(T).id)),l(p,m)},zt=p=>{var m=pi();z("click",m,()=>j(e(T).id)),l(p,m)};x(Tt,p=>{e(S),e(T),i(()=>e(S).includes(e(T).id))?p(Wt):p(zt,!1)},!0)}l(At,St)};x(Lt,At=>{e(b),e(T),i(()=>e(b).includes(e(T).id))?At(Bt):At(Pt,!1)},!0)}l(Ue,lt)};x(Xe,Ue=>{e(f),e(T),i(()=>e(f).includes(e(T).id))?Ue(Pe):Ue(He,!1)})}t(Ne),t(xe),t(Ze),N(Ue=>{c(Ie,Ue),c(Ce,(e(T),i(()=>e(T).displayName||e(T).name))),c(_e,(e(T),i(()=>e(T).rank)))},[()=>(e(T),i(()=>(e(T).displayName||e(T).name).split(" ").map(Ue=>Ue[0]).join("").toUpperCase()))]),l(J,Ze)}),t(we),l(ie,C)};x(je,ie=>{e(ae),i(()=>e(ae).length===0)?ie(k):ie(R,!1)})}l(X,ee)},Ge=X=>{var ee=Ii();l(X,ee)};x(Se,X=>{e(G),i(()=>e(G).trim()!=="")?X(me):X(Ge,!1)})}t(M),t(oe),Et(P,()=>e(G),X=>v(G,X)),l(d,oe)};x(Z,d=>{e(Y)?d(ne,!1):d(L)})}t(y),l(fe,y),ct(),h()}var wi=u('<section class="panel svelte-1d2svdd"><!></section>'),Ci=u('<section class="panel svelte-1d2svdd"><!></section>'),Ai=u('<div class="social-root svelte-1d2svdd"><div class="social-toggle svelte-1d2svdd"><button>ðŸ’¬ Messages</button> <button>ðŸ‘¥ Buddies</button></div> <!></div>');function Si(fe){let H=I("messages");var r=Ai(),_=a(r),U=a(_),h=s(U,2);t(_);var f=s(_,2);{var S=$=>{var n=wi(),o=a(n);Qs(o,{}),t(n),l($,n)},b=$=>{var n=Ci(),o=a(n);hi(o,{}),t(n),l($,n)};x(f,$=>{e(H)==="messages"?$(S):$(b,!1)})}t(r),N(()=>{Fe(U,1,`toggle-btn ${e(H)==="messages"?"is-active":""}`,"svelte-1d2svdd"),Fe(h,1,`toggle-btn ${e(H)==="friends"?"is-active":""}`,"svelte-1d2svdd")}),z("click",U,()=>v(H,"messages")),z("click",h,()=>v(H,"friends")),l(fe,r)}const aa="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3clinearGradient%20id='goldGradient'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23ffd700;stop-opacity:1'%20/%3e%3cstop%20offset='50%25'%20style='stop-color:%23ffed4e;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23d4af37;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3cfilter%20id='glow'%3e%3cfeGaussianBlur%20stdDeviation='2'%20result='coloredBlur'/%3e%3cfeMerge%3e%3cfeMergeNode%20in='coloredBlur'/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3c!--%20Main%20star%20shape%20--%3e%3cpath%20d='M32%204%20L37.6%2023.2%20L58%2023.2%20L41.2%2036%20L46.8%2055.2%20L32%2042.4%20L17.2%2055.2%20L22.8%2036%20L6%2023.2%20L26.4%2023.2%20Z'%20fill='url(%23goldGradient)'%20stroke='%23b8860b'%20stroke-width='1.5'%20filter='url(%23glow)'/%3e%3c!--%20Inner%20shine%20lines%20--%3e%3cpath%20d='M32%2012%20L34%2026'%20stroke='%23ffed4e'%20stroke-width='1'%20opacity='0.6'%20stroke-linecap='round'/%3e%3cpath%20d='M38%2018%20L40%2026'%20stroke='%23ffed4e'%20stroke-width='0.8'%20opacity='0.5'%20stroke-linecap='round'/%3e%3cpath%20d='M26%2018%20L24%2026'%20stroke='%23ffed4e'%20stroke-width='0.8'%20opacity='0.5'%20stroke-linecap='round'/%3e%3c/svg%3e",xi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYnJvbnplR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I2NkN2YzMjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNiODczMzM7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzhiNWEyYjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJzaGFkb3ciPgogICAgICA8ZmVEcm9wU2hhZG93IGR4PSIwIiBkeT0iMiIgc3RkRGV2aWF0aW9uPSIzIiBmbG9vZC1vcGFjaXR5PSIwLjUiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIE91dGVyIGNpcmNsZSAobWVkYWwpIC0tPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM2IiBmaWxsPSJ1cmwoI2Jyb256ZUdyYWRpZW50KSIgc3Ryb2tlPSIjNWQzYTFhIiBzdHJva2Utd2lkdGg9IjIiIGZpbHRlcj0idXJsKCNzaGFkb3cpIi8+CiAgCiAgPCEtLSBJbm5lciBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzk2NWEyZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIG9wYWNpdHk9IjAuNiIvPgogIAogIDwhLS0gQ2VudGVyIGVtYmxlbSAtLT4KICA8dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuOSI+QjwvdGV4dD4KICAKICA8IS0tIFNoaW5lIGVmZmVjdCAtLT4KICA8cGF0aCBkPSJNIDI1IDIwIFEgMzAgMjUgMzUgMjAiIHN0cm9rZT0iI2Q0YTU3NCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBvcGFjaXR5PSIwLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K",ki="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ic2lsdmVyR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I2U4ZThlODtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNjMGMwYzA7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I2E4YThhODtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJzaGFkb3ciPgogICAgICA8ZmVEcm9wU2hhZG93IGR4PSIwIiBkeT0iMiIgc3RkRGV2aWF0aW9uPSIzIiBmbG9vZC1vcGFjaXR5PSIwLjUiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIE91dGVyIGNpcmNsZSAobWVkYWwpIC0tPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM2IiBmaWxsPSJ1cmwoI3NpbHZlckdyYWRpZW50KSIgc3Ryb2tlPSIjODA4MDgwIiBzdHJva2Utd2lkdGg9IjIiIGZpbHRlcj0idXJsKCNzaGFkb3cpIi8+CiAgCiAgPCEtLSBJbm5lciBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2QzZDNkMyIgc3Ryb2tlLXdpZHRoPSIxLjUiIG9wYWNpdHk9IjAuOCIvPgogIAogIDwhLS0gQ2VudGVyIGVtYmxlbSAtLT4KICA8dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiM0YTRhNGEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuOSI+UzwvdGV4dD4KICAKICA8IS0tIFNoaW5lIGVmZmVjdCAtLT4KICA8cGF0aCBkPSJNIDIwIDI1IFEgMjUgMjAgMzAgMjUiIHN0cm9rZT0iI2Y1ZjVmNSIgc3Ryb2tlLXdpZHRoPSIyLjUiIGZpbGw9Im5vbmUiIG9wYWNpdHk9IjAuNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTSA1MCAyNSBRIDU1IDIwIDYwIDI1IiBzdHJva2U9IiNmNWY1ZjUiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgb3BhY2l0eT0iMC41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPC9zdmc+Cg==",Zi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZ29sZEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZlZDRlO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNkNGFmMzc7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGZpbHRlciBpZD0ic2hhZG93Ij4KICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjIiIHN0ZERldmlhdGlvbj0iMyIgZmxvb2Qtb3BhY2l0eT0iMC42Ii8+CiAgICA8L2ZpbHRlcj4KICAgIDxmaWx0ZXIgaWQ9Imdsb3ciPgogICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjUiIHJlc3VsdD0iY29sb3JlZEJsdXIiLz4KICAgICAgPGZlTWVyZ2U+CiAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJjb2xvcmVkQmx1ciIvPgogICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyIvPgogICAgICA8L2ZlTWVyZ2U+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+CiAgCiAgPCEtLSBPdXRlciBjaXJjbGUgKG1lZGFsKSAtLT4KICA8Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSIzNiIgZmlsbD0idXJsKCNnb2xkR3JhZGllbnQpIiBzdHJva2U9IiNiODg2MGIiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI3NoYWRvdykiLz4KICAKICA8IS0tIElubmVyIGNpcmNsZSAtLT4KICA8Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSIzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZlNTVjIiBzdHJva2Utd2lkdGg9IjEuNSIgb3BhY2l0eT0iMC42Ii8+CiAgCiAgPCEtLSBDZW50ZXIgZW1ibGVtIC0tPgogIDx0ZXh0IHg9IjQwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjMyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzhiNjkxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgb3BhY2l0eT0iMC45IiBmaWx0ZXI9InVybCgjZ2xvdykiPkc8L3RleHQ+CiAgCiAgPCEtLSBTaGluZSBlZmZlY3RzIC0tPgogIDxwYXRoIGQ9Ik0gMjIgMjggUSAyNyAyMiAzMiAyOCIgc3Ryb2tlPSIjZmZmOWM0IiBzdHJva2Utd2lkdGg9IjIuNSIgZmlsbD0ibm9uZSIgb3BhY2l0eT0iMC44IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNIDQ4IDI4IFEgNTMgMjIgNTggMjgiIHN0cm9rZT0iI2ZmZjljNCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBvcGFjaXR5PSIwLjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxjaXJjbGUgY3g9IjI4IiBjeT0iMzUiIHI9IjIiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuNiIvPgo8L3N2Zz4K",Ni="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZGlhbW9uZEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlMGY3ZmY7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMzAlIiBzdHlsZT0ic3RvcC1jb2xvcjojYjlmM2ZjO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjcwJSIgc3R5bGU9InN0b3AtY29sb3I6IzdkZDNmYztzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMzhiZGY4O3N0b3Atb3BhY2l0eToxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0ic3BhcmtsZSIgY3g9IjUwJSIgY3k9IjUwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjAuOSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojYjlmM2ZjO3N0b3Atb3BhY2l0eTowIiAvPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICAgIDxmaWx0ZXIgaWQ9InNoYWRvdyI+CiAgICAgIDxmZURyb3BTaGFkb3cgZHg9IjAiIGR5PSIyIiBzdGREZXZpYXRpb249IjMiIGZsb29kLW9wYWNpdHk9IjAuNSIvPgogICAgPC9maWx0ZXI+CiAgICA8ZmlsdGVyIGlkPSJnbG93Ij4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMiIgcmVzdWx0PSJjb2xvcmVkQmx1ciIvPgogICAgICA8ZmVNZXJnZT4KICAgICAgICA8ZmVNZXJnZU5vZGUgaW49ImNvbG9yZWRCbHVyIi8+CiAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+CiAgICAgIDwvZmVNZXJnZT4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIE91dGVyIGNpcmNsZSAobWVkYWwpIC0tPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM2IiBmaWxsPSJ1cmwoI2RpYW1vbmRHcmFkaWVudCkiIHN0cm9rZT0iIzAyODRjNyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWx0ZXI9InVybCgjc2hhZG93KSIvPgogIAogIDwhLS0gSW5uZXIgc3BhcmtsZSBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZjdmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIG9wYWNpdHk9IjAuNyIvPgogIAogIDwhLS0gRGlhbW9uZCBzaGFwZSBpbiBjZW50ZXIgLS0+CiAgPHBhdGggZD0iTSA0MCAyMCBMIDUwIDMyIEwgNDAgNDQgTCAzMCAzMiBaIiBmaWxsPSJ1cmwoI3NwYXJrbGUpIiBzdHJva2U9IiMwMjg0YzciIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIwLjgiLz4KICAKICA8IS0tIENlbnRlciBlbWJsZW0gLS0+CiAgPHRleHQgeD0iNDAiIHk9IjUyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMGM0YTZlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBvcGFjaXR5PSIwLjkiIGZpbHRlcj0idXJsKCNnbG93KSI+RDwvdGV4dD4KICAKICA8IS0tIFNwYXJrbGUgZWZmZWN0cyAtLT4KICA8Y2lyY2xlIGN4PSIyNSIgY3k9IjMwIiByPSIyLjUiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOSIvPgogIDxjaXJjbGUgY3g9IjU1IiBjeT0iMzUiIHI9IjIiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOCIvPgogIDxjaXJjbGUgY3g9IjMyIiBjeT0iNTIiIHI9IjEuNSIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC43Ii8+CiAgPHBhdGggZD0iTSAyMCAyNCBMIDIyIDI2IE0gMjIgMjQgTCAyMCAyNiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIgb3BhY2l0eT0iMC44IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNIDU4IDQ4IEwgNjAgNTAgTSA2MCA0OCBMIDU4IDUwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIwLjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K";var Mi=u("<button> </button>"),Di=u('<div class="badge-medal-svg svelte-1gbwom4"><img class="badge-icon svelte-1gbwom4"/></div>'),Gi=u('<div class="badge-medal svelte-1gbwom4"> </div>'),ji=u('<p class="badge-description svelte-1gbwom4"> </p>'),Bi=u('<p class="badge-date svelte-1gbwom4"> </p>'),Pi=u('<div class="badge-item svelte-1gbwom4" role="button" tabindex="0"><!> <div class="badge-content svelte-1gbwom4"><h3 class="badge-name svelte-1gbwom4"> </h3> <!> <!></div></div>'),$i=u('<div class="badges-grid svelte-1gbwom4"></div>'),qi=u('<div class="empty-state svelte-1gbwom4"><p> </p></div>'),Li=u('<div class="achievements-filters svelte-1gbwom4"><button> </button> <!></div> <!>',1),Ti=u('<p class="star-description svelte-1gbwom4"> </p>'),Wi=u('<p class="star-date svelte-1gbwom4"> </p>'),zi=u('<div class="star-item svelte-1gbwom4" role="button" tabindex="0"><div class="star-icon svelte-1gbwom4"><img alt="Gold Star" class="star-svg svelte-1gbwom4"/></div> <div class="star-content svelte-1gbwom4"><h3 class="star-name svelte-1gbwom4"> </h3> <!> <!></div></div>'),Ri=u('<div class="stars-grid svelte-1gbwom4"></div>'),Hi=u('<div class="empty-state svelte-1gbwom4"><p>No Gold Stars yet! Participate in studio events to earn them.</p></div>'),Yi=u('<div class="modal-badge-icon-svg svelte-1gbwom4"><img class="modal-badge-svg svelte-1gbwom4"/></div>'),Ui=u('<div class="modal-badge-icon svelte-1gbwom4"> </div>'),Ji=u('<p class="modal-achievement-description svelte-1gbwom4"> </p>'),Vi=u('<div class="modal-achievement-meta svelte-1gbwom4"><strong class="svelte-1gbwom4">Earned:</strong> </div>'),Fi=u('<div class="modal-achievement-criteria svelte-1gbwom4"><strong class="svelte-1gbwom4">Criteria:</strong> <p class="svelte-1gbwom4"> </p></div>'),Xi=u('<div class="modal-achievement svelte-1gbwom4"><!> <h3 class="modal-achievement-title svelte-1gbwom4"> </h3> <div class="modal-achievement-level svelte-1gbwom4"> </div> <!> <!> <!></div>'),Ei=u('<p class="modal-achievement-description svelte-1gbwom4"> </p>'),Ki=u('<div class="modal-achievement-meta svelte-1gbwom4"><strong class="svelte-1gbwom4">Earned:</strong> </div>'),Oi=u('<div class="modal-achievement-meta svelte-1gbwom4"><strong class="svelte-1gbwom4">Location:</strong> </div>'),Qi=u('<div class="modal-achievement-notes svelte-1gbwom4"><strong class="svelte-1gbwom4">Notes:</strong> <p class="svelte-1gbwom4"> </p></div>'),er=u('<div class="modal-achievement svelte-1gbwom4"><div class="modal-star-icon svelte-1gbwom4"><img alt="Gold Star" class="modal-star-svg svelte-1gbwom4"/></div> <h3 class="modal-achievement-title svelte-1gbwom4"> </h3> <!> <!> <!> <!></div>'),tr=u('<section class="achievements-root svelte-1gbwom4"><header class="achievements-header svelte-1gbwom4"><h2 class="svelte-1gbwom4">Achievements</h2> <p class="achievements-subtitle svelte-1gbwom4">Badges, gold stars, and milestones</p> <div class="achievements-funstrip svelte-1gbwom4"><div class="fun-chip svelte-1gbwom4"><div class="fun-label svelte-1gbwom4">Badges</div><div class="fun-value svelte-1gbwom4"> </div></div> <div class="fun-chip svelte-1gbwom4"><div class="fun-label svelte-1gbwom4">Gold Stars</div><div class="fun-value svelte-1gbwom4"> </div></div> <div class="fun-chip svelte-1gbwom4"><div class="fun-label svelte-1gbwom4">Recent</div><div class="fun-value svelte-1gbwom4"> </div></div></div></header> <div class="section-tabs svelte-1gbwom4"><button> </button> <button><img alt="" class="tab-icon svelte-1gbwom4"/> </button></div> <!></section> <!>',1);function ar(fe,H){dt(H,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,U]=Ct(),h=I();let f=I([]),S=I([]),b=I("all"),$=I("badges"),n=I(!1),o=I(null),A=I("badge");function te(M){if(!M)return"#64748b";const K=M.toLowerCase();return K==="bronze"?"#b87d3b":K==="silver"?"#c0c0c0":K==="gold"?"#ffd700":K==="diamond"?"#b9f3fc":"#a8a29e"}function V(M){if(!M)return null;const K=M.toLowerCase();return K==="bronze"?xi:K==="silver"?ki:K==="gold"?Zi:K==="diamond"?Ni:null}function ae(M){v(o,M),v(A,"badge"),v(n,!0)}function he(M){v(o,M),v(A,"goldStar"),v(n,!0)}function Y(){v(n,!1),v(o,null)}W(()=>r(),()=>{r()&&(v(f,Array.isArray(r().badges)?r().badges:[]),v(S,Array.isArray(r().goldStars)?r().goldStars:[]))}),W(()=>(e(b),e(f)),()=>{v(h,e(b)==="all"?e(f):e(f).filter(M=>(M.level||"").toLowerCase()===e(b).toLowerCase()))}),yt(),ut();var G=tr(),j=Re(G),ge=a(j),w=s(a(ge),4),se=a(w),y=s(a(se)),Z=a(y,!0);t(y),t(se);var L=s(se,2),ne=s(a(L)),d=a(ne,!0);t(ne),t(L);var oe=s(L,2),D=s(a(oe)),qe=a(D,!0);t(D),t(oe),t(w),t(ge);var Le=s(ge,2),Q=a(Le),ce=a(Q);t(Q);var F=s(Q,2),pe=a(F),re=s(pe);t(F),t(Le);var le=s(Le,2);{var ke=M=>{var K=Li(),P=Re(K),Se=a(P),me=a(Se);t(Se);var Ge=s(Se,2);Ye(Ge,0,()=>["Bronze","Silver","Gold","Diamond"],Oe,(k,R)=>{const ie=qt(()=>(e(f),i(()=>e(f).filter(ve=>(ve.level||"").toLowerCase()===R.toLowerCase()).length)));var C=Mi(),ue=a(C);t(C),N(()=>{Fe(C,1,`filter-btn ${e(b)===R?"is-active":""}`,"svelte-1gbwom4"),c(ue,`${R??""} (${e(ie)??""})`)}),z("click",C,()=>v(b,R)),l(k,C)}),t(P);var X=s(P,2);{var ee=k=>{var R=$i();Ye(R,5,()=>e(h),ie=>ie.name,(ie,C)=>{var ue=Pi(),ve=a(ue);{var we=Ce=>{var Me=Di(),_e=a(Me);t(Me),N(Ne=>{pt(_e,"src",Ne),pt(_e,"alt",(e(C),i(()=>`${e(C).level} badge`)))},[()=>(e(C),i(()=>V(e(C).level)))]),l(Ce,Me)},J=Ce=>{var Me=Gi(),_e=a(Me,!0);t(Me),N((Ne,Xe)=>{bt(Me,Ne),c(_e,Xe)},[()=>(e(C),i(()=>`background: ${te(e(C).level)}`)),()=>(e(C),i(()=>(e(C).level||"?").charAt(0).toUpperCase()))]),l(Ce,Me)};x(ve,Ce=>{e(C),i(()=>V(e(C).level))?Ce(we):Ce(J,!1)})}var T=s(ve,2),Ze=a(T),xe=a(Ze,!0);t(Ze);var be=s(Ze,2);{var Ie=Ce=>{var Me=ji(),_e=a(Me,!0);t(Me),N(()=>c(_e,(e(C),i(()=>e(C).description)))),l(Ce,Me)};x(be,Ce=>{e(C),i(()=>e(C).description)&&Ce(Ie)})}var Be=s(be,2);{var We=Ce=>{var Me=Bi(),_e=a(Me);t(Me),N(Ne=>c(_e,`Earned ${Ne??""}`),[()=>(e(C),i(()=>new Date(e(C).earnedDate).toLocaleDateString()))]),l(Ce,Me)};x(Be,Ce=>{e(C),i(()=>e(C).earnedDate)&&Ce(We)})}t(T),t(ue),N(()=>c(xe,(e(C),i(()=>e(C).name)))),z("click",ue,()=>ae(e(C))),z("keydown",ue,Ce=>Ce.key==="Enter"&&ae(e(C))),l(ie,ue)}),t(R),l(k,R)},je=k=>{var R=qi(),ie=a(R),C=a(ie);t(ie),t(R),N(()=>c(C,`No ${e(b)==="all"?"achievements":e(b)+" badges"} yet. Keep training!`)),l(k,R)};x(X,k=>{e(h),i(()=>e(h).length)?k(ee):k(je,!1)})}N(()=>{Fe(Se,1,`filter-btn ${e(b)==="all"?"is-active":""}`,"svelte-1gbwom4"),c(me,`All (${e(f),i(()=>e(f).length)??""})`)}),z("click",Se,()=>v(b,"all")),l(M,K)},ze=M=>{var K=tt(),P=Re(K);{var Se=me=>{var Ge=tt(),X=Re(Ge);{var ee=k=>{var R=Ri();Ye(R,5,()=>e(S),Oe,(ie,C)=>{var ue=zi(),ve=a(ue),we=a(ve);t(ve);var J=s(ve,2),T=a(J),Ze=a(T,!0);t(T);var xe=s(T,2);{var be=We=>{var Ce=Ti(),Me=a(Ce,!0);t(Ce),N(()=>c(Me,(e(C),i(()=>e(C).description)))),l(We,Ce)};x(xe,We=>{e(C),i(()=>e(C).description)&&We(be)})}var Ie=s(xe,2);{var Be=We=>{var Ce=Wi(),Me=a(Ce);t(Ce),N(_e=>c(Me,`Earned ${_e??""}`),[()=>(e(C),i(()=>new Date(e(C).earnedDate).toLocaleDateString()))]),l(We,Ce)};x(Ie,We=>{e(C),i(()=>e(C).earnedDate)&&We(Be)})}t(J),t(ue),N(()=>{pt(we,"src",aa),c(Ze,(e(C),i(()=>e(C).event)))}),z("click",ue,()=>he(e(C))),z("keydown",ue,We=>We.key==="Enter"&&he(e(C))),l(ie,ue)}),t(R),l(k,R)},je=k=>{var R=Hi();l(k,R)};x(X,k=>{e(S),i(()=>e(S).length)?k(ee):k(je,!1)})}l(me,Ge)};x(P,me=>{e($)==="goldStars"&&me(Se)},!0)}l(M,K)};x(le,M=>{e($)==="badges"?M(ke):M(ze,!1)})}t(j);var B=s(j,2);{let M=qt(()=>e(A)==="badge"?"Badge Details":"Gold Star Details");ta(B,{get open(){return e(n)},get title(){return e(M)},onClose:Y,children:(K,P)=>{var Se=tt(),me=Re(Se);{var Ge=X=>{var ee=tt(),je=Re(ee);{var k=ie=>{var C=Xi(),ue=a(C);{var ve=_e=>{var Ne=Yi(),Xe=a(Ne);t(Ne),N(Pe=>{pt(Xe,"src",Pe),pt(Xe,"alt",(e(o),i(()=>`${e(o).level} badge`)))},[()=>(e(o),i(()=>V(e(o).level)))]),l(_e,Ne)},we=_e=>{var Ne=Ui(),Xe=a(Ne,!0);t(Ne),N((Pe,He)=>{bt(Ne,Pe),c(Xe,He)},[()=>(e(o),i(()=>`background: ${te(e(o).level)}`)),()=>(e(o),i(()=>(e(o).level||"?").charAt(0).toUpperCase()))]),l(_e,Ne)};x(ue,_e=>{e(o),i(()=>V(e(o).level))?_e(ve):_e(we,!1)})}var J=s(ue,2),T=a(J,!0);t(J);var Ze=s(J,2),xe=a(Ze);t(Ze);var be=s(Ze,2);{var Ie=_e=>{var Ne=Ji(),Xe=a(Ne,!0);t(Ne),N(()=>c(Xe,(e(o),i(()=>e(o).description)))),l(_e,Ne)};x(be,_e=>{e(o),i(()=>e(o).description)&&_e(Ie)})}var Be=s(be,2);{var We=_e=>{var Ne=Vi(),Xe=s(a(Ne));t(Ne),N(Pe=>c(Xe,` ${Pe??""}`),[()=>(e(o),i(()=>new Date(e(o).earnedDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})))]),l(_e,Ne)};x(Be,_e=>{e(o),i(()=>e(o).earnedDate)&&_e(We)})}var Ce=s(Be,2);{var Me=_e=>{var Ne=Fi(),Xe=s(a(Ne),2),Pe=a(Xe,!0);t(Xe),t(Ne),N(()=>c(Pe,(e(o),i(()=>e(o).criteria)))),l(_e,Ne)};x(Ce,_e=>{e(o),i(()=>e(o).criteria)&&_e(Me)})}t(C),N(_e=>{c(T,(e(o),i(()=>e(o).name))),bt(Ze,_e),c(xe,`${e(o),i(()=>e(o).level||"Unknown")??""} Level`)},[()=>(e(o),i(()=>`color: ${te(e(o).level)}`))]),l(ie,C)},R=ie=>{var C=tt(),ue=Re(C);{var ve=we=>{var J=er(),T=a(J),Ze=a(T);t(T);var xe=s(T,2),be=a(xe,!0);t(xe);var Ie=s(xe,2);{var Be=Pe=>{var He=Ei(),Ue=a(He,!0);t(He),N(()=>c(Ue,(e(o),i(()=>e(o).description)))),l(Pe,He)};x(Ie,Pe=>{e(o),i(()=>e(o).description)&&Pe(Be)})}var We=s(Ie,2);{var Ce=Pe=>{var He=Ki(),Ue=s(a(He));t(He),N(lt=>c(Ue,` ${lt??""}`),[()=>(e(o),i(()=>new Date(e(o).earnedDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})))]),l(Pe,He)};x(We,Pe=>{e(o),i(()=>e(o).earnedDate)&&Pe(Ce)})}var Me=s(We,2);{var _e=Pe=>{var He=Oi(),Ue=s(a(He));t(He),N(()=>c(Ue,` ${e(o),i(()=>e(o).location)??""}`)),l(Pe,He)};x(Me,Pe=>{e(o),i(()=>e(o).location)&&Pe(_e)})}var Ne=s(Me,2);{var Xe=Pe=>{var He=Qi(),Ue=s(a(He),2),lt=a(Ue,!0);t(Ue),t(He),N(()=>c(lt,(e(o),i(()=>e(o).notes)))),l(Pe,He)};x(Ne,Pe=>{e(o),i(()=>e(o).notes)&&Pe(Xe)})}t(J),N(()=>{pt(Ze,"src",aa),c(be,(e(o),i(()=>e(o).event)))}),l(we,J)};x(ue,we=>{e(A)==="goldStar"&&we(ve)},!0)}l(ie,C)};x(je,ie=>{e(A)==="badge"?ie(k):ie(R,!1)})}l(X,ee)};x(me,X=>{e(o)&&X(Ge)})}l(K,Se)},$$slots:{default:!0}})}N(M=>{c(Z,(e(f),i(()=>e(f).length))),c(d,(e(S),i(()=>e(S).length))),c(qe,M),Fe(Q,1,`section-tab ${e($)==="badges"?"is-active":""}`,"svelte-1gbwom4"),c(ce,`Badges (${e(f),i(()=>e(f).length)??""})`),Fe(F,1,`section-tab ${e($)==="goldStars"?"is-active":""}`,"svelte-1gbwom4"),pt(pe,"src",aa),c(re,` Gold Stars (${e(S),i(()=>e(S).length)??""})`)},[()=>(e(f),e(S),i(()=>[...e(f),...e(S)].slice(-5).length))]),z("click",Q,()=>v($,"badges")),z("click",F,()=>v($,"goldStars")),l(fe,G),ct(),U()}var sr=u("<div></div>"),ir=u('<div class="session-modal svelte-e0lysx"><div class="session-header svelte-e0lysx"><div class="step-label svelte-e0lysx"> </div> <div class="timer svelte-e0lysx"><button class="btn btn-small svelte-e0lysx"> </button> <span class="time-val"> </span></div></div> <div class="heatbar svelte-e0lysx"></div> <div class="session-controls svelte-e0lysx"><button class="btn svelte-e0lysx"> </button></div></div>');function rr(fe,H){dt(H,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,U]=Ct(),h=I(),f=I();let S=It(H,"open",8,!1),b=It(H,"item",12,null),$=It(H,"onClose",8,()=>{}),n=I(0),o=I(0),A=I(!1),te;function V(){v(A,!e(A)),e(A)?te=setInterval(()=>{v(o,e(o)+1)},1e3):te&&clearInterval(te)}function ae(){if(!b())return;v(n,Math.min(e(h),e(n)+1)),b(b().progress=e(n),!0);const j=r();if(j&&Array.isArray(j.practiceItems)){const ge=j.practiceItems.findIndex(w=>w.name===b().name);if(ge!==-1&&(j.practiceItems[ge]={...b()},Ke.set({...j}),typeof window<"u"))try{const w=JSON.parse(localStorage.getItem("studentsData")||"[]"),se=w.findIndex(y=>y.id===j.id);se!==-1&&(w[se]=j,localStorage.setItem("studentsData",JSON.stringify(w)))}catch{}}}W(()=>Ve(b()),()=>{v(h,b()?.steps||8)}),W(()=>Ve(b()),()=>{v(n,b()&&b().progress||0)}),W(()=>(Ve(b()),e(n),e(h)),()=>{v(f,b()&&Array.isArray(b().stepLabels)&&b().stepLabels[e(n)-1]?b().stepLabels[e(n)-1]:`Step ${e(n)} of ${e(h)}`)}),yt(),ut();var he=tt(),Y=Re(he);{var G=j=>{{let ge=qt(()=>(Ve(b()),i(()=>b().name||"Training Session")));ta(j,{get title(){return e(ge)},get onClose(){return $()},children:(w,se)=>{var y=ir(),Z=a(y),L=a(Z),ne=a(L,!0);t(L);var d=s(L,2),oe=a(d),D=a(oe);t(oe);var qe=s(oe,2),Le=a(qe);t(qe),t(d),t(Z);var Q=s(Z,2);Ye(Q,5,()=>(e(h),i(()=>Array.from({length:e(h)}))),Oe,(re,le,ke)=>{var ze=sr();N(B=>{Fe(ze,1,`heat-seg ${ke<e(n)?"is-filled":""}`,"svelte-e0lysx"),bt(ze,B)},[()=>(e(h),i(()=>`--h:${Math.round(0+120*(ke/Math.max(1,e(h)-1)))}`))]),l(re,ze)}),t(Q);var ce=s(Q,2),F=a(ce),pe=a(F,!0);t(F),t(ce),t(y),N((re,le)=>{c(ne,e(f)),c(D,`${e(A)?"Pause":"Start"} Timer`),c(Le,`${re??""}:${le??""}`),F.disabled=e(n)>=e(h),c(pe,e(n)>=e(h)?"Completed":"Next Step")},[()=>(e(o),i(()=>String(Math.floor(e(o)/60)).padStart(2,"0"))),()=>(e(o),i(()=>String(e(o)%60).padStart(2,"0")))]),z("click",oe,V),z("click",F,ae),l(w,y)},$$slots:{default:!0}})}};x(Y,j=>{S()&&b()&&j(G)})}l(fe,he),ct(),U()}var lr=u("<div></div>"),nr=u('<article class="launcher-card svelte-1glgro6"><div class="launcher-title svelte-1glgro6"> </div> <div class="launcher-heatbar svelte-1glgro6"></div> <button type="button" class="start-btn svelte-1glgro6">Start</button></article>'),or=u('<div class="launcher-grid svelte-1glgro6"></div>'),vr=u('<p class="empty-msg svelte-1glgro6">No practice items set yet. Ask your instructor for recommendations.</p>'),dr=u('<div class="day-date svelte-1glgro6"> </div>'),cr=u("<span> </span>"),ur=u("<span> </span>"),gr=u('<article class="schedule-item svelte-1glgro6"><div class="schedule-day svelte-1glgro6"><div class="day-name svelte-1glgro6"> </div> <!></div> <div class="schedule-info svelte-1glgro6"><h4 class="class-name svelte-1glgro6"> </h4> <p class="class-meta svelte-1glgro6"><!> <!></p></div> <div class="schedule-time svelte-1glgro6"><span class="time-badge svelte-1glgro6"> </span></div></article>'),fr=u('<div class="schedule-list svelte-1glgro6"></div>'),pr=u('<p class="empty-msg svelte-1glgro6">No classes scheduled this week</p>'),br=u("<span> </span>"),mr=u('<span class="notes svelte-1glgro6"> </span>'),Ir=u('<article class="history-item svelte-1glgro6"><div class="history-date svelte-1glgro6"> </div> <div class="history-info svelte-1glgro6"><h4 class="history-name svelte-1glgro6"> </h4> <p class="history-meta svelte-1glgro6"><!> <!></p></div></article>'),_r=u('<div class="history-list svelte-1glgro6"></div>'),yr=u('<p class="empty-msg svelte-1glgro6">No class history yet</p>'),hr=u('<section class="training-root svelte-1glgro6"><header class="training-header svelte-1glgro6"><h2 class="svelte-1glgro6">Training</h2> <p class="training-subtitle svelte-1glgro6">Your class schedule and training history</p></header> <div class="training-content svelte-1glgro6"><div class="training-funstrip svelte-1glgro6"><div class="fun-chip svelte-1glgro6"><div class="fun-label svelte-1glgro6">Forms Mastered</div><div class="fun-value svelte-1glgro6"> </div></div> <div class="fun-chip svelte-1glgro6"><div class="fun-label svelte-1glgro6">Classes This Month</div><div class="fun-value svelte-1glgro6"> </div></div> <div class="fun-chip svelte-1glgro6"><div class="fun-label svelte-1glgro6">Practice Days</div><div class="fun-value svelte-1glgro6"> </div></div></div> <div class="training-section svelte-1glgro6"><h3 class="section-title svelte-1glgro6">Session Launcher</h3> <!></div> <div class="training-section svelte-1glgro6"><h3 class="section-title svelte-1glgro6">Your Classes This Week</h3> <!></div> <div class="training-section svelte-1glgro6"><h3 class="section-title svelte-1glgro6">Recent Classes</h3> <!></div></div></section> <!>',1);function wr(fe,H){dt(H,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,U]=Ct();let h=I([]),f=I([]);function S(B){return B?new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function b(B){return B||""}function $(B){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][B]||""}let n=I(!1),o=I(null);function A(B){v(o,B),v(n,!0)}function te(){v(n,!1),v(o,null)}W(()=>r(),()=>{r()&&(v(h,Array.isArray(r().schedule)?r().schedule:[]),v(f,Array.isArray(r().classHistory)?r().classHistory:[]))}),yt(),ut();var V=hr(),ae=Re(V),he=s(a(ae),2),Y=a(he),G=a(Y),j=s(a(G)),ge=a(j,!0);t(j),t(G);var w=s(G,2),se=s(a(w)),y=a(se,!0);t(se),t(w);var Z=s(w,2),L=s(a(Z)),ne=a(L,!0);t(L),t(Z),t(Y);var d=s(Y,2),oe=s(a(d),2);{var D=B=>{var M=or();Ye(M,5,()=>(r(),i(()=>r().practiceItems.slice(0,6))),Oe,(K,P)=>{var Se=nr(),me=a(Se),Ge=a(me,!0);t(me);var X=s(me,2);Ye(X,5,()=>(e(P),i(()=>Array.from({length:e(P).steps||8}))),Oe,(je,k,R)=>{var ie=lr();N(C=>{Fe(ie,1,(e(P),i(()=>`heat-seg ${R<(e(P).progress||0)?"is-filled":""}`)),"svelte-1glgro6"),bt(ie,C)},[()=>(e(P),i(()=>`--h:${Math.round(0+120*(R/Math.max(1,(e(P).steps||8)-1)))}`))]),l(je,ie)}),t(X);var ee=s(X,2);t(Se),N(()=>c(Ge,(e(P),i(()=>e(P).name||"Practice Item")))),z("click",ee,()=>A(e(P))),l(K,Se)}),t(M),l(B,M)},qe=B=>{var M=vr();l(B,M)};x(oe,B=>{r(),i(()=>Array.isArray(r()?.practiceItems)&&r().practiceItems.length)?B(D):B(qe,!1)})}t(d);var Le=s(d,2),Q=s(a(Le),2);{var ce=B=>{var M=fr();Ye(M,5,()=>e(h),K=>K.id||K.dayOfWeek,(K,P)=>{var Se=gr(),me=a(Se),Ge=a(me),X=a(Ge,!0);t(Ge);var ee=s(Ge,2);{var je=be=>{var Ie=dr(),Be=a(Ie,!0);t(Ie),N(We=>c(Be,We),[()=>(e(P),i(()=>S(e(P).date)))]),l(be,Ie)};x(ee,be=>{e(P),i(()=>e(P).date)&&be(je)})}t(me);var k=s(me,2),R=a(k),ie=a(R,!0);t(R);var C=s(R,2),ue=a(C);{var ve=be=>{var Ie=cr(),Be=a(Ie);t(Ie),N(()=>c(Be,`Instructor: ${e(P),i(()=>e(P).instructor)??""}`)),l(be,Ie)};x(ue,be=>{e(P),i(()=>e(P).instructor)&&be(ve)})}var we=s(ue,2);{var J=be=>{var Ie=ur(),Be=a(Ie);t(Ie),N(()=>c(Be,`â€¢ ${e(P),i(()=>e(P).location)??""}`)),l(be,Ie)};x(we,be=>{e(P),i(()=>e(P).location)&&be(J)})}t(C),t(k);var T=s(k,2),Ze=a(T),xe=a(Ze,!0);t(Ze),t(T),t(Se),N((be,Ie)=>{c(X,be),c(ie,(e(P),i(()=>e(P).name||"Class"))),c(xe,Ie)},[()=>(e(P),i(()=>$(e(P).dayOfWeek))),()=>(e(P),i(()=>b(e(P).time)))]),l(K,Se)}),t(M),l(B,M)},F=B=>{var M=pr();l(B,M)};x(Q,B=>{e(h),i(()=>e(h).length)?B(ce):B(F,!1)})}t(Le);var pe=s(Le,2),re=s(a(pe),2);{var le=B=>{var M=_r();Ye(M,5,()=>(e(f),i(()=>e(f).slice(0,10))),K=>K.date+K.name,(K,P)=>{var Se=Ir(),me=a(Se),Ge=a(me,!0);t(me);var X=s(me,2),ee=a(X),je=a(ee,!0);t(ee);var k=s(ee,2),R=a(k);{var ie=ve=>{var we=br(),J=a(we,!0);t(we),N(()=>c(J,(e(P),i(()=>e(P).instructor)))),l(ve,we)};x(R,ve=>{e(P),i(()=>e(P).instructor)&&ve(ie)})}var C=s(R,2);{var ue=ve=>{var we=mr(),J=a(we);t(we),N(()=>c(J,`â€¢ ${e(P),i(()=>e(P).notes)??""}`)),l(ve,we)};x(C,ve=>{e(P),i(()=>e(P).notes)&&ve(ue)})}t(k),t(X),t(Se),N(ve=>{c(Ge,ve),c(je,(e(P),i(()=>e(P).name||"Class")))},[()=>(e(P),i(()=>S(e(P).date)))]),l(K,Se)}),t(M),l(B,M)},ke=B=>{var M=yr();l(B,M)};x(re,B=>{e(f),i(()=>e(f).length)?B(le):B(ke,!1)})}t(pe),t(he),t(ae);var ze=s(ae,2);rr(ze,{get open(){return e(n)},get item(){return e(o)},onClose:te}),N(B=>{c(ge,(r(),i(()=>r()?.funStats?.formsMastered??0))),c(y,B),c(ne,(r(),i(()=>r()?.funStats?.practiceDays??0)))},[()=>(r(),i(()=>(r()?.attendanceDates||[]).filter(B=>{const M=new Date(B),K=new Date;return!isNaN(M)&&M.getMonth()===K.getMonth()&&M.getFullYear()===K.getFullYear()}).length))]),l(fe,V),ct(),U()}const ca=wa({open:!1,article:null});function Cr(fe){ca.set({open:!0,article:fe})}function sa(){ca.set({open:!1,article:null})}var Ar=u('<div class="news-modal-backdrop svelte-rr5ax4" tabindex="-1"><article class="news-modal svelte-rr5ax4" role="dialog" aria-modal="true"><div class="news-modal-content svelte-rr5ax4"><header class="news-modal-header svelte-rr5ax4"><h2 class="news-modal-title svelte-rr5ax4"> </h2> <button class="news-modal-close svelte-rr5ax4" aria-label="Close">&times;</button></header> <div class="news-modal-body svelte-rr5ax4"><div class="news-modal-tag svelte-rr5ax4"> </div> <p class="news-modal-date svelte-rr5ax4"> </p> <div class="news-modal-text svelte-rr5ax4"><!></div></div> <footer class="news-modal-meta svelte-rr5ax4"><span> </span> <span> </span></footer></div></article></div>');function Sr(fe,H){dt(H,!1);let r=I(!1),_=I(null);const U=ca.subscribe(n=>{v(r,n.open),v(_,n.article),e(r)?document.body.classList.add("news-modal-open"):document.body.classList.remove("news-modal-open")});va(()=>{U(),document.body.classList.remove("news-modal-open")});function h(n){n.target===n.currentTarget&&sa()}function f(n){n.key==="Escape"&&sa()}ut();var S=tt(),b=Re(S);{var $=n=>{var o=Ar(),A=a(o),te=a(A),V=a(te),ae=a(V),he=a(ae,!0);t(ae);var Y=s(ae,2);t(V);var G=s(V,2),j=a(G),ge=a(j,!0);t(j);var w=s(j,2),se=a(w,!0);t(w);var y=s(w,2),Z=a(y);Aa(Z,()=>e(_)?.fullText||e(_)?.summary||"No content available."),t(y),t(G);var L=s(G,2),ne=a(L),d=a(ne);t(ne);var oe=s(ne,2),D=a(oe);t(oe),t(L),t(te),t(A),t(o),N(()=>{c(he,e(_)?.title||"News Article"),c(ge,e(_)?.tag||"General"),c(se,e(_)?.date||"Recent"),c(d,`Category: ${(e(_)?.tag||"General")??""}`),c(D,`Published: ${(e(_)?.date||"Recent")??""}`)}),z("click",Y,function(...qe){sa?.apply(this,qe)}),z("click",o,h),z("keydown",o,f),l(n,o)};x(b,n=>{e(r)&&n($)})}l(fe,S),ct()}var xr=u('<p class="featured-summary svelte-1az0nwd"> </p>'),kr=u('<div class="featured-banner svelte-1az0nwd"><div class="featured-content svelte-1az0nwd"><div class="featured-eyebrow svelte-1az0nwd">Featured</div> <h3 class="featured-title svelte-1az0nwd"> </h3> <div class="featured-meta svelte-1az0nwd"><span class="tag"> </span> â€¢ <span class="date"> </span></div> <!> <div><button class="featured-btn svelte-1az0nwd">Read More</button></div></div></div>'),Zr=u('<li class="news-item"><button class="news-link svelte-1az0nwd"><strong> </strong> <div class="news-meta svelte-1az0nwd"><span class="tag"> </span> <span class="date"> </span></div> <div class="news-summary svelte-1az0nwd"> </div></button></li>'),Nr=u('<ul class="news-list svelte-1az0nwd"></ul>'),Mr=u("<p>No news at the moment.</p>"),Dr=u('<section class="news-root svelte-1az0nwd"><header class="svelte-1az0nwd"><h2 class="svelte-1az0nwd">News</h2> <div class="news-funstrip svelte-1az0nwd"><div class="fun-chip svelte-1az0nwd"><div class="fun-label svelte-1az0nwd">New This Week</div><div class="fun-value svelte-1az0nwd"> </div></div> <div class="fun-chip svelte-1az0nwd"><div class="fun-label svelte-1az0nwd">This Month</div><div class="fun-value svelte-1az0nwd"> </div></div> <div class="fun-chip svelte-1az0nwd"><div class="fun-label svelte-1az0nwd">Total</div><div class="fun-value svelte-1az0nwd"> </div></div></div></header> <div class="news-body"><!> <div class="news-filters svelte-1az0nwd"><button>All</button> <button>Announcements</button> <button>Events</button> <button>Tips</button></div> <!></div> <!></section>');function Gr(fe,H){dt(H,!1);const r=I(),_=I();let U=I([]);const h=Ha.subscribe(Q=>v(U,Q||[]));let f=I("all");function S(Q){Cr(Q)}va(()=>h()),W(()=>(e(f),e(U)),()=>{v(r,e(f)==="all"?e(U):e(U).filter(Q=>(Q.tag||"").toLowerCase()===e(f).toLowerCase()))}),W(()=>e(U),()=>{v(_,(()=>{if(!Array.isArray(e(U))||e(U).length===0)return null;const Q=e(U).find(F=>F.featured===!0);return Q||[...e(U)].sort((F,pe)=>new Date(pe.date)-new Date(F.date))[0]||null})())}),yt(),ut();var b=Dr(),$=a(b),n=s(a($),2),o=a(n),A=s(a(o)),te=a(A,!0);t(A),t(o);var V=s(o,2),ae=s(a(V)),he=a(ae,!0);t(ae),t(V);var Y=s(V,2),G=s(a(Y)),j=a(G,!0);t(G),t(Y),t(n),t($);var ge=s($,2),w=a(ge);{var se=Q=>{var ce=kr(),F=a(ce),pe=s(a(F),2),re=a(pe,!0);t(pe);var le=s(pe,2),ke=a(le),ze=a(ke,!0);t(ke);var B=s(ke,2),M=a(B,!0);t(B),t(le);var K=s(le,2);{var P=Ge=>{var X=xr(),ee=a(X,!0);t(X),N(()=>c(ee,(e(_),i(()=>e(_).summary)))),l(Ge,X)};x(K,Ge=>{e(_),i(()=>e(_).summary)&&Ge(P)})}var Se=s(K,2),me=a(Se);t(Se),t(F),t(ce),N(()=>{c(re,(e(_),i(()=>e(_).title))),c(ze,(e(_),i(()=>e(_).tag))),c(M,(e(_),i(()=>e(_).date)))}),z("click",me,()=>S(e(_))),l(Q,ce)};x(w,Q=>{e(_)&&Q(se)})}var y=s(w,2),Z=a(y),L=s(Z,2),ne=s(L,2),d=s(ne,2);t(y);var oe=s(y,2);{var D=Q=>{var ce=Nr();Ye(ce,5,()=>e(r),Oe,(F,pe)=>{var re=Zr(),le=a(re),ke=a(le),ze=a(ke,!0);t(ke);var B=s(ke,2),M=a(B),K=a(M,!0);t(M);var P=s(M,2),Se=a(P,!0);t(P),t(B);var me=s(B,2),Ge=a(me,!0);t(me),t(le),t(re),N(()=>{c(ze,(e(pe),i(()=>e(pe).title))),c(K,(e(pe),i(()=>e(pe).tag))),c(Se,(e(pe),i(()=>e(pe).date))),c(Ge,(e(pe),i(()=>e(pe).summary)))}),z("click",le,()=>S(e(pe))),l(F,re)}),t(ce),l(Q,ce)},qe=Q=>{var ce=Mr();l(Q,ce)};x(oe,Q=>{e(r),i(()=>e(r).length)?Q(D):Q(qe,!1)})}t(ge);var Le=s(ge,2);Sr(Le,{}),t(b),N((Q,ce)=>{c(te,Q),c(he,ce),c(j,(e(U),i(()=>e(U).length))),Fe(Z,1,`tag-chip ${e(f)==="all"?"is-active":""}`,"svelte-1az0nwd"),Fe(L,1,`tag-chip ${e(f)==="Announcements"?"is-active":""}`,"svelte-1az0nwd"),Fe(ne,1,`tag-chip ${e(f)==="Events"?"is-active":""}`,"svelte-1az0nwd"),Fe(d,1,`tag-chip ${e(f)==="Tips"?"is-active":""}`,"svelte-1az0nwd")},[()=>(e(U),i(()=>e(U).filter(Q=>{const ce=new Date(Q.date),pe=(new Date-ce)/(1e3*60*60*24);return!isNaN(ce)&&pe<=7}).length)),()=>(e(U),i(()=>e(U).filter(Q=>{const ce=new Date(Q.date),F=new Date;return!isNaN(ce)&&ce.getMonth()===F.getMonth()&&ce.getFullYear()===F.getFullYear()}).length))]),z("click",Z,()=>v(f,"all")),z("click",L,()=>v(f,"Announcements")),z("click",ne,()=>v(f,"Events")),z("click",d,()=>v(f,"Tips")),l(fe,b),ct()}var jr=u('<div class="dashboard-root svelte-lztlh0" style="margin-top: 80px;"><!> <!> <div class="hub-content svelte-lztlh0"><!></div></div>');function Br(fe,H){dt(H,!1);const r=()=>rt(_t,"$students",U),_=()=>rt(ea,"$activeTab",U),[U,h]=Ct(),f=I();Ca(()=>{(!e(f)||e(f).length===0)&&Ya().catch(V=>console.error("Failed to load students:",V))}),W(()=>r(),()=>{v(f,r()||[])}),yt(),ut();var S=jr(),b=a(S);as(b,{});var $=s(b,2);rs($,{});var n=s($,2),o=a(n);{var A=V=>{Ms(V,{})},te=V=>{var ae=tt(),he=Re(ae);{var Y=j=>{Si(j)},G=j=>{var ge=tt(),w=Re(ge);{var se=Z=>{ar(Z,{})},y=Z=>{var L=tt(),ne=Re(L);{var d=D=>{wr(D,{})},oe=D=>{Gr(D,{})};x(ne,D=>{_()==="training"?D(d):D(oe,!1)},!0)}l(Z,L)};x(w,Z=>{_()==="achievements"?Z(se):Z(y,!1)},!0)}l(j,ge)};x(he,j=>{_()==="messages"?j(Y):j(G,!1)},!0)}l(V,ae)};x(o,V=>{_()==="status"?V(A):V(te,!1)})}t(n),t(S),l(fe,S),ct(),h()}function Vr(fe){Br(fe,{})}export{Vr as component};
