import{b as va,d as Ca,f as u,a as l,c as tt}from"../chunks/D93hUDEI.js";import{i as dt}from"../chunks/BznYoFRY.js";import{G as Z,h as da,b as ca,n as Aa,b4 as Sa,i as ua,C as xa,e as ka,aj as Za,ad as Na,f as Ma,g as Et,au as Da,p as ct,b1 as T,b2 as yt,F as Re,a as ut,A as e,I as s,J as a,aH as v,at as I,K as t,x as i,Q as Ia,b5 as sa,B as Ve,ap as qt,b6 as ra,o as _a,a3 as la,b3 as Ga}from"../chunks/DcTAzX_I.js";import{i as S,s as Ct,a as rt,p as It,c as Kt,b as ja}from"../chunks/B944SqXc.js";import{s as c}from"../chunks/hnOH0-N2.js";import{e as z}from"../chunks/BpqMFE6l.js";import{d as Ke,a as Fe,c as pt,s as _t,r as Vt,e as ga,f as Ba,g as ia,h as Ot,i as Pa,j as $a,k as qa,m as La,n as Wa,l as Ta}from"../chunks/B0dv8mGB.js";import{s as bt,e as Ye,i as Oe,b as Ft,T as za}from"../chunks/Ijujpeek.js";import{g as Ra}from"../chunks/DA6Kvlk3.js";import{_ as fa}from"../chunks/PPVm8Dsz.js";import{s as Ha}from"../chunks/BEVcHbxz.js";import{h as Ya}from"../chunks/gIq7qoZ1.js";function ya(be,U,r=!1,_=!1,X=!1){var N=be,p="";Z(()=>{var A=Aa;if(p===(p=U()??"")){da&&ca();return}if(A.nodes_start!==null&&(Sa(A.nodes_start,A.nodes_end),A.nodes_start=A.nodes_end=null),p!==""){if(da){ua.data;for(var b=ca(),$=b;b!==null&&(b.nodeType!==xa||b.data!=="");)$=b,b=ka(b);if(b===null)throw Za(),Na;va(ua,$),N=Ma(b);return}var n=p+"";r?n=`<svg>${n}</svg>`:_&&(n=`<math>${n}</math>`);var o=Ca(n);if((r||_)&&(o=Et(o)),va(Et(o),o.lastChild),r||_)for(;Et(o);)N.before(Et(o));else N.before(o)}})}function pa(be){return function(...U){var r=U[0];return r.stopPropagation(),be?.apply(this,U)}}function ba(be,U){var r=be.$$events?.[U.type],_=Da(r)?r.slice():r==null?[]:[r];for(var X of _)X.call(this,U)}var Ua=u('<span class="pill role-pill instructor-pill svelte-1kexf3p">Instructor</span>'),Ja=u('<span class="pill role-pill assistant-pill svelte-1kexf3p">Asst Instructor</span>'),Va=u('<span class="pill role-pill helper-pill svelte-1kexf3p">Helper</span>'),Fa=u('<div class="role-row svelte-1kexf3p"><!> <!> <!></div>'),Xa=u('<div class="profile-details svelte-1kexf3p"><div class="profile-info svelte-1kexf3p"><div class="profile-name svelte-1kexf3p"> </div> <div class="profile-meta-row svelte-1kexf3p"><span class="pill belt-pill svelte-1kexf3p"> </span> <span class="pill is3-pill svelte-1kexf3p"> </span></div> <!></div></div>'),Ea=u('<button><div class="avatar-large svelte-1kexf3p"> </div> <!></button>'),Ka=u('<div class="floating-controls svelte-1kexf3p" aria-label="Logout control"><button class="logout-btn svelte-1kexf3p" type="button"><span class="logout-icon svelte-1kexf3p"><svg class="logout-icon-svg svelte-1kexf3p" viewBox="0 0 24 24"><line x1="12" y1="4" x2="12" y2="11"></line><path d="M8.5 6.75a6 6 0 1 0 7 0"></path></svg></span> Logout</button></div> <!>',1);function Oa(be,U){ct(U,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,X]=Ct(),N=I(),p=I(),A=I(),b=I(),$=I(),n=I(),o=I();let C=I(!1);function te(){Ke.set(null),localStorage.removeItem("tkStudentSession"),Ra("/login")}function J(){v(C,!e(C))}function ae(k){if(!k||typeof k!="string")return"#64748b";const L=k.toLowerCase();return L.includes("white")?"#e5e7eb":L.includes("yellow")?"#facc15":L.includes("orange")?"#fb923c":L.includes("green")?"#22c55e":L.includes("blue")?"#3b82f6":L.includes("purple")?"#a855f7":L.includes("red")?"#ef4444":L.includes("brown")?"#92400e":L.includes("black")||L.includes("degree")?"#020617":"#64748b"}function he(k){if(!k||typeof k!="string")return"#ffffff";const L=k.toLowerCase();return L.includes("white")||L.includes("yellow")||L.includes("orange")?"#0f172a":"#ffffff"}function H(k){return k?k.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Dr\.?|Miss|Master)\s+/i,"").trim().split(" ").map(ne=>ne[0]||"").join("").toUpperCase():""}function G(k){return k?k>=12?"#5f2a88":k>=9?"#3e3370":k>=6?"#3b4f7a":(k>=3,"#56679a"):"#56679a"}T(()=>r(),()=>{v(N,r())}),T(()=>e(N),()=>{v(p,H(e(N)?.name||e(N)?.displayName||""))}),T(()=>e(N),()=>{v(A,e(N)?.is3Level??0)}),T(()=>e(N),()=>{v(b,Array.isArray(e(N)?.roles)?e(N).roles:[])}),T(()=>e(b),()=>{v($,e(b).includes("instructor"))}),T(()=>e(b),()=>{v(n,e(b).includes("assistant"))}),T(()=>e(b),()=>{v(o,e(b).includes("helper"))}),yt(),dt();var j=Ka(),ge=Re(j),h=a(ge);t(ge);var se=s(ge,2);{var y=k=>{var L=Ea(),ne=a(L),d=a(ne,!0);t(ne);var oe=s(ne,2);{var D=qe=>{var Le=Xa(),Q=a(Le),ce=a(Q),V=a(ce,!0);t(ce);var fe=s(ce,2),re=a(fe),le=a(re,!0);t(re);var ke=s(re,2),ze=a(ke);t(ke),t(fe);var B=s(fe,2);{var M=K=>{var P=Fa(),Se=a(P);{var me=x=>{var R=Ua();l(x,R)};S(Se,x=>{e($)&&x(me)})}var Ge=s(Se,2);{var F=x=>{var R=Ja();l(x,R)};S(Ge,x=>{e(n)&&x(F)})}var ee=s(Ge,2);{var je=x=>{var R=Va();l(x,R)};S(ee,x=>{e(o)&&x(je)})}t(P),l(K,P)};S(B,K=>{(e($)||e(n)||e(o))&&K(M)})}t(Q),t(Le),Z((K,P)=>{c(V,(e(N),i(()=>e(N).displayName||e(N).name))),bt(re,K),c(le,(e(N),i(()=>e(N).rank))),bt(ke,P),c(ze,`IS3 L${e(A)??""}`)},[()=>(e(N),i(()=>`background:${ae(e(N).rank)}; color:${he(e(N).rank)}`)),()=>(e(A),i(()=>`background:${G(e(A))}`))]),l(qe,Le)};S(oe,qe=>{e(C)&&qe(D)})}t(L),Z(qe=>{Fe(L,1,`profile-card ${e(C)?"expanded":"collapsed"}`,"svelte-1kexf3p"),bt(L,qe),c(d,e(p))},[()=>(e(N),e(A),i(()=>`--belt:${ae(e(N).rank)}; --is3:${G(e(A))};`))]),z("click",L,J),z("mouseenter",L,()=>v(C,!0)),z("mouseleave",L,()=>v(C,!1)),l(k,L)};S(se,k=>{e(N)&&k(y)})}z("click",h,te),l(be,j),ut(),X()}const Qt=Ia("status"),ma=Object.freeze(Object.defineProperty({__proto__:null,activeTab:Qt},Symbol.toStringTag,{value:"Module"}));var Qa=u('<button><svg class="floating-tab-icon svelte-yjh58o" aria-hidden="true"><!></svg> <span class="floating-tab-label"> </span></button>'),es=u('<div class="floating-tab-bar svelte-yjh58o"></div>');function ts(be,U){ct(U,!1);const r=()=>rt(Qt,"$activeTab",_),[_,X]=Ct(),N=I(),p=[{id:"status",label:"STATUS",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="5"/><circle cx="12" cy="12" r="1.5"/>',inactiveColor:"#1e3a58",activeColor:"#2563a3"},{id:"messages",label:"SOCIAL",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>',inactiveColor:"#113c32",activeColor:"#1d795b"},{id:"achievements",label:"ACHIEVEMENTS",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0",inner:'<path d="M12 2l2.39 6.91L21 9.24l-5 3.63L17.39 21 12 17.27 6.61 21 8 12.88 3 9.24l6.61-0.33L12 2z"/>',inactiveColor:"#4f472c",activeColor:"#7f6f41"},{id:"training",label:"TRAINING",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<rect x="2" y="9" width="4" height="6" rx="1"/><rect x="18" y="9" width="4" height="6" rx="1"/><path d="M6 12h12"/>',inactiveColor:"#3c2c63",activeColor:"#5e45a3"},{id:"news",label:"NEWS",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",inner:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/>',inactiveColor:"#512730",activeColor:"#8b3a3a"}];function A($){Qt.set($)}T(()=>r(),()=>{v(N,r())}),yt(),dt();var b=es();Ye(b,5,()=>p,Oe,($,n)=>{var o=Qa(),C=a(o),te=a(C);ya(te,()=>(e(n),i(()=>e(n).inner)),!0),t(C);var J=s(C,2),ae=a(J,!0);t(J),t(o),Z(()=>{Fe(o,1,(e(N),e(n),i(()=>`floating-tab-btn ${e(N)===e(n).id?"is-active":""}`)),"svelte-yjh58o"),bt(o,(e(n),i(()=>`--tab-bg:${e(n).inactiveColor}; --tab-bg-active:${e(n).activeColor};`))),pt(C,"viewBox",(e(n),i(()=>e(n).viewBox))),pt(C,"fill",(e(n),i(()=>e(n).fill))),pt(C,"stroke",(e(n),i(()=>e(n).stroke))),pt(C,"stroke-width",(e(n),i(()=>e(n).strokeWidth))),c(ae,(e(n),i(()=>e(n).label)))}),z("click",o,()=>A(e(n).id)),l($,o)}),t(b),l(be,b),ut(),X()}var as=u('<p class="muted svelte-1blbebk">Select a student to view their feed.</p>'),ss=u('<p class="muted svelte-1blbebk">Add buddies to see promotions and stripe progress here.</p>'),is=u('<span class="ready svelte-1blbebk">Ready for next stripe!</span>'),rs=u('<span class="progress svelte-1blbebk"> </span>'),ls=u('<span class="divider svelte-1blbebk">â€¢</span> <span class="last"> </span>',1),ns=u('<div class="comment svelte-1blbebk"><strong> </strong> </div>'),os=u('<div class="comments svelte-1blbebk"></div>'),vs=u('<li class="feed-item svelte-1blbebk"><div class="left"><div class="avatar svelte-1blbebk"> </div></div> <div class="mid"><div class="title svelte-1blbebk"><strong> </strong> Â· <span class="rank svelte-1blbebk"> </span></div> <div class="sub svelte-1blbebk"><!> <!></div> <div class="bar svelte-1blbebk"><div class="bar-fill svelte-1blbebk"></div></div> <div class="interactions svelte-1blbebk"><button title="Fist bump!"> </button> <input class="comment-input svelte-1blbebk" type="text" placeholder="Add a comment..."/></div> <!></div> <div class="right"><span class="chip svelte-1blbebk"> </span></div></li>'),ds=u('<ul class="feed svelte-1blbebk"></ul>'),cs=u('<div class="panel svelte-1blbebk"><h2 class="panel-title svelte-1blbebk">Activity Feed</h2> <!></div>');function us(be,U){ct(U,!1);const r=()=>rt(_t,"$students",X),_=()=>rt(Ke,"$activeStudent",X),[X,N]=Ct(),p=I(),A=I(),b=I();let $=I([]),n=I(null),o=I({});function C(h){return h?h.classesPerStripe&&h.classesPerStripe>0?h.classesPerStripe:(h.rank||"").toLowerCase().includes("brown")?12:8:0}function te(h){const se=C(h),y=h?.classesSinceStripe||0;return se-y}function J(h){if(!h)return null;const se=new Date(h);return isNaN(se.getTime())?null:Math.floor((Date.now()-se.getTime())/864e5)}function ae(h){e(n)&&ga(h,e(n).id,"fistBump")}function he(h){if(!e(n))return;const se=e(o)[h];!se||!se.trim()||(ga(h,e(n).id,"comment",se.trim()),sa(o,e(o)[h]=""))}T(()=>r(),()=>{v($,r()||[])}),T(()=>_(),()=>{v(n,_()||null)}),T(()=>e(n),()=>{v(p,e(n)?e(n).friends||[]:[])}),T(()=>(e($),e(p)),()=>{v(A,e($).filter(h=>e(p).includes(h.id)))}),T(()=>(e(A),e(n)),()=>{v(b,e(A).map(h=>{const se=te(h),y=J(h.lastClassDate),k=Array.isArray(h.feedInteractions)?h.feedInteractions:[],L=k.filter(oe=>oe.type==="fistBump"),ne=k.filter(oe=>oe.type==="comment"),d=L.some(oe=>oe.actorId===e(n)?.id);return{id:h.id,name:h.displayName||h.name,rank:h.rank,remaining:se,lastClassDays:y,classesPerStripe:C(h),fistBumpCount:L.length,myFistBump:d,comments:ne}}))}),yt(),dt();var H=cs(),G=s(a(H),2);{var j=h=>{var se=as();l(h,se)},ge=h=>{var se=tt(),y=Re(se);{var k=ne=>{var d=ss();l(ne,d)},L=ne=>{var d=ds();Ye(d,5,()=>e(b),Oe,(oe,D)=>{var qe=vs(),Le=a(qe),Q=a(Le),ce=a(Q,!0);t(Q),t(Le);var V=s(Le,2),fe=a(V),re=a(fe),le=a(re,!0);t(re);var ke=s(re,2),ze=a(ke,!0);t(ke),t(fe);var B=s(fe,2),M=a(B);{var K=Y=>{var W=is();l(Y,W)},P=Y=>{var W=rs(),Ze=a(W);t(W),Z(()=>c(Ze,`${e(D),i(()=>e(D).remaining)??""} classes until next stripe`)),l(Y,W)};S(M,Y=>{e(D),i(()=>e(D).remaining<=0)?Y(K):Y(P,!1)})}var Se=s(M,2);{var me=Y=>{var W=ls(),Ze=s(Re(W),2),xe=a(Ze);t(Ze),Z(()=>c(xe,`Last class: ${e(D),i(()=>e(D).lastClassDays===0?"Today":`${e(D).lastClassDays}d ago`)??""}`)),l(Y,W)};S(Se,Y=>{e(D),i(()=>e(D).lastClassDays!==null)&&Y(me)})}t(B);var Ge=s(B,2),F=a(Ge);t(Ge);var ee=s(Ge,2),je=a(ee),x=a(je);t(je);var R=s(je,2);Vt(R),t(ee);var ie=s(ee,2);{var w=Y=>{var W=os();Ye(W,5,()=>(e(D),i(()=>e(D).comments)),Oe,(Ze,xe)=>{const pe=qt(()=>(e($),e(xe),i(()=>e($).find(Me=>Me.id===e(xe).actorId))));var Ie=ns(),Be=a(Ie),Te=a(Be);t(Be);var Ce=s(Be);t(Ie),Z(()=>{c(Te,`${Ve(e(pe)),i(()=>e(pe)?.displayName||e(pe)?.name||"Unknown")??""}:`),c(Ce,` ${e(xe),i(()=>e(xe).text)??""}`)}),l(Ze,Ie)}),t(W),l(Y,W)};S(ie,Y=>{e(D),i(()=>e(D).comments.length)&&Y(w)})}t(V);var ue=s(V,2),ve=a(ue),we=a(ve);t(ve),t(ue),t(qe),Z((Y,W,Ze)=>{c(ce,Y),c(le,(e(D),i(()=>e(D).name))),c(ze,(e(D),i(()=>e(D).rank))),bt(F,W),Fe(je,1,(e(D),i(()=>`fb-btn ${e(D).myFistBump?"active":""}`)),"svelte-1blbebk"),c(x,`ðŸ‘Š ${e(D),i(()=>e(D).fistBumpCount||"")??""}`),c(we,`${Ze??""} / ${e(D),i(()=>e(D).classesPerStripe)??""}`)},[()=>(e(D),i(()=>e(D).name.split(" ").map(Y=>Y[0]).join("").toUpperCase())),()=>(e(D),i(()=>`width:${Math.min(100,Math.max(0,(e(D).classesPerStripe-e(D).remaining)/e(D).classesPerStripe*100))}%`)),()=>(e(D),i(()=>e(D).classesPerStripe-Math.max(0,e(D).remaining)))]),z("click",je,()=>ae(e(D).id)),Ft(R,()=>e(o)[e(D).id],Y=>sa(o,e(o)[e(D).id]=Y)),z("keydown",R,Y=>Y.key==="Enter"&&he(e(D).id)),l(oe,qe)}),t(d),l(ne,d)};S(y,ne=>{e(b),i(()=>e(b).length===0)?ne(k):ne(L,!1)},!0)}l(h,se)};S(G,h=>{e(n)?h(ge,!1):h(j)})}t(H),l(be,H),ut(),N()}var gs=u('<div class="birthday-callout"> </div>'),fs=u('<div class="kpi-item kpi-progress svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Next Stripe</div> <div class="kpi-value svelte-a1y6eq"> </div> <div class="kpi-sub svelte-a1y6eq"> </div></div>'),ps=u("<div></div>"),bs=u('<section class="panel status-progress-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Stripe Progress</h3> <div class="heatbar svelte-a1y6eq" aria-label="Stripe progress heatbar"></div> <p class="status-progress-text svelte-a1y6eq"> </p> <div class="status-progress-meta svelte-a1y6eq"><div class="svelte-a1y6eq"><span class="meta-label svelte-a1y6eq">Classes since stripe</span><span class="meta-value svelte-a1y6eq"> </span></div> <div class="svelte-a1y6eq"><span class="meta-label svelte-a1y6eq">Per stripe</span><span class="meta-value svelte-a1y6eq"> </span></div></div></section>'),ms=u('<div class="event-summary svelte-a1y6eq"> </div>'),Is=u('<div class="event-card svelte-a1y6eq"><div class="event-title svelte-a1y6eq"> </div> <div class="event-meta svelte-a1y6eq"> </div> <!></div>'),_s=u('<p class="muted svelte-a1y6eq">No upcoming events listed.</p>'),ys=u('<p class="badge-description svelte-a1y6eq"> </p>'),hs=u('<article class="badge-card svelte-a1y6eq"><div class="badge-medal svelte-a1y6eq"> </div> <div class="badge-body svelte-a1y6eq"><div class="badge-name svelte-a1y6eq"> </div> <!></div></article>'),ws=u('<div class="status-achievements-row svelte-a1y6eq"></div>'),Cs=u('<p class="muted svelte-a1y6eq">No achievements yetâ€¦ but your next class could unlock one!</p>'),As=u("<div></div>"),Ss=u('<section class="status-root svelte-a1y6eq"><!> <header class="status-header svelte-a1y6eq"><span class="eyebrow svelte-a1y6eq">Student Portal</span> <h2 class="svelte-a1y6eq">Status Dashboard</h2></header> <!> <div class="kpi-row svelte-a1y6eq"><!> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Classes This Month</div> <div class="kpi-value svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Total Classes</div> <div class="kpi-value svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Unread Messages</div> <div class="kpi-value svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Badges Earned</div> <div class="kpi-value svelte-a1y6eq"> </div> <div class="kpi-sub svelte-a1y6eq"> </div></div> <div class="kpi-item svelte-a1y6eq"><div class="kpi-label svelte-a1y6eq">Days Since Last Class</div> <div class="kpi-value svelte-a1y6eq"> </div></div></div> <div class="status-panels svelte-a1y6eq"><section class="panel quick-actions-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Quick Actions</h3> <div class="actions-grid compact svelte-a1y6eq"><button class="qa-btn svelte-a1y6eq" type="button">View Profile</button> <button class="qa-btn svelte-a1y6eq" type="button">Open Social</button> <button class="qa-btn svelte-a1y6eq" type="button">Start Training</button></div></section> <!> <section class="panel goals-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Goals</h3> <div class="status-quick-grid svelte-a1y6eq"><article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Training Goals</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Practice Items</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip status-strip--highlight svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Assignments Due</span><span class="status-strip-value svelte-a1y6eq"> </span></article></div></section> <section class="panel records-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Personal Records</h3> <div class="status-quick-grid svelte-a1y6eq"><article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Current Rank</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Total Classes</span><span class="status-strip-value svelte-a1y6eq"> </span></article> <article class="status-strip svelte-a1y6eq"><span class="status-strip-label svelte-a1y6eq">Member Since</span><span class="status-strip-value svelte-a1y6eq"> </span></article></div></section></div> <div class="status-bottom-panels svelte-a1y6eq"><section class="panel status-hud-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Upcoming Events</h3> <div class="events-grid svelte-a1y6eq"><!></div></section> <section class="panel achievements-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Achievements</h3> <!></section> <section class="panel attendance-panel svelte-a1y6eq"><h3 class="panel-title svelte-a1y6eq">Attendance (Last 30 days)</h3> <div class="attendance-heatmap svelte-a1y6eq"></div> <div class="attendance-legend svelte-a1y6eq"><span class="legend-dot present svelte-a1y6eq"></span> Present â€¢ <span class="legend-dot svelte-a1y6eq"></span> Absent</div></section></div> <!></section>');function xs(be,U){ct(U,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,X]=Ct(),N=I(),p=I(),A=I(),b=I(),$=I(),n=I(),o=I(),C=I(),te=I(),J=I(),ae=I(),he=I(),H=I(),G=I(),j=I(),ge=I(),h=I(),se=I(),y=I(),k=I(),L=I(),ne=I();let d=I(null);function oe(g){if(!g)return 0;const q=(g.rank||"").toLowerCase().includes("black")||(g.rank||"").toLowerCase().includes("degree");if(g.rankType==="degree"||q){const O=g.yearsRequired||1,E=g.yearsAtRank||0;return O===0?0:Math.min(100,Math.max(0,E/O*100))}else{let O=g.classesPerStripe;(!O||O<=0)&&(O=(g.rank||"").toLowerCase().includes("brown")?12:8);let E=g.classesSinceStripe||0;try{if(g.beltSince&&Array.isArray(g.attendanceDates)){const de=new Date(g.beltSince);isNaN(de.getTime())||(E=g.attendanceDates.filter(it=>{const vt=new Date(it);return!isNaN(vt.getTime())&&vt>=de}).length%O)}}catch{}return O===0?0:Math.min(100,Math.max(0,E/O*100))}}function D(g){if(!g)return"";const q=(g.rank||"").toLowerCase().includes("black")||(g.rank||"").toLowerCase().includes("degree");if(g.rankType==="degree"||q){const O=g.yearsRequired||1,E=g.yearsAtRank||0,de=(O-E).toFixed(1);return de<=0?"Eligible for next degree review":`${de} years until next degree`}else{let O=g.classesPerStripe;(!O||O<=0)&&(O=(g.rank||"").toLowerCase().includes("brown")?12:8);let E=g.classesSinceStripe||0;try{if(g.beltSince&&Array.isArray(g.attendanceDates)){const We=new Date(g.beltSince);isNaN(We.getTime())||(E=g.attendanceDates.filter(vt=>{const ft=new Date(vt);return!isNaN(ft.getTime())&&ft>=We}).length%O)}}catch{}const de=O-E;return de<=0?"Ready for next stripe!":`${de} classes until next stripe`}}function qe(g){if(!g||typeof g!="string")return"#64748b";const q=g.toLowerCase();return q.includes("white")?"#e5e7eb":q.includes("yellow")?"#facc15":q.includes("orange")?"#fb923c":q.includes("green")?"#22c55e":q.includes("blue")?"#3b82f6":q.includes("purple")?"#a855f7":q.includes("red")?"#ef4444":q.includes("brown")?"#92400e":q.includes("black")||q.includes("degree")?"#020617":"#64748b"}function Le(g){return g?g>=12?"#5f2a88":g>=9?"#3e3370":g>=6?"#3b4f7a":(g>=4,"#56679a"):"#56679a"}function Q(g){return g?g>=12?"diamond":g>=9?"gold":g>=6?"silver":g>=3?"bronze":null:null}function ce(g){switch(g){case"bronze":return'<svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="#cd7f32" stroke="#8b4e1e" stroke-width="2"/></svg>';case"silver":return'<svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="#c0c0c0" stroke="#7a7a7a" stroke-width="2"/></svg>';case"gold":return'<svg viewBox="0 0 24 24" width="20" height="20"><circle cx="12" cy="12" r="10" fill="#ffd700" stroke="#b08b00" stroke-width="2"/></svg>';case"diamond":return'<svg viewBox="0 0 24 24" width="20" height="20"><path d="M12 2 L20 9 L12 22 L4 9 Z" fill="#ffffff"/></svg>';default:return""}}let V=I({});const fe=Ba.subscribe(g=>{v(V,g||{})});ra(()=>{try{fe()}catch{}});function re(g){return g===null?"Unknown":g===0?"Today":`${g}d`}let le=I(!1),ke=I(!1);function ze(g){if(!g)return console.log("Birthday check: no dateString provided"),!1;try{const q=new Date,O=g.split("-");if(O.length!==3)return console.error("Invalid date format:",g),!1;const E=parseInt(O[1],10)-1,de=parseInt(O[2],10);console.log("Birthday check:",{dateString:g,today:q.toISOString(),todayMonth:q.getMonth(),todayDate:q.getDate(),birthdayMonth:E,birthdayDay:de});const We=q.getMonth()===E&&q.getDate()===de;return console.log("Birthday match result:",We),We}catch(q){return console.error("Birthday parse error:",q),!1}}function B(){if(console.log("triggerConfetti called"),typeof window>"u"){console.log("Window undefined, skipping confetti");return}const g=document.getElementById("fx-root");if(!g){console.warn("fx-root not found for confetti");return}console.log("Creating confetti animation..."),g.innerHTML="";const q=["#facc15","#38bdf8","#22c55e","#ef4444","#a855f7","#fb923c"];for(let O=0;O<60;O++){const E=document.createElement("div");E.className="confetti-piece",E.style.position="absolute",E.style.borderRadius="50%",E.style.pointerEvents="none";const de=Math.random()*100;E.style.left=de+"%",E.style.top="-20px";const We=8+Math.random()*8;E.style.width=We+"px",E.style.height=We+"px",E.style.background=q[Math.floor(Math.random()*q.length)];const it=Math.random()*500,vt=2e3+Math.random()*2e3,ft=de+(Math.random()-.5)*40,Gt=Math.random()*720-360;E.style.animation=`confettiFall ${vt}ms ease-out ${it}ms forwards`,E.style.setProperty("--end-x",ft+"%"),E.style.setProperty("--rotation",Gt+"deg"),g.appendChild(E),setTimeout(()=>E.remove(),vt+it+100)}console.log("Confetti created: 60 pieces")}_a(()=>{}),T(()=>r(),()=>{v(d,r())}),T(()=>e(d),()=>{v(N,oe(e(d)))}),T(()=>e(d),()=>{v(p,D(e(d)))}),T(()=>e(d),()=>{v(A,e(d)?e(d).classesPerStripe&&e(d).classesPerStripe>0?e(d).classesPerStripe:(e(d).rank||"").toLowerCase().includes("brown")?12:8:0)}),T(()=>(e(d),e(A)),()=>{v(b,(()=>{if(!e(d))return 0;let g=e(d).classesSinceStripe||0;try{if(e(d).beltSince&&Array.isArray(e(d).attendanceDates)){const q=new Date(e(d).beltSince);isNaN(q.getTime())||(g=e(d).attendanceDates.filter(E=>{const de=new Date(E);return!isNaN(de.getTime())&&de>=q}).length%e(A))}}catch{}return g})())}),T(()=>e(d),()=>{v($,(e(d)?.displayName||e(d)?.name||"").split(" ").map(g=>g[0]||"").join("").toUpperCase())}),T(()=>e(d),()=>{v(n,e(d)?.roles?.includes("instructor"))}),T(()=>e(d),()=>{v(o,e(d)?.roles?.includes("assistant"))}),T(()=>(e(n),e(o)),()=>{v(C,e(n)?"Instructor":e(o)?"Assistant Instructor":"Student")}),T(()=>e(d),()=>{v(te,e(d)?.is3Level??0)}),T(()=>e(te),()=>{v(J,Q(e(te)))}),T(()=>e(J),()=>{v(ae,e(J)?ce(e(J)):"")}),T(()=>e(te),()=>{v(he,Le(e(te)))}),T(()=>e(d),()=>{v(H,qe(e(d)?.rank))}),T(()=>e(d),()=>{v(G,Array.isArray(e(d)?.badges)?e(d).badges:[])}),T(()=>e(d),()=>{v(j,Array.isArray(e(d)?.messages)?e(d).messages.filter(g=>g.toId===e(d).id&&!g.read).length:0)}),T(()=>e(G),()=>{v(ge,e(G).length)}),T(()=>e(G),()=>{v(h,e(G).reduce((g,q)=>{const O=q.level||"Unknown";return g[O]=(g[O]||0)+1,g},{}))}),T(()=>e(d),()=>{v(se,Array.isArray(e(d)?.assignments)?e(d).assignments.filter(g=>g.due).length:0)}),T(()=>e(d),()=>{v(y,Array.isArray(e(d)?.practice)?e(d).practice.length:0)}),T(()=>e(d),()=>{v(k,(()=>{if(!e(d)?.lastClassDate)return null;const g=new Date(e(d).lastClassDate);return isNaN(g.getTime())?null:Math.floor((Date.now()-g.getTime())/864e5)})())}),T(()=>(e(d),e(ke)),()=>{e(d)&&!e(ke)&&(console.log("Checking birthday for student:",e(d).name,e(d).birthday),ze(e(d).birthday)?(v(le,!0),v(ke,!0),setTimeout(()=>B(),300)):v(le,!1))}),T(()=>(e(V),e(d)),()=>{v(L,new Set((e(V).attendanceDates||e(d)?.attendanceDates||[]).map(g=>(g||"").toString().slice(0,10))))}),T(()=>e(L),()=>{v(ne,(()=>{const g=[];for(let O=29;O>=0;O--){const E=new Date;E.setDate(E.getDate()-O);const de=E.toISOString().slice(0,10);g.push({date:de,short:E.toLocaleDateString("en-US",{month:"short",day:"numeric"}),weekday:E.getDay(),present:e(L).has(de)})}return g})())}),yt(),dt();var M=Ss(),K=a(M);{var P=g=>{var q=gs(),O=a(q);t(q),Z(E=>c(O,`ðŸŽ‰ Happy Birthday, ${E??""}!`),[()=>(e(d),i(()=>e(d)?.name?.split(" ")[0]||"there"))]),l(g,q)};S(K,g=>{e(le)&&g(P)})}var Se=s(K,4);za(Se,{});var me=s(Se,2),Ge=a(me);{var F=g=>{var q=fs(),O=s(a(q),2),E=a(O);t(O);var de=s(O,2),We=a(de,!0);t(de),t(q),Z(it=>{c(E,`${it??""}%`),c(We,e(p))},[()=>(e(N),i(()=>Math.round(e(N))))]),l(g,q)};S(Ge,g=>{e(d),i(()=>!((e(d)?.rank||"").toLowerCase().includes("black")||(e(d)?.rank||"").toLowerCase().includes("degree")))&&g(F)})}var ee=s(Ge,2),je=s(a(ee),2),x=a(je,!0);t(je),t(ee);var R=s(ee,2),ie=s(a(R),2),w=a(ie,!0);t(ie),t(R);var ue=s(R,2),ve=s(a(ue),2),we=a(ve,!0);t(ve),t(ue);var Y=s(ue,2),W=s(a(Y),2),Ze=a(W,!0);t(W);var xe=s(W,2),pe=a(xe);t(xe),t(Y);var Ie=s(Y,2),Be=s(a(Ie),2),Te=a(Be,!0);t(Be),t(Ie),t(me);var Ce=s(me,2),Me=a(Ce),_e=s(a(Me),2),Ne=a(_e),Xe=s(Ne,2),Pe=s(Xe,2);t(_e),t(Me);var He=s(Me,2);{var Ue=g=>{var q=bs(),O=s(a(q),2);Ye(O,5,()=>(e(A),i(()=>Array.from({length:e(A)}))),Oe,(wt,jt,$t)=>{const ha=qt(()=>$t<e(b)),oa=qt(()=>e(A)>1?$t/(e(A)-1):1),wa=qt(()=>(Ve(e(oa)),i(()=>Math.round(0+120*e(oa)))));var Xt=ps();Z(()=>{Fe(Xt,1,`heat-seg ${e(ha)?"is-filled":""}`,"svelte-a1y6eq"),bt(Xt,`--h:${e(wa)};`),pt(Xt,"title",`Class ${$t+1} of ${e(A)}`)}),l(wt,Xt)}),t(O);var E=s(O,2),de=a(E,!0);t(E);var We=s(E,2),it=a(We),vt=s(a(it)),ft=a(vt,!0);t(vt),t(it);var Gt=s(it,2),Yt=s(a(Gt)),Jt=a(Yt,!0);t(Yt),t(Gt),t(We),t(q),Z(()=>{c(de,e(p)),c(ft,e(b)),c(Jt,e(A))}),l(g,q)};S(He,g=>{e(d),i(()=>!((e(d)?.rank||"").toLowerCase().includes("black")||(e(d)?.rank||"").toLowerCase().includes("degree")))&&g(Ue)})}var lt=s(He,2),Lt=s(a(lt),2),Bt=a(Lt),Pt=s(a(Bt)),At=a(Pt,!0);t(Pt),t(Bt);var St=s(Bt,2),Wt=s(a(St)),Tt=a(Wt,!0);t(Wt),t(St);var zt=s(St,2),f=s(a(zt)),m=a(f,!0);t(f),t(zt),t(Lt),t(lt);var Ae=s(lt,2),$e=s(a(Ae),2),Je=a($e),mt=s(a(Je)),nt=a(mt,!0);t(mt),t(Je);var at=s(Je,2),xt=s(a(at)),kt=a(xt,!0);t(xt),t(at);var ye=s(at,2),De=s(a(ye)),gt=a(De,!0);t(De),t(ye),t($e),t(Ae),t(Ce);var Zt=s(Ce,2),Nt=a(Zt),Rt=s(a(Nt),2),Mt=a(Rt);{var Ht=g=>{var q=tt(),O=Re(q);Ye(O,1,()=>(e(d),i(()=>e(d).goldStars.slice(0,3))),Oe,(E,de)=>{var We=Is(),it=a(We),vt=a(it,!0);t(it);var ft=s(it,2),Gt=a(ft);t(ft);var Yt=s(ft,2);{var Jt=wt=>{var jt=ms(),$t=a(jt,!0);t(jt),Z(()=>c($t,(e(de),i(()=>e(de).note)))),l(wt,jt)};S(Yt,wt=>{e(de),i(()=>e(de).note)&&wt(Jt)})}t(We),Z(()=>{c(vt,(e(de),i(()=>e(de).event))),c(Gt,`${e(de),i(()=>e(de).date)??""} â€¢ ${e(de),i(()=>e(de).location)??""}`)}),l(E,We)}),l(g,q)},et=g=>{var q=_s();l(g,q)};S(Mt,g=>{e(d),i(()=>Array.isArray(e(d)?.goldStars)&&e(d).goldStars.length>0)?g(Ht):g(et,!1)})}t(Rt),t(Nt);var Qe=s(Nt,2),ht=s(a(Qe),2);{var st=g=>{var q=ws();Ye(q,5,()=>(e(G),i(()=>e(G).slice(0,6))),Oe,(O,E)=>{var de=hs(),We=a(de),it=a(We,!0);t(We);var vt=s(We,2),ft=a(vt),Gt=a(ft,!0);t(ft);var Yt=s(ft,2);{var Jt=wt=>{var jt=ys(),$t=a(jt,!0);t(jt),Z(()=>c($t,(e(E),i(()=>e(E).description)))),l(wt,jt)};S(Yt,wt=>{e(E),i(()=>e(E).description)&&wt(Jt)})}t(vt),t(de),Z(wt=>{c(it,wt),c(Gt,(e(E),i(()=>e(E).name)))},[()=>(e(E),i(()=>(e(E).level||"?").charAt(0)))]),l(O,de)}),t(q),l(g,q)},Ut=g=>{var q=Cs();l(g,q)};S(ht,g=>{e(G),i(()=>e(G).length)?g(st):g(Ut,!1)})}t(Qe);var Ee=s(Qe,2),ot=s(a(Ee),2);Ye(ot,5,()=>e(ne),Oe,(g,q)=>{var O=As();Z(()=>{Fe(O,1,(e(q),i(()=>`heatday ${e(q).present?"present":""}`)),"svelte-a1y6eq"),pt(O,"title",(e(q),i(()=>`${e(q).date} â€¢ ${e(q).present?"Present":"Absent"}`)))}),l(g,O)}),t(ot),la(2),t(Ee),t(Zt);var Dt=s(Zt,2);us(Dt,{}),t(M),Z((g,q)=>{c(x,g),c(w,(e(d),i(()=>e(d)?.totalClasses??0))),c(we,(e(V),e(j),i(()=>e(V).unreadMessages??e(j)))),c(Ze,(e(V),e(ge),i(()=>e(V).badgesCount??e(ge)))),c(pe,`${e(V),e(h),i(()=>e(V).badgesByLevel?.Bronze||e(h).Bronze||0)??""}B â€¢ ${e(V),e(h),i(()=>e(V).badgesByLevel?.Silver||e(h).Silver||0)??""}S â€¢ ${e(V),e(h),i(()=>e(V).badgesByLevel?.Gold||e(h).Gold||0)??""}G`),c(Te,q),c(At,(e(d),i(()=>e(d)?.funStats?.trainingGoals??0))),c(Tt,(e(V),i(()=>e(V).practiceCount??0))),c(m,(e(V),i(()=>e(V).assignmentsDue??0))),c(nt,(e(d),i(()=>e(d)?.rank||"â€”"))),c(kt,(e(d),i(()=>e(d)?.totalClasses??0))),c(gt,(e(d),i(()=>e(d)?.joinDate||"â€”")))},[()=>(e(d),i(()=>(()=>{const g=new Date,q=g.getMonth(),O=g.getFullYear();return(Array.isArray(e(d)?.attendanceDates)?e(d).attendanceDates:[]).filter(de=>{const We=new Date(de);return!isNaN(We)&&We.getMonth()===q&&We.getFullYear()===O}).length})())),()=>(e(V),e(k),i(()=>re(e(V).daysSinceLastClass??e(k))))]),z("click",Ne,()=>window&&window.scrollTo(0,0)),z("click",Xe,()=>fa(()=>Promise.resolve().then(()=>ma),void 0,import.meta.url).then(g=>g.activeTab.set("messages"))),z("click",Pe,()=>fa(()=>Promise.resolve().then(()=>ma),void 0,import.meta.url).then(g=>g.activeTab.set("training"))),l(be,M),ut(),X()}var ks=u(`<style>@keyframes modalFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes modalSlideUp {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }</style>`),Zs=u('<div class="modal-backdrop svelte-ta60gp" role="presentation"><div class="modal-content svelte-ta60gp" role="dialog" aria-modal="true" tabindex="-1"><header class="modal-header svelte-ta60gp"><h2 class="svelte-ta60gp"> </h2> <button class="modal-close svelte-ta60gp">âœ•</button></header> <div class="modal-body svelte-ta60gp"><!></div></div></div>');function ea(be,U){ct(U,!1);let r=It(U,"open",8,!1),_=It(U,"title",8,""),X=It(U,"onClose",8,()=>{});function N(n){n.target===n.currentTarget&&X()()}function p(n){n.key==="Escape"&&r()&&X()()}dt();var A=tt();z("keydown",Ga,p),Ya("ta60gp",n=>{var o=ks();l(n,o)});var b=Re(A);{var $=n=>{var o=Zs(),C=a(o),te=a(C),J=a(te),ae=a(J,!0);t(J);var he=s(J,2);t(te);var H=s(te,2),G=a(H);Ha(G,U,"default",{}),t(H),t(C),t(o),Z(()=>c(ae,_())),z("click",he,function(...j){X()?.apply(this,j)}),z("click",C,pa(function(j){ba.call(this,U,j)})),z("keydown",C,pa(function(j){ba.call(this,U,j)})),z("click",o,N),z("keydown",o,p),l(n,o)};S(b,n=>{r()&&n($)})}l(be,A),ut()}var Ns=u('<span class="role-badge svelte-1btwglb"> </span>'),Ms=u('<div class="contact-roles svelte-1btwglb"></div>'),Ds=u('<button class="btn btn--primary svelte-1btwglb">Add Buddy</button>'),Gs=u('<div class="contact-modal svelte-1btwglb"><div class="contact-header svelte-1btwglb"><div class="contact-avatar svelte-1btwglb"> </div> <div class="contact-info svelte-1btwglb"><div class="contact-name svelte-1btwglb"> </div> <div class="contact-rank svelte-1btwglb"> </div> <!> <div class="portal-chip svelte-1btwglb">Student Portal</div></div></div> <div class="contact-actions svelte-1btwglb"><!> <button class="btn svelte-1btwglb">Message</button> <button class="btn svelte-1btwglb">View Profile</button></div></div>');function js(be,U){ct(U,!1);const r=()=>rt(_t,"$students",X),_=()=>rt(Ke,"$activeStudent",X),[X,N]=Ct(),p=I();let A=It(U,"open",8,!1),b=It(U,"contact",8,null),$=It(U,"onClose",8,()=>{}),n=It(U,"onViewProfile",8,null);function o(G){return G?G.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Miss|Dr\.?|Master)\s+/i,"").trim().split(/\s+/).map(ge=>ge[0]||"").join("").slice(0,2).toUpperCase():""}function C(G){if(!G||typeof G!="string")return"#64748b";const j=G.toLowerCase();return j.includes("white")?"#e5e7eb":j.includes("yellow")?"#facc15":j.includes("orange")?"#fb923c":j.includes("green")?"#22c55e":j.includes("blue")?"#3b82f6":j.includes("purple")?"#a855f7":j.includes("red")?"#ef4444":j.includes("brown")?"#92400e":j.includes("black")||j.includes("degree")?"#020617":"#64748b"}function te(){const G=_();return!G||!Array.isArray(G.buddies)?!1:G.buddies.some(j=>j.name===(b()?.name||""))}function J(){const G=_();!G||!b()?.id||(ia(G.id,b().id,!0,e(p)),_t.set([...e(p)]),Ke.set({...G}))}T(()=>r(),()=>{v(p,r()||[])}),yt(),dt();var ae=tt(),he=Re(ae);{var H=G=>{ea(G,{title:"Contact",get onClose(){return $()},children:(j,ge)=>{var h=Gs(),se=a(h),y=a(se),k=a(y,!0);t(y);var L=s(y,2),ne=a(L),d=a(ne,!0);t(ne);var oe=s(ne,2),D=a(oe,!0);t(oe);var qe=s(oe,2);{var Le=re=>{var le=Ms();Ye(le,5,()=>(Ve(b()),i(()=>b().roles)),Oe,(ke,ze)=>{var B=Ns(),M=a(B,!0);t(B),Z(()=>c(M,e(ze))),l(ke,B)}),t(le),l(re,le)};S(qe,re=>{Ve(b()),i(()=>Array.isArray(b().roles)&&b().roles.length)&&re(Le)})}la(2),t(L),t(se);var Q=s(se,2),ce=a(Q);{var V=re=>{var le=Ds();z("click",le,J),l(re,le)};S(ce,re=>{i(()=>!te())&&re(V)})}var fe=s(ce,4);t(Q),t(h),Z((re,le)=>{bt(y,re),c(k,le),c(d,(Ve(b()),i(()=>b().name))),c(D,(Ve(b()),i(()=>b().rank)))},[()=>(Ve(b()),i(()=>`--avatar-bg: ${C(b().rank||"")}`)),()=>(Ve(b()),i(()=>o(b().name)))]),z("click",fe,()=>n()&&n()(b())),l(j,h)},$$slots:{default:!0}})};S(he,G=>{A()&&b()&&G(H)})}l(be,ae),ut(),N()}var Bs=u('<span class="role-badge svelte-10urflq"> </span>'),Ps=u('<div class="profile-roles svelte-10urflq"></div>'),$s=u('<div class="badge-pill svelte-10urflq"> </div>'),qs=u('<div class="profile-badges svelte-10urflq"><div class="section-title svelte-10urflq">Recent Badges</div> <div class="badge-row svelte-10urflq"></div></div>'),Ls=u('<div class="profile-modal svelte-10urflq"><div class="profile-header svelte-10urflq"><div class="profile-avatar svelte-10urflq"> </div> <div class="profile-info svelte-10urflq"><div class="profile-name svelte-10urflq"> </div> <div class="profile-rank svelte-10urflq"> </div> <!></div></div> <div class="profile-stats svelte-10urflq"><div class="stat svelte-10urflq"><span class="label svelte-10urflq">Total Classes</span><span class="value svelte-10urflq"> </span></div> <div class="stat svelte-10urflq"><span class="label svelte-10urflq">Member Since</span><span class="value svelte-10urflq"> </span></div> <div class="stat svelte-10urflq"><span class="label svelte-10urflq">Buddies</span><span class="value svelte-10urflq"> </span></div></div> <!></div>');function Ws(be,U){ct(U,!1);let r=It(U,"open",8,!1),_=It(U,"student",8,null),X=It(U,"onClose",8,()=>{});function N(n){return n?n.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Miss|Dr\.?|Master)\s+/i,"").trim().split(/\s+/).map(C=>C[0]||"").join("").slice(0,2).toUpperCase():""}function p(n){if(!n||typeof n!="string")return"#64748b";const o=n.toLowerCase();return o.includes("white")?"#e5e7eb":o.includes("yellow")?"#facc15":o.includes("orange")?"#fb923c":o.includes("green")?"#22c55e":o.includes("blue")?"#3b82f6":o.includes("purple")?"#a855f7":o.includes("red")?"#ef4444":o.includes("brown")?"#92400e":o.includes("black")||o.includes("degree")?"#020617":"#64748b"}dt();var A=tt(),b=Re(A);{var $=n=>{ea(n,{title:"Profile",get onClose(){return X()},children:(o,C)=>{var te=Ls(),J=a(te),ae=a(J),he=a(ae,!0);t(ae);var H=s(ae,2),G=a(H),j=a(G,!0);t(G);var ge=s(G,2),h=a(ge,!0);t(ge);var se=s(ge,2);{var y=re=>{var le=Ps();Ye(le,5,()=>(Ve(_()),i(()=>_().roles)),Oe,(ke,ze)=>{var B=Bs(),M=a(B,!0);t(B),Z(()=>c(M,e(ze))),l(ke,B)}),t(le),l(re,le)};S(se,re=>{Ve(_()),i(()=>Array.isArray(_().roles)&&_().roles.length)&&re(y)})}t(H),t(J);var k=s(J,2),L=a(k),ne=s(a(L)),d=a(ne,!0);t(ne),t(L);var oe=s(L,2),D=s(a(oe)),qe=a(D,!0);t(D),t(oe);var Le=s(oe,2),Q=s(a(Le)),ce=a(Q,!0);t(Q),t(Le),t(k);var V=s(k,2);{var fe=re=>{var le=qs(),ke=s(a(le),2);Ye(ke,5,()=>(Ve(_()),i(()=>_().badges.slice(0,4))),Oe,(ze,B)=>{var M=$s(),K=a(M,!0);t(M),Z(()=>c(K,(e(B),i(()=>e(B).name)))),l(ze,M)}),t(ke),t(le),l(re,le)};S(V,re=>{Ve(_()),i(()=>Array.isArray(_().badges)&&_().badges.length)&&re(fe)})}t(te),Z((re,le,ke)=>{bt(ae,re),c(he,le),c(j,(Ve(_()),i(()=>_().displayName||_().name))),c(h,(Ve(_()),i(()=>_().rank))),c(d,(Ve(_()),i(()=>_().totalClasses??0))),c(qe,(Ve(_()),i(()=>_().joinDate||"â€”"))),c(ce,ke)},[()=>(Ve(_()),i(()=>`--avatar-bg: ${p(_().rank||"")}`)),()=>(Ve(_()),i(()=>N(_().displayName||_().name))),()=>(Ve(_()),i(()=>Array.isArray(_().buddies)?_().buddies.length:0))]),l(o,te)},$$slots:{default:!0}})};S(b,n=>{r()&&_()&&n($)})}l(be,A),ut()}var Ts=u('<div class="list-section svelte-g9ob4c">Pinned</div>'),zs=u('<div class="buddy-unread svelte-g9ob4c"> </div>'),Rs=u('<div class="buddy-context svelte-g9ob4c"><button class="ctx-btn svelte-g9ob4c">Pin/Unpin</button> <button class="ctx-btn svelte-g9ob4c">Hide/Unhide</button> <button class="ctx-btn svelte-g9ob4c">Mark Unread</button></div>'),Hs=u('<div role="button" tabindex="0"><div class="buddy-avatar svelte-g9ob4c"> </div> <div class="buddy-main svelte-g9ob4c"><div class="buddy-name svelte-g9ob4c"> </div> <div class="buddy-meta svelte-g9ob4c"> </div> <div class="buddy-preview svelte-g9ob4c"> </div></div> <!> <button type="button" class="buddy-menu svelte-g9ob4c">â‹®</button></div> <!>',1),Ys=u('<div class="typing-indicator svelte-g9ob4c"><span class="svelte-g9ob4c"></span><span class="svelte-g9ob4c"></span><span class="svelte-g9ob4c"></span></div>'),Us=u('<div><div class="bubble-content svelte-g9ob4c"> </div> <div class="bubble-time svelte-g9ob4c"> </div></div>'),Js=u('<div class="thread-header svelte-g9ob4c"><div class="thread-title-row svelte-g9ob4c"><div></div> <h2 class="thread-title svelte-g9ob4c"> </h2></div> <div class="thread-actions svelte-g9ob4c"><button type="button" class="contact-btn svelte-g9ob4c">Contact</button> <button type="button" class="contact-btn svelte-g9ob4c"> </button> <button type="button" class="contact-btn svelte-g9ob4c"> </button> <button type="button" class="contact-btn svelte-g9ob4c">Mark Unread</button> <button type="button" class="contact-btn danger svelte-g9ob4c">Delete Chat</button></div></div> <div class="message-scroll svelte-g9ob4c"><!> <!></div> <div class="message-input-box svelte-g9ob4c"><input type="text" placeholder="Type a message..." class="message-input svelte-g9ob4c"/> <button type="button" class="send-btn svelte-g9ob4c">Send</button></div>',1),Vs=u('<div class="empty-state svelte-g9ob4c"><p class="svelte-g9ob4c">Select a buddy to start chatting</p></div>'),Fs=u('<section class="messages-root svelte-g9ob4c"><div class="messages-panel svelte-g9ob4c"><div class="messages-funstrip svelte-g9ob4c"><div class="fun-chip svelte-g9ob4c"><div class="fun-label svelte-g9ob4c">Unread</div> <div class="fun-value svelte-g9ob4c"> </div></div> <div class="fun-chip svelte-g9ob4c"><div class="fun-label svelte-g9ob4c">Buddies</div> <div class="fun-value svelte-g9ob4c"> </div></div> <div class="fun-chip svelte-g9ob4c"><div class="fun-label svelte-g9ob4c">Threads</div> <div class="fun-value svelte-g9ob4c"> </div></div></div> <div class="buddy-list svelte-g9ob4c"><h3 class="buddy-list-title svelte-g9ob4c">Messages</h3> <div class="buddy-filters svelte-g9ob4c"><button type="button">All</button> <button type="button">Buddies</button> <button type="button">Unread</button></div> <div class="buddy-actions-row svelte-g9ob4c"><button type="button" class="mark-all-link svelte-g9ob4c">Mark all read</button> <div class="new-chat svelte-g9ob4c"><input type="text" class="new-chat-input svelte-g9ob4c" placeholder="Start new chatâ€¦"/> <button type="button" class="new-chat-btn svelte-g9ob4c">New Chat</button></div></div> <div class="buddy-search svelte-g9ob4c"><input type="text" class="buddy-search-input svelte-g9ob4c" placeholder="Search contactsâ€¦"/></div> <div class="buddy-list-scroll svelte-g9ob4c"><!> <!></div></div> <div class="message-thread svelte-g9ob4c"><!></div></div></section> <!> <!>',1);function Xs(be,U){ct(U,!1);const r=()=>rt(Ke,"$activeStudent",X),_=()=>rt(_t,"$students",X),[X,N]=Ct();let p=I(null),A=I(null),b=I(""),$=I([]),n=I([]),o=I([]),C=I([]),te=I([]),J=I(""),ae=I("all"),he=I(!1),H=I(null),G=I(!1),j=I(null),ge=I(null),h=I(!1),se=I("");function y(f){try{return f==null?f:f.toString()}catch{return f}}function k(f){if(!f)return f;const m=e(C).find($e=>y($e.id)===y(f));if(m)return y(m.id);const Ae=e(C).find($e=>$e.name===f||$e.displayName===f);return y(Ae?Ae.id:f)}function L(){if(!r()||!e(p))return;const f=r(),m=new Set(f.hiddenChats||[]);m.has(e(p))?m.delete(e(p)):m.add(e(p)),f.hiddenChats=Array.from(m),Ke.set({...f}),_t.set([...e(C)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(C)))}function ne(){if(!r()||!e(p))return;const f=r(),m=new Set(f.pinnedChats||[]);m.has(e(p))?m.delete(e(p)):m.add(e(p)),f.pinnedChats=Array.from(m),Ke.set({...f}),_t.set([...e(C)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(C)))}function d(f){const m=k(f.name);v(ge,e(ge)===m?null:m)}function oe(f){v(p,k(f.name)),ne()}function D(f){v(p,k(f.name)),L()}function qe(f){v(p,k(f.name)),B()}function Le(){v(h,!0),setTimeout(()=>{v(h,!1)},1500)}function Q(f){if(!f||typeof f!="string")return"#64748b";const m=f.toLowerCase();return m.includes("white")?"#e5e7eb":m.includes("yellow")?"#facc15":m.includes("orange")?"#fb923c":m.includes("green")?"#22c55e":m.includes("blue")?"#3b82f6":m.includes("purple")?"#a855f7":m.includes("red")?"#ef4444":m.includes("brown")?"#92400e":m.includes("black")||m.includes("degree")?"#020617":"#64748b"}function ce(f){return f?f.replace(/^(Mr\.?|Ms\.?|Mrs\.?|Miss|Dr\.?|Master)\s+/i,"").trim().split(/\s+/).map(Ae=>Ae[0]||"").join("").slice(0,2).toUpperCase():""}function V(f){v(A,f.name),v(p,k(f.name)),v(b,"")}function fe(){if(!e(p))return;const f=Ot(e(C),e(p));f&&(v(H,{id:f.id,name:f.displayName||f.name,rank:f.rank,roles:f.roles||[]}),v(he,!0))}function re(){v(he,!1),v(H,null)}function le(f){const m=Ot(e(C),f.id);m&&(v(j,m),v(G,!0))}function ke(){v(G,!1),v(j,null)}function ze(){if(!e(b).trim()||!e(p)||!r())return;const f=Pa(r().id,e(p),e(b),e(C));f&&(v(n,Array.isArray(r().messages)?[...r().messages]:[]),e(n).some(Ae=>Ae.timestamp===f.timestamp&&Ae.text===f.text)||(v(n,[...e(n),f]),Kt(Ke,i(r).messages=e(n),i(r))),v(b,""),_t.set([...e(C)]),Ke.set({...r()}),v(o,e(n).filter(Ae=>y(Ae.fromId)===y(r().id)&&y(Ae.toId)===y(e(p))||y(Ae.toId)===y(r().id)&&y(Ae.fromId)===y(e(p)))),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(C))))}function B(){if(!r()||!e(p))return;const f=r(),m=(f.messages||[]).slice().reverse().findIndex($e=>y($e.fromId)===y(e(p))&&y($e.toId)===y(f.id));if(m===-1)return;const Ae=f.messages.length-1-m;f.messages[Ae]={...f.messages[Ae],read:!1},Ke.set({...f}),_t.set([...e(C)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(C)))}function M(){const f=e(se).trim();if(!f)return;const m=e(C).find(Ae=>(Ae.displayName||Ae.name).toLowerCase().includes(f.toLowerCase()));!m||m.id===r()?.id||(v(p,m.id),v(A,m.displayName||m.name),v(b,""))}function K(){if(!r()||!e(p))return;const f=r(),m=Ot(e(C),e(p));if(!m)return;const Ae=($e,Je,mt)=>Array.isArray($e)?$e.filter(nt=>!(nt.fromId===Je&&nt.toId===mt||nt.fromId===mt&&nt.toId===Je)):[];f.messages=Ae(f.messages,f.id,m.id),m.messages=Ae(m.messages,f.id,m.id),_t.set([...e(C)]),Ke.set({...f}),v(n,[...f.messages]),v(o,[]),v(p,null),v(A,null),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(C)))}function P(f){const m=k(f.name),Ae=e(n).filter(Je=>Je.fromId===r().id&&Je.toId===m||Je.toId===r().id&&Je.fromId===m);if(Ae.length===0)return"No messages yet";const $e=Ae[Ae.length-1];return $e.text.length>30?$e.text.substring(0,30)+"...":$e.text}function Se(f){return f?new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}let me=I();function Ge(){e(me)&&setTimeout(()=>{sa(me,e(me).scrollTop=e(me).scrollHeight)},0)}T(()=>r(),()=>{r()&&(!r().hiddenChats||!Array.isArray(r().hiddenChats))&&Kt(Ke,i(r).hiddenChats=[],i(r))}),T(()=>r(),()=>{r()&&(!r().pinnedChats||!Array.isArray(r().pinnedChats))&&Kt(Ke,i(r).pinnedChats=[],i(r))}),T(()=>_(),()=>{v(C,_()||[])}),T(()=>(r(),e(C),e($),e(n),e(te),e(ae),e(J),e(p),e(A)),()=>{if(r()&&e(C).length>0){v($,Array.isArray(r().buddies)?r().buddies:[]),v(n,Array.isArray(r().messages)?r().messages:[]);const f=Array.isArray(r().roles)?r().roles:[],m=f.includes("instructor")||f.includes("assistant"),Ae=new Set(e($).map(ye=>ye.displayName||ye.name)),$e=new Set(e($).map(ye=>ye.id).filter(Boolean)),Je=new Set;e(n).forEach(ye=>{const De=y(ye.fromId)===y(r().id)?y(ye.toId):y(ye.fromId);Je.add(De)});const mt=Array.from(Je).map(ye=>{const De=Ot(e(C),ye);if(!De)return null;const gt=De.displayName||De.name;return Ae.has(gt)||$e.has(y(De.id))?null:{name:gt,rank:De.rank,streak:0,status:"Message thread"}}).filter(Boolean);if(m){const ye=e(C).filter(De=>De.id!==r().id).map(De=>{const gt=De.displayName||De.name;return Ae.has(gt)||$e.has(y(De.id))||Je.has(y(De.id))?null:{name:gt,rank:De.rank,streak:0,status:"Available"}}).filter(Boolean);v(te,[...e($),...mt,...ye])}else v(te,[...e($),...mt]);const nt=new Set((r().hiddenChats||[]).map(ye=>ye));let at=[...e(te)].filter(ye=>!nt.has(k(ye.name)));if(e(ae)==="buddies"){const ye=new Set(e($).map(De=>De.displayName||De.name));at=at.filter(De=>ye.has(De.name))}else if(e(ae)==="unread"){const ye=new Set((e(n)||[]).filter(De=>y(De.toId)===y(r().id)&&De.read===!1).map(De=>y(De.fromId)));at=at.filter(De=>ye.has(y(k(De.name))))}const xt=new Set((r().pinnedChats||[]).map(ye=>ye));at.sort((ye,De)=>(xt.has(k(De.name))?1:0)-(xt.has(k(ye.name))?1:0));const kt=e(J).trim()===""?at:at.filter(ye=>(ye.name||"").toLowerCase().includes(e(J).toLowerCase()));v(te,kt),!e(p)&&e(te).length>0&&(v(A,e(te)[0].name),v(p,k(e(A)))),e(p)&&v(o,e(n).filter(ye=>y(ye.fromId)===y(r().id)&&y(ye.toId)===y(e(p))||y(ye.toId)===y(r().id)&&y(ye.fromId)===y(e(p))))}}),T(()=>e(o),()=>{e(o)&&Ge()}),yt(),dt();var F=Fs(),ee=Re(F),je=a(ee),x=a(je),R=a(x),ie=s(a(R),2),w=a(ie,!0);t(ie),t(R);var ue=s(R,2),ve=s(a(ue),2),we=a(ve,!0);t(ve),t(ue);var Y=s(ue,2),W=s(a(Y),2),Ze=a(W,!0);t(W),t(Y),t(x);var xe=s(x,2),pe=s(a(xe),2),Ie=a(pe),Be=s(Ie,2),Te=s(Be,2);t(pe);var Ce=s(pe,2),Me=a(Ce),_e=s(Me,2),Ne=a(_e);Vt(Ne);var Xe=s(Ne,2);t(_e),t(Ce);var Pe=s(Ce,2),He=a(Pe);Vt(He),t(Pe);var Ue=s(Pe,2),lt=a(Ue);{var Lt=f=>{var m=Ts();l(f,m)};S(lt,f=>{r(),i(()=>(r()?.pinnedChats||[]).length>0)&&f(Lt)})}var Bt=s(lt,2);Ye(Bt,1,()=>e(te),f=>f.name,(f,m)=>{var Ae=Hs(),$e=Re(Ae),Je=a($e),mt=a(Je,!0);t(Je);var nt=s(Je,2),at=a(nt),xt=a(at,!0);t(at);var kt=s(at,2),ye=a(kt);t(kt);var De=s(kt,2),gt=a(De,!0);t(De),t(nt);var Zt=s(nt,2);{var Nt=et=>{var Qe=zs(),ht=a(Qe,!0);t(Qe),Z(st=>c(ht,st),[()=>(e(n),e(m),r(),i(()=>(e(n)||[]).filter(st=>y(st.fromId)===y(k(e(m).name))&&y(st.toId)===y(r()?.id)&&st.read===!1).length))]),l(et,Qe)};S(Zt,et=>{e(n),e(m),r(),i(()=>(e(n)||[]).filter(Qe=>y(Qe.fromId)===y(k(e(m).name))&&y(Qe.toId)===y(r()?.id)&&Qe.read===!1).length>0)&&et(Nt)})}var Rt=s(Zt,2);t($e);var Mt=s($e,2);{var Ht=et=>{var Qe=Rs(),ht=a(Qe),st=s(ht,2),Ut=s(st,2);t(Qe),z("click",ht,()=>oe(e(m))),z("click",st,()=>D(e(m))),z("click",Ut,()=>qe(e(m))),l(et,Qe)};S(Mt,et=>{e(ge),e(m),i(()=>e(ge)===k(e(m).name))&&et(Ht)})}Z((et,Qe,ht,st)=>{Fe($e,1,`buddy-row ${et??""}`,"svelte-g9ob4c"),bt(Je,Qe),c(mt,ht),c(xt,(e(m),i(()=>e(m).name))),c(ye,`${e(m),i(()=>e(m).rank||"")??""}${e(m),i(()=>e(m).streak?` Â· Streak: ${e(m).streak}`:"")??""}`),c(gt,st)},[()=>(e(p),e(m),i(()=>e(p)===k(e(m).name)?"is-active":"")),()=>(e(m),i(()=>`--avatar-bg: ${Q(e(m).rank||"")}`)),()=>(e(m),i(()=>ce(e(m).name))),()=>(e(m),i(()=>P(e(m).name)))]),z("click",Rt,et=>{et.stopPropagation(),d(e(m))}),z("click",$e,()=>V(e(m))),z("keydown",$e,et=>{(et.key==="Enter"||et.key===" ")&&V(e(m))}),l(f,Ae)}),t(Ue),t(xe);var Pt=s(xe,2),At=a(Pt);{var St=f=>{var m=Js(),Ae=Re(m),$e=a(Ae),Je=a($e);let mt;var nt=s(Je,2),at=a(nt,!0);t(nt),t($e);var xt=s($e,2),kt=a(xt),ye=s(kt,2),De=a(ye,!0);t(ye);var gt=s(ye,2),Zt=a(gt,!0);t(gt);var Nt=s(gt,2),Rt=s(Nt,2);t(xt),t(Ae);var Mt=s(Ae,2),Ht=a(Mt);{var et=Ee=>{var ot=Ys();l(Ee,ot)};S(Ht,Ee=>{e(h)&&Ee(et)})}var Qe=s(Ht,2);Ye(Qe,1,()=>e(o),Ee=>Ee.timestamp,(Ee,ot)=>{var Dt=Us(),g=a(Dt),q=a(g,!0);t(g);var O=s(g,2),E=a(O,!0);t(O),t(Dt),Z((de,We)=>{Fe(Dt,1,`message-bubble ${e(ot),r(),i(()=>e(ot).fromId===r()?.id?"is-sent":"is-received")??""}`,"svelte-g9ob4c"),c(q,(e(ot),i(()=>e(ot).text))),pt(O,"title",de),c(E,We)},[()=>(e(ot),i(()=>new Date(e(ot).timestamp).toLocaleString())),()=>(e(ot),i(()=>Se(e(ot).timestamp)))]),l(Ee,Dt)}),t(Mt),ja(Mt,Ee=>v(me,Ee),()=>e(me));var ht=s(Mt,2),st=a(ht);Vt(st);var Ut=s(st,2);t(ht),Z((Ee,ot,Dt)=>{mt=Fe(Je,1,"presence-dot svelte-g9ob4c",null,mt,Ee),c(at,e(A)),c(De,ot),c(Zt,Dt)},[()=>({"is-unread":(e(n)||[]).some(Ee=>Ee.fromId===e(p)&&Ee.toId===r()?.id&&Ee.read===!1)}),()=>(r(),e(p),i(()=>(r()?.pinnedChats||[]).includes(e(p))?"Unpin":"Pin")),()=>(r(),e(p),i(()=>(r()?.hiddenChats||[]).includes(e(p))?"Unhide":"Hide"))]),z("click",kt,fe),z("click",ye,()=>ne()),z("click",gt,()=>L()),z("click",Nt,B),z("click",Rt,K),Ft(st,()=>e(b),Ee=>v(b,Ee)),z("keydown",st,Ee=>{Ee.key==="Enter"?ze():Le()}),z("click",Ut,ze),l(f,m)},Wt=f=>{var m=Vs();l(f,m)};S(At,f=>{e(p)?f(St):f(Wt,!1)})}t(Pt),t(je),t(ee);var Tt=s(ee,2);js(Tt,{get open(){return e(he)},get contact(){return e(H)},onClose:re,onViewProfile:le});var zt=s(Tt,2);Ws(zt,{get open(){return e(G)},get student(){return e(j)},onClose:ke}),Z((f,m,Ae)=>{c(w,f),c(we,m),c(Ze,Ae),Fe(Ie,1,`filter-chip ${e(ae)==="all"?"is-active":""}`,"svelte-g9ob4c"),Fe(Be,1,`filter-chip ${e(ae)==="buddies"?"is-active":""}`,"svelte-g9ob4c"),Fe(Te,1,`filter-chip ${e(ae)==="unread"?"is-active":""}`,"svelte-g9ob4c")},[()=>(e(n),r(),i(()=>Array.isArray(e(n))?e(n).filter(f=>f.toId===r()?.id&&f.read===!1).length:0)),()=>(e($),i(()=>Array.isArray(e($))?e($).length:0)),()=>(e(n),r(),i(()=>Array.isArray(e(n))?new Set(e(n).map(f=>f.fromId===r()?.id?f.toId:f.fromId)).size:0))]),z("click",Ie,()=>v(ae,"all")),z("click",Be,()=>v(ae,"buddies")),z("click",Te,()=>v(ae,"unread")),z("click",Me,()=>{if(!r())return;const f=(r().messages||[]).map(m=>m.toId===r().id?{...m,read:!0}:m);Kt(Ke,i(r).messages=f,i(r)),Ke.set({...r()}),_t.set([...e(C)]),typeof window<"u"&&localStorage.setItem("studentsData",JSON.stringify(e(C)))}),Ft(Ne,()=>e(se),f=>v(se,f)),z("click",Xe,M),Ft(He,()=>e(J),f=>v(J,f)),l(be,F),ut(),N()}var Es=u('<p class="muted svelte-ifefql">Select a student to manage buddies.</p>'),Ks=u('<p class="muted svelte-ifefql">No buddies yet. Send a request below.</p>'),Os=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><button class="btn btn-danger svelte-ifefql">Remove</button></div></div></li>'),Qs=u('<ul class="list svelte-ifefql"></ul>'),ei=u('<p class="muted svelte-ifefql">No incoming requests.</p>'),ti=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><button class="btn svelte-ifefql">Accept</button> <button class="btn btn-muted svelte-ifefql">Reject</button></div></div></li>'),ai=u('<ul class="list svelte-ifefql"></ul>'),si=u('<p class="muted svelte-ifefql">No outgoing requests.</p>'),ii=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><span class="muted svelte-ifefql">Pending</span></div></div></li>'),ri=u('<ul class="list svelte-ifefql"></ul>'),li=u('<p class="muted svelte-ifefql"> </p>'),ni=u('<p class="helper-text svelte-ifefql">ðŸ’¡ As an instructor, you can add anyone directly as a buddy</p>'),oi=u('<span class="muted svelte-ifefql">Buddy</span>'),vi=u('<span class="muted svelte-ifefql">Requested</span>'),di=u('<button class="btn svelte-ifefql">Accept</button>'),ci=u('<button class="btn svelte-ifefql">Add</button>'),ui=u('<li><div class="item svelte-ifefql"><div class="avatar svelte-ifefql"> </div> <div class="info svelte-ifefql"><div class="name svelte-ifefql"> </div> <div class="rank svelte-ifefql"> </div></div> <div class="actions svelte-ifefql"><!></div></div></li>'),gi=u('<!> <ul class="list svelte-ifefql"></ul>',1),fi=u('<p class="muted svelte-ifefql">Type a name to search for buddies</p>'),pi=u('<div class="grid svelte-ifefql"><section class="svelte-ifefql"><h3 class="svelte-ifefql">My Buddies</h3> <!></section> <section class="svelte-ifefql"><h3 class="svelte-ifefql">Incoming Requests</h3> <!></section> <section class="svelte-ifefql"><h3 class="svelte-ifefql">Outgoing Requests</h3> <!></section> <section class="add-buddies-section svelte-ifefql"><h3 class="svelte-ifefql">Add Buddies</h3> <div class="search-container svelte-ifefql"><input type="text" class="search-input svelte-ifefql" placeholder="Search by name..."/></div> <!></section></div>'),bi=u('<div class="panel svelte-ifefql"><h2 class="panel-title svelte-ifefql">Buddies</h2> <!></div>');function mi(be,U){ct(U,!1);const r=()=>rt(_t,"$students",X),_=()=>rt(Ke,"$activeStudent",X),[X,N]=Ct(),p=I(),A=I(),b=I(),$=I(),n=I(),o=I(),C=I(),te=I(),J=I(),ae=I();let he=I([]),H=I(null),G=I("");function j(d){e(H)&&(e(n)?ia(e(H).id,d,!0):La(e(H).id,d))}function ge(d){e(H)&&ia(e(H).id,d)}function h(d){e(H)&&qa(e(H).id,d)}function se(d){e(H)&&$a(e(H).id,d)}T(()=>r(),()=>{v(he,r()||[])}),T(()=>_(),()=>{v(H,_()||null)}),T(()=>e(H),()=>{v(p,e(H)?e(H).friends||[]:[])}),T(()=>e(H),()=>{v(A,e(H)?e(H).friendRequestsIncoming||[]:[])}),T(()=>e(H),()=>{v(b,e(H)?e(H).friendRequestsOutgoing||[]:[])}),T(()=>e(H),()=>{v($,e(H)&&Array.isArray(e(H).roles)?e(H).roles:[])}),T(()=>e($),()=>{v(n,e($).includes("instructor")||e($).includes("assistant"))}),T(()=>(e(he),e(H)),()=>{v(o,e(he).filter(d=>d.id!==e(H)?.id))}),T(()=>(e(he),e(p)),()=>{v(C,e(he).filter(d=>e(p).includes(d.id)))}),T(()=>(e(he),e(A)),()=>{v(te,e(he).filter(d=>e(A).includes(d.id)))}),T(()=>(e(he),e(b)),()=>{v(J,e(he).filter(d=>e(b).includes(d.id)))}),T(()=>(e(G),e(o)),()=>{v(ae,e(G).trim()===""?[]:e(o).filter(d=>{const oe=(d.displayName||d.name||"").toLowerCase(),D=e(G).toLowerCase();return oe.includes(D)}))}),yt(),dt();var y=bi(),k=s(a(y),2);{var L=d=>{var oe=Es();l(d,oe)},ne=d=>{var oe=pi(),D=a(oe),qe=s(a(D),2);{var Le=F=>{var ee=Ks();l(F,ee)},Q=F=>{var ee=Qs();Ye(ee,5,()=>e(C),Oe,(je,x)=>{var R=Os(),ie=a(R),w=a(ie),ue=a(w,!0);t(w);var ve=s(w,2),we=a(ve),Y=a(we,!0);t(we);var W=s(we,2),Ze=a(W,!0);t(W),t(ve);var xe=s(ve,2),pe=a(xe);t(xe),t(ie),t(R),Z(Ie=>{c(ue,Ie),c(Y,(e(x),i(()=>e(x).displayName||e(x).name))),c(Ze,(e(x),i(()=>e(x).rank)))},[()=>(e(x),i(()=>(e(x).displayName||e(x).name).split(" ").map(Ie=>Ie[0]).join("").toUpperCase()))]),z("click",pe,()=>se(e(x).id)),l(je,R)}),t(ee),l(F,ee)};S(qe,F=>{e(C),i(()=>e(C).length===0)?F(Le):F(Q,!1)})}t(D);var ce=s(D,2),V=s(a(ce),2);{var fe=F=>{var ee=ei();l(F,ee)},re=F=>{var ee=ai();Ye(ee,5,()=>e(te),Oe,(je,x)=>{var R=ti(),ie=a(R),w=a(ie),ue=a(w,!0);t(w);var ve=s(w,2),we=a(ve),Y=a(we,!0);t(we);var W=s(we,2),Ze=a(W,!0);t(W),t(ve);var xe=s(ve,2),pe=a(xe),Ie=s(pe,2);t(xe),t(ie),t(R),Z(Be=>{c(ue,Be),c(Y,(e(x),i(()=>e(x).displayName||e(x).name))),c(Ze,(e(x),i(()=>e(x).rank)))},[()=>(e(x),i(()=>(e(x).displayName||e(x).name).split(" ").map(Be=>Be[0]).join("").toUpperCase()))]),z("click",pe,()=>ge(e(x).id)),z("click",Ie,()=>h(e(x).id)),l(je,R)}),t(ee),l(F,ee)};S(V,F=>{e(te),i(()=>e(te).length===0)?F(fe):F(re,!1)})}t(ce);var le=s(ce,2),ke=s(a(le),2);{var ze=F=>{var ee=si();l(F,ee)},B=F=>{var ee=ri();Ye(ee,5,()=>e(J),Oe,(je,x)=>{var R=ii(),ie=a(R),w=a(ie),ue=a(w,!0);t(w);var ve=s(w,2),we=a(ve),Y=a(we,!0);t(we);var W=s(we,2),Ze=a(W,!0);t(W),t(ve),la(2),t(ie),t(R),Z(xe=>{c(ue,xe),c(Y,(e(x),i(()=>e(x).displayName||e(x).name))),c(Ze,(e(x),i(()=>e(x).rank)))},[()=>(e(x),i(()=>(e(x).displayName||e(x).name).split(" ").map(xe=>xe[0]).join("").toUpperCase()))]),l(je,R)}),t(ee),l(F,ee)};S(ke,F=>{e(J),i(()=>e(J).length===0)?F(ze):F(B,!1)})}t(le);var M=s(le,2),K=s(a(M),2),P=a(K);Vt(P),t(K);var Se=s(K,2);{var me=F=>{var ee=tt(),je=Re(ee);{var x=ie=>{var w=li(),ue=a(w);t(w),Z(()=>c(ue,`No students found matching "${e(G)??""}"`)),l(ie,w)},R=ie=>{var w=gi(),ue=Re(w);{var ve=Y=>{var W=ni();l(Y,W)};S(ue,Y=>{e(n)&&Y(ve)})}var we=s(ue,2);Ye(we,5,()=>e(ae),Oe,(Y,W)=>{var Ze=ui(),xe=a(Ze),pe=a(xe),Ie=a(pe,!0);t(pe);var Be=s(pe,2),Te=a(Be),Ce=a(Te,!0);t(Te);var Me=s(Te,2),_e=a(Me,!0);t(Me),t(Be);var Ne=s(Be,2),Xe=a(Ne);{var Pe=Ue=>{var lt=oi();l(Ue,lt)},He=Ue=>{var lt=tt(),Lt=Re(lt);{var Bt=At=>{var St=vi();l(At,St)},Pt=At=>{var St=tt(),Wt=Re(St);{var Tt=f=>{var m=di();z("click",m,()=>ge(e(W).id)),l(f,m)},zt=f=>{var m=ci();z("click",m,()=>j(e(W).id)),l(f,m)};S(Wt,f=>{e(A),e(W),i(()=>e(A).includes(e(W).id))?f(Tt):f(zt,!1)},!0)}l(At,St)};S(Lt,At=>{e(b),e(W),i(()=>e(b).includes(e(W).id))?At(Bt):At(Pt,!1)},!0)}l(Ue,lt)};S(Xe,Ue=>{e(p),e(W),i(()=>e(p).includes(e(W).id))?Ue(Pe):Ue(He,!1)})}t(Ne),t(xe),t(Ze),Z(Ue=>{c(Ie,Ue),c(Ce,(e(W),i(()=>e(W).displayName||e(W).name))),c(_e,(e(W),i(()=>e(W).rank)))},[()=>(e(W),i(()=>(e(W).displayName||e(W).name).split(" ").map(Ue=>Ue[0]).join("").toUpperCase()))]),l(Y,Ze)}),t(we),l(ie,w)};S(je,ie=>{e(ae),i(()=>e(ae).length===0)?ie(x):ie(R,!1)})}l(F,ee)},Ge=F=>{var ee=fi();l(F,ee)};S(Se,F=>{e(G),i(()=>e(G).trim()!=="")?F(me):F(Ge,!1)})}t(M),t(oe),Ft(P,()=>e(G),F=>v(G,F)),l(d,oe)};S(k,d=>{e(H)?d(ne,!1):d(L)})}t(y),l(be,y),ut(),N()}var Ii=u('<section class="panel svelte-1d2svdd"><!></section>'),_i=u('<section class="panel svelte-1d2svdd"><!></section>'),yi=u('<div class="social-root svelte-1d2svdd"><div class="social-toggle svelte-1d2svdd"><button>ðŸ’¬ Messages</button> <button>ðŸ‘¥ Buddies</button></div> <!></div>');function hi(be){let U=I("messages");var r=yi(),_=a(r),X=a(_),N=s(X,2);t(_);var p=s(_,2);{var A=$=>{var n=Ii(),o=a(n);Xs(o,{}),t(n),l($,n)},b=$=>{var n=_i(),o=a(n);mi(o,{}),t(n),l($,n)};S(p,$=>{e(U)==="messages"?$(A):$(b,!1)})}t(r),Z(()=>{Fe(X,1,`toggle-btn ${e(U)==="messages"?"is-active":""}`,"svelte-1d2svdd"),Fe(N,1,`toggle-btn ${e(U)==="friends"?"is-active":""}`,"svelte-1d2svdd")}),z("click",X,()=>v(U,"messages")),z("click",N,()=>v(U,"friends")),l(be,r)}const ta="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3clinearGradient%20id='goldGradient'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23ffd700;stop-opacity:1'%20/%3e%3cstop%20offset='50%25'%20style='stop-color:%23ffed4e;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23d4af37;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3cfilter%20id='glow'%3e%3cfeGaussianBlur%20stdDeviation='2'%20result='coloredBlur'/%3e%3cfeMerge%3e%3cfeMergeNode%20in='coloredBlur'/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3c!--%20Main%20star%20shape%20--%3e%3cpath%20d='M32%204%20L37.6%2023.2%20L58%2023.2%20L41.2%2036%20L46.8%2055.2%20L32%2042.4%20L17.2%2055.2%20L22.8%2036%20L6%2023.2%20L26.4%2023.2%20Z'%20fill='url(%23goldGradient)'%20stroke='%23b8860b'%20stroke-width='1.5'%20filter='url(%23glow)'/%3e%3c!--%20Inner%20shine%20lines%20--%3e%3cpath%20d='M32%2012%20L34%2026'%20stroke='%23ffed4e'%20stroke-width='1'%20opacity='0.6'%20stroke-linecap='round'/%3e%3cpath%20d='M38%2018%20L40%2026'%20stroke='%23ffed4e'%20stroke-width='0.8'%20opacity='0.5'%20stroke-linecap='round'/%3e%3cpath%20d='M26%2018%20L24%2026'%20stroke='%23ffed4e'%20stroke-width='0.8'%20opacity='0.5'%20stroke-linecap='round'/%3e%3c/svg%3e",wi="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYnJvbnplR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I2NkN2YzMjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNiODczMzM7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzhiNWEyYjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJzaGFkb3ciPgogICAgICA8ZmVEcm9wU2hhZG93IGR4PSIwIiBkeT0iMiIgc3RkRGV2aWF0aW9uPSIzIiBmbG9vZC1vcGFjaXR5PSIwLjUiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIE91dGVyIGNpcmNsZSAobWVkYWwpIC0tPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM2IiBmaWxsPSJ1cmwoI2Jyb256ZUdyYWRpZW50KSIgc3Ryb2tlPSIjNWQzYTFhIiBzdHJva2Utd2lkdGg9IjIiIGZpbHRlcj0idXJsKCNzaGFkb3cpIi8+CiAgCiAgPCEtLSBJbm5lciBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzk2NWEyZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIG9wYWNpdHk9IjAuNiIvPgogIAogIDwhLS0gQ2VudGVyIGVtYmxlbSAtLT4KICA8dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuOSI+QjwvdGV4dD4KICAKICA8IS0tIFNoaW5lIGVmZmVjdCAtLT4KICA8cGF0aCBkPSJNIDI1IDIwIFEgMzAgMjUgMzUgMjAiIHN0cm9rZT0iI2Q0YTU3NCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBvcGFjaXR5PSIwLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K",Ci="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ic2lsdmVyR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I2U4ZThlODtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNjMGMwYzA7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I2E4YThhODtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJzaGFkb3ciPgogICAgICA8ZmVEcm9wU2hhZG93IGR4PSIwIiBkeT0iMiIgc3RkRGV2aWF0aW9uPSIzIiBmbG9vZC1vcGFjaXR5PSIwLjUiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIE91dGVyIGNpcmNsZSAobWVkYWwpIC0tPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM2IiBmaWxsPSJ1cmwoI3NpbHZlckdyYWRpZW50KSIgc3Ryb2tlPSIjODA4MDgwIiBzdHJva2Utd2lkdGg9IjIiIGZpbHRlcj0idXJsKCNzaGFkb3cpIi8+CiAgCiAgPCEtLSBJbm5lciBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2QzZDNkMyIgc3Ryb2tlLXdpZHRoPSIxLjUiIG9wYWNpdHk9IjAuOCIvPgogIAogIDwhLS0gQ2VudGVyIGVtYmxlbSAtLT4KICA8dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiM0YTRhNGEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuOSI+UzwvdGV4dD4KICAKICA8IS0tIFNoaW5lIGVmZmVjdCAtLT4KICA8cGF0aCBkPSJNIDIwIDI1IFEgMjUgMjAgMzAgMjUiIHN0cm9rZT0iI2Y1ZjVmNSIgc3Ryb2tlLXdpZHRoPSIyLjUiIGZpbGw9Im5vbmUiIG9wYWNpdHk9IjAuNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTSA1MCAyNSBRIDU1IDIwIDYwIDI1IiBzdHJva2U9IiNmNWY1ZjUiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgb3BhY2l0eT0iMC41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPC9zdmc+Cg==",Ai="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZ29sZEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZlZDRlO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNkNGFmMzc7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGZpbHRlciBpZD0ic2hhZG93Ij4KICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjIiIHN0ZERldmlhdGlvbj0iMyIgZmxvb2Qtb3BhY2l0eT0iMC42Ii8+CiAgICA8L2ZpbHRlcj4KICAgIDxmaWx0ZXIgaWQ9Imdsb3ciPgogICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjUiIHJlc3VsdD0iY29sb3JlZEJsdXIiLz4KICAgICAgPGZlTWVyZ2U+CiAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJjb2xvcmVkQmx1ciIvPgogICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyIvPgogICAgICA8L2ZlTWVyZ2U+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+CiAgCiAgPCEtLSBPdXRlciBjaXJjbGUgKG1lZGFsKSAtLT4KICA8Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSIzNiIgZmlsbD0idXJsKCNnb2xkR3JhZGllbnQpIiBzdHJva2U9IiNiODg2MGIiIHN0cm9rZS13aWR0aD0iMiIgZmlsdGVyPSJ1cmwoI3NoYWRvdykiLz4KICAKICA8IS0tIElubmVyIGNpcmNsZSAtLT4KICA8Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSIzMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZlNTVjIiBzdHJva2Utd2lkdGg9IjEuNSIgb3BhY2l0eT0iMC42Ii8+CiAgCiAgPCEtLSBDZW50ZXIgZW1ibGVtIC0tPgogIDx0ZXh0IHg9IjQwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjMyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzhiNjkxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgb3BhY2l0eT0iMC45IiBmaWx0ZXI9InVybCgjZ2xvdykiPkc8L3RleHQ+CiAgCiAgPCEtLSBTaGluZSBlZmZlY3RzIC0tPgogIDxwYXRoIGQ9Ik0gMjIgMjggUSAyNyAyMiAzMiAyOCIgc3Ryb2tlPSIjZmZmOWM0IiBzdHJva2Utd2lkdGg9IjIuNSIgZmlsbD0ibm9uZSIgb3BhY2l0eT0iMC44IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNIDQ4IDI4IFEgNTMgMjIgNTggMjgiIHN0cm9rZT0iI2ZmZjljNCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBvcGFjaXR5PSIwLjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxjaXJjbGUgY3g9IjI4IiBjeT0iMzUiIHI9IjIiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuNiIvPgo8L3N2Zz4K",Si="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZGlhbW9uZEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlMGY3ZmY7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMzAlIiBzdHlsZT0ic3RvcC1jb2xvcjojYjlmM2ZjO3N0b3Atb3BhY2l0eToxIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjcwJSIgc3R5bGU9InN0b3AtY29sb3I6IzdkZDNmYztzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMzhiZGY4O3N0b3Atb3BhY2l0eToxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0ic3BhcmtsZSIgY3g9IjUwJSIgY3k9IjUwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjAuOSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojYjlmM2ZjO3N0b3Atb3BhY2l0eTowIiAvPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICAgIDxmaWx0ZXIgaWQ9InNoYWRvdyI+CiAgICAgIDxmZURyb3BTaGFkb3cgZHg9IjAiIGR5PSIyIiBzdGREZXZpYXRpb249IjMiIGZsb29kLW9wYWNpdHk9IjAuNSIvPgogICAgPC9maWx0ZXI+CiAgICA8ZmlsdGVyIGlkPSJnbG93Ij4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMiIgcmVzdWx0PSJjb2xvcmVkQmx1ciIvPgogICAgICA8ZmVNZXJnZT4KICAgICAgICA8ZmVNZXJnZU5vZGUgaW49ImNvbG9yZWRCbHVyIi8+CiAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+CiAgICAgIDwvZmVNZXJnZT4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIE91dGVyIGNpcmNsZSAobWVkYWwpIC0tPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM2IiBmaWxsPSJ1cmwoI2RpYW1vbmRHcmFkaWVudCkiIHN0cm9rZT0iIzAyODRjNyIgc3Ryb2tlLXdpZHRoPSIyIiBmaWx0ZXI9InVybCgjc2hhZG93KSIvPgogIAogIDwhLS0gSW5uZXIgc3BhcmtsZSBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZjdmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIG9wYWNpdHk9IjAuNyIvPgogIAogIDwhLS0gRGlhbW9uZCBzaGFwZSBpbiBjZW50ZXIgLS0+CiAgPHBhdGggZD0iTSA0MCAyMCBMIDUwIDMyIEwgNDAgNDQgTCAzMCAzMiBaIiBmaWxsPSJ1cmwoI3NwYXJrbGUpIiBzdHJva2U9IiMwMjg0YzciIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIwLjgiLz4KICAKICA8IS0tIENlbnRlciBlbWJsZW0gLS0+CiAgPHRleHQgeD0iNDAiIHk9IjUyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMGM0YTZlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBvcGFjaXR5PSIwLjkiIGZpbHRlcj0idXJsKCNnbG93KSI+RDwvdGV4dD4KICAKICA8IS0tIFNwYXJrbGUgZWZmZWN0cyAtLT4KICA8Y2lyY2xlIGN4PSIyNSIgY3k9IjMwIiByPSIyLjUiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOSIvPgogIDxjaXJjbGUgY3g9IjU1IiBjeT0iMzUiIHI9IjIiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOCIvPgogIDxjaXJjbGUgY3g9IjMyIiBjeT0iNTIiIHI9IjEuNSIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC43Ii8+CiAgPHBhdGggZD0iTSAyMCAyNCBMIDIyIDI2IE0gMjIgMjQgTCAyMCAyNiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIgb3BhY2l0eT0iMC44IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNIDU4IDQ4IEwgNjAgNTAgTSA2MCA0OCBMIDU4IDUwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIwLjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K";var xi=u("<button> </button>"),ki=u('<div class="badge-medal-svg svelte-1gbwom4"><img class="badge-icon svelte-1gbwom4"/></div>'),Zi=u('<div class="badge-medal svelte-1gbwom4"> </div>'),Ni=u('<p class="badge-description svelte-1gbwom4"> </p>'),Mi=u('<p class="badge-date svelte-1gbwom4"> </p>'),Di=u('<div class="badge-item svelte-1gbwom4" role="button" tabindex="0"><!> <div class="badge-content svelte-1gbwom4"><h3 class="badge-name svelte-1gbwom4"> </h3> <!> <!></div></div>'),Gi=u('<div class="badges-grid svelte-1gbwom4"></div>'),ji=u('<div class="empty-state svelte-1gbwom4"><p> </p></div>'),Bi=u('<div class="achievements-filters svelte-1gbwom4"><button> </button> <!></div> <!>',1),Pi=u('<p class="star-description svelte-1gbwom4"> </p>'),$i=u('<p class="star-date svelte-1gbwom4"> </p>'),qi=u('<div class="star-item svelte-1gbwom4" role="button" tabindex="0"><div class="star-icon svelte-1gbwom4"><img alt="Gold Star" class="star-svg svelte-1gbwom4"/></div> <div class="star-content svelte-1gbwom4"><h3 class="star-name svelte-1gbwom4"> </h3> <!> <!></div></div>'),Li=u('<div class="stars-grid svelte-1gbwom4"></div>'),Wi=u('<div class="empty-state svelte-1gbwom4"><p>No Gold Stars yet! Participate in studio events to earn them.</p></div>'),Ti=u('<div class="modal-badge-icon-svg svelte-1gbwom4"><img class="modal-badge-svg svelte-1gbwom4"/></div>'),zi=u('<div class="modal-badge-icon svelte-1gbwom4"> </div>'),Ri=u('<p class="modal-achievement-description svelte-1gbwom4"> </p>'),Hi=u('<div class="modal-achievement-meta svelte-1gbwom4"><strong class="svelte-1gbwom4">Earned:</strong> </div>'),Yi=u('<div class="modal-achievement-criteria svelte-1gbwom4"><strong class="svelte-1gbwom4">Criteria:</strong> <p class="svelte-1gbwom4"> </p></div>'),Ui=u('<div class="modal-achievement svelte-1gbwom4"><!> <h3 class="modal-achievement-title svelte-1gbwom4"> </h3> <div class="modal-achievement-level svelte-1gbwom4"> </div> <!> <!> <!></div>'),Ji=u('<p class="modal-achievement-description svelte-1gbwom4"> </p>'),Vi=u('<div class="modal-achievement-meta svelte-1gbwom4"><strong class="svelte-1gbwom4">Earned:</strong> </div>'),Fi=u('<div class="modal-achievement-meta svelte-1gbwom4"><strong class="svelte-1gbwom4">Location:</strong> </div>'),Xi=u('<div class="modal-achievement-notes svelte-1gbwom4"><strong class="svelte-1gbwom4">Notes:</strong> <p class="svelte-1gbwom4"> </p></div>'),Ei=u('<div class="modal-achievement svelte-1gbwom4"><div class="modal-star-icon svelte-1gbwom4"><img alt="Gold Star" class="modal-star-svg svelte-1gbwom4"/></div> <h3 class="modal-achievement-title svelte-1gbwom4"> </h3> <!> <!> <!> <!></div>'),Ki=u('<section class="achievements-root svelte-1gbwom4"><header class="achievements-header svelte-1gbwom4"><h2 class="svelte-1gbwom4">Achievements</h2> <p class="achievements-subtitle svelte-1gbwom4">Badges, gold stars, and milestones</p> <div class="achievements-funstrip svelte-1gbwom4"><div class="fun-chip svelte-1gbwom4"><div class="fun-label svelte-1gbwom4">Badges</div><div class="fun-value svelte-1gbwom4"> </div></div> <div class="fun-chip svelte-1gbwom4"><div class="fun-label svelte-1gbwom4">Gold Stars</div><div class="fun-value svelte-1gbwom4"> </div></div> <div class="fun-chip svelte-1gbwom4"><div class="fun-label svelte-1gbwom4">Recent</div><div class="fun-value svelte-1gbwom4"> </div></div></div></header> <div class="section-tabs svelte-1gbwom4"><button> </button> <button><img alt="" class="tab-icon svelte-1gbwom4"/> </button></div> <!></section> <!>',1);function Oi(be,U){ct(U,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,X]=Ct(),N=I();let p=I([]),A=I([]),b=I("all"),$=I("badges"),n=I(!1),o=I(null),C=I("badge");function te(M){if(!M)return"#64748b";const K=M.toLowerCase();return K==="bronze"?"#b87d3b":K==="silver"?"#c0c0c0":K==="gold"?"#ffd700":K==="diamond"?"#b9f3fc":"#a8a29e"}function J(M){if(!M)return null;const K=M.toLowerCase();return K==="bronze"?wi:K==="silver"?Ci:K==="gold"?Ai:K==="diamond"?Si:null}function ae(M){v(o,M),v(C,"badge"),v(n,!0)}function he(M){v(o,M),v(C,"goldStar"),v(n,!0)}function H(){v(n,!1),v(o,null)}T(()=>r(),()=>{r()&&(v(p,Array.isArray(r().badges)?r().badges:[]),v(A,Array.isArray(r().goldStars)?r().goldStars:[]))}),T(()=>(e(b),e(p)),()=>{v(N,e(b)==="all"?e(p):e(p).filter(M=>(M.level||"").toLowerCase()===e(b).toLowerCase()))}),yt(),dt();var G=Ki(),j=Re(G),ge=a(j),h=s(a(ge),4),se=a(h),y=s(a(se)),k=a(y,!0);t(y),t(se);var L=s(se,2),ne=s(a(L)),d=a(ne,!0);t(ne),t(L);var oe=s(L,2),D=s(a(oe)),qe=a(D,!0);t(D),t(oe),t(h),t(ge);var Le=s(ge,2),Q=a(Le),ce=a(Q);t(Q);var V=s(Q,2),fe=a(V),re=s(fe);t(V),t(Le);var le=s(Le,2);{var ke=M=>{var K=Bi(),P=Re(K),Se=a(P),me=a(Se);t(Se);var Ge=s(Se,2);Ye(Ge,0,()=>["Bronze","Silver","Gold","Diamond"],Oe,(x,R)=>{const ie=qt(()=>(e(p),i(()=>e(p).filter(ve=>(ve.level||"").toLowerCase()===R.toLowerCase()).length)));var w=xi(),ue=a(w);t(w),Z(()=>{Fe(w,1,`filter-btn ${e(b)===R?"is-active":""}`,"svelte-1gbwom4"),c(ue,`${R??""} (${e(ie)??""})`)}),z("click",w,()=>v(b,R)),l(x,w)}),t(P);var F=s(P,2);{var ee=x=>{var R=Gi();Ye(R,5,()=>e(N),ie=>ie.name,(ie,w)=>{var ue=Di(),ve=a(ue);{var we=Ce=>{var Me=ki(),_e=a(Me);t(Me),Z(Ne=>{pt(_e,"src",Ne),pt(_e,"alt",(e(w),i(()=>`${e(w).level} badge`)))},[()=>(e(w),i(()=>J(e(w).level)))]),l(Ce,Me)},Y=Ce=>{var Me=Zi(),_e=a(Me,!0);t(Me),Z((Ne,Xe)=>{bt(Me,Ne),c(_e,Xe)},[()=>(e(w),i(()=>`background: ${te(e(w).level)}`)),()=>(e(w),i(()=>(e(w).level||"?").charAt(0).toUpperCase()))]),l(Ce,Me)};S(ve,Ce=>{e(w),i(()=>J(e(w).level))?Ce(we):Ce(Y,!1)})}var W=s(ve,2),Ze=a(W),xe=a(Ze,!0);t(Ze);var pe=s(Ze,2);{var Ie=Ce=>{var Me=Ni(),_e=a(Me,!0);t(Me),Z(()=>c(_e,(e(w),i(()=>e(w).description)))),l(Ce,Me)};S(pe,Ce=>{e(w),i(()=>e(w).description)&&Ce(Ie)})}var Be=s(pe,2);{var Te=Ce=>{var Me=Mi(),_e=a(Me);t(Me),Z(Ne=>c(_e,`Earned ${Ne??""}`),[()=>(e(w),i(()=>new Date(e(w).earnedDate).toLocaleDateString()))]),l(Ce,Me)};S(Be,Ce=>{e(w),i(()=>e(w).earnedDate)&&Ce(Te)})}t(W),t(ue),Z(()=>c(xe,(e(w),i(()=>e(w).name)))),z("click",ue,()=>ae(e(w))),z("keydown",ue,Ce=>Ce.key==="Enter"&&ae(e(w))),l(ie,ue)}),t(R),l(x,R)},je=x=>{var R=ji(),ie=a(R),w=a(ie);t(ie),t(R),Z(()=>c(w,`No ${e(b)==="all"?"achievements":e(b)+" badges"} yet. Keep training!`)),l(x,R)};S(F,x=>{e(N),i(()=>e(N).length)?x(ee):x(je,!1)})}Z(()=>{Fe(Se,1,`filter-btn ${e(b)==="all"?"is-active":""}`,"svelte-1gbwom4"),c(me,`All (${e(p),i(()=>e(p).length)??""})`)}),z("click",Se,()=>v(b,"all")),l(M,K)},ze=M=>{var K=tt(),P=Re(K);{var Se=me=>{var Ge=tt(),F=Re(Ge);{var ee=x=>{var R=Li();Ye(R,5,()=>e(A),Oe,(ie,w)=>{var ue=qi(),ve=a(ue),we=a(ve);t(ve);var Y=s(ve,2),W=a(Y),Ze=a(W,!0);t(W);var xe=s(W,2);{var pe=Te=>{var Ce=Pi(),Me=a(Ce,!0);t(Ce),Z(()=>c(Me,(e(w),i(()=>e(w).description)))),l(Te,Ce)};S(xe,Te=>{e(w),i(()=>e(w).description)&&Te(pe)})}var Ie=s(xe,2);{var Be=Te=>{var Ce=$i(),Me=a(Ce);t(Ce),Z(_e=>c(Me,`Earned ${_e??""}`),[()=>(e(w),i(()=>new Date(e(w).earnedDate).toLocaleDateString()))]),l(Te,Ce)};S(Ie,Te=>{e(w),i(()=>e(w).earnedDate)&&Te(Be)})}t(Y),t(ue),Z(()=>{pt(we,"src",ta),c(Ze,(e(w),i(()=>e(w).event)))}),z("click",ue,()=>he(e(w))),z("keydown",ue,Te=>Te.key==="Enter"&&he(e(w))),l(ie,ue)}),t(R),l(x,R)},je=x=>{var R=Wi();l(x,R)};S(F,x=>{e(A),i(()=>e(A).length)?x(ee):x(je,!1)})}l(me,Ge)};S(P,me=>{e($)==="goldStars"&&me(Se)},!0)}l(M,K)};S(le,M=>{e($)==="badges"?M(ke):M(ze,!1)})}t(j);var B=s(j,2);{let M=qt(()=>e(C)==="badge"?"Badge Details":"Gold Star Details");ea(B,{get open(){return e(n)},get title(){return e(M)},onClose:H,children:(K,P)=>{var Se=tt(),me=Re(Se);{var Ge=F=>{var ee=tt(),je=Re(ee);{var x=ie=>{var w=Ui(),ue=a(w);{var ve=_e=>{var Ne=Ti(),Xe=a(Ne);t(Ne),Z(Pe=>{pt(Xe,"src",Pe),pt(Xe,"alt",(e(o),i(()=>`${e(o).level} badge`)))},[()=>(e(o),i(()=>J(e(o).level)))]),l(_e,Ne)},we=_e=>{var Ne=zi(),Xe=a(Ne,!0);t(Ne),Z((Pe,He)=>{bt(Ne,Pe),c(Xe,He)},[()=>(e(o),i(()=>`background: ${te(e(o).level)}`)),()=>(e(o),i(()=>(e(o).level||"?").charAt(0).toUpperCase()))]),l(_e,Ne)};S(ue,_e=>{e(o),i(()=>J(e(o).level))?_e(ve):_e(we,!1)})}var Y=s(ue,2),W=a(Y,!0);t(Y);var Ze=s(Y,2),xe=a(Ze);t(Ze);var pe=s(Ze,2);{var Ie=_e=>{var Ne=Ri(),Xe=a(Ne,!0);t(Ne),Z(()=>c(Xe,(e(o),i(()=>e(o).description)))),l(_e,Ne)};S(pe,_e=>{e(o),i(()=>e(o).description)&&_e(Ie)})}var Be=s(pe,2);{var Te=_e=>{var Ne=Hi(),Xe=s(a(Ne));t(Ne),Z(Pe=>c(Xe,` ${Pe??""}`),[()=>(e(o),i(()=>new Date(e(o).earnedDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})))]),l(_e,Ne)};S(Be,_e=>{e(o),i(()=>e(o).earnedDate)&&_e(Te)})}var Ce=s(Be,2);{var Me=_e=>{var Ne=Yi(),Xe=s(a(Ne),2),Pe=a(Xe,!0);t(Xe),t(Ne),Z(()=>c(Pe,(e(o),i(()=>e(o).criteria)))),l(_e,Ne)};S(Ce,_e=>{e(o),i(()=>e(o).criteria)&&_e(Me)})}t(w),Z(_e=>{c(W,(e(o),i(()=>e(o).name))),bt(Ze,_e),c(xe,`${e(o),i(()=>e(o).level||"Unknown")??""} Level`)},[()=>(e(o),i(()=>`color: ${te(e(o).level)}`))]),l(ie,w)},R=ie=>{var w=tt(),ue=Re(w);{var ve=we=>{var Y=Ei(),W=a(Y),Ze=a(W);t(W);var xe=s(W,2),pe=a(xe,!0);t(xe);var Ie=s(xe,2);{var Be=Pe=>{var He=Ji(),Ue=a(He,!0);t(He),Z(()=>c(Ue,(e(o),i(()=>e(o).description)))),l(Pe,He)};S(Ie,Pe=>{e(o),i(()=>e(o).description)&&Pe(Be)})}var Te=s(Ie,2);{var Ce=Pe=>{var He=Vi(),Ue=s(a(He));t(He),Z(lt=>c(Ue,` ${lt??""}`),[()=>(e(o),i(()=>new Date(e(o).earnedDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})))]),l(Pe,He)};S(Te,Pe=>{e(o),i(()=>e(o).earnedDate)&&Pe(Ce)})}var Me=s(Te,2);{var _e=Pe=>{var He=Fi(),Ue=s(a(He));t(He),Z(()=>c(Ue,` ${e(o),i(()=>e(o).location)??""}`)),l(Pe,He)};S(Me,Pe=>{e(o),i(()=>e(o).location)&&Pe(_e)})}var Ne=s(Me,2);{var Xe=Pe=>{var He=Xi(),Ue=s(a(He),2),lt=a(Ue,!0);t(Ue),t(He),Z(()=>c(lt,(e(o),i(()=>e(o).notes)))),l(Pe,He)};S(Ne,Pe=>{e(o),i(()=>e(o).notes)&&Pe(Xe)})}t(Y),Z(()=>{pt(Ze,"src",ta),c(pe,(e(o),i(()=>e(o).event)))}),l(we,Y)};S(ue,we=>{e(C)==="goldStar"&&we(ve)},!0)}l(ie,w)};S(je,ie=>{e(C)==="badge"?ie(x):ie(R,!1)})}l(F,ee)};S(me,F=>{e(o)&&F(Ge)})}l(K,Se)},$$slots:{default:!0}})}Z(M=>{c(k,(e(p),i(()=>e(p).length))),c(d,(e(A),i(()=>e(A).length))),c(qe,M),Fe(Q,1,`section-tab ${e($)==="badges"?"is-active":""}`,"svelte-1gbwom4"),c(ce,`Badges (${e(p),i(()=>e(p).length)??""})`),Fe(V,1,`section-tab ${e($)==="goldStars"?"is-active":""}`,"svelte-1gbwom4"),pt(fe,"src",ta),c(re,` Gold Stars (${e(A),i(()=>e(A).length)??""})`)},[()=>(e(p),e(A),i(()=>[...e(p),...e(A)].slice(-5).length))]),z("click",Q,()=>v($,"badges")),z("click",V,()=>v($,"goldStars")),l(be,G),ut(),X()}var Qi=u("<div></div>"),er=u('<div class="session-modal svelte-e0lysx"><div class="session-header svelte-e0lysx"><div class="step-label svelte-e0lysx"> </div> <div class="timer svelte-e0lysx"><button class="btn btn-small svelte-e0lysx"> </button> <span class="time-val"> </span></div></div> <div class="heatbar svelte-e0lysx"></div> <div class="session-controls svelte-e0lysx"><button class="btn svelte-e0lysx"> </button></div></div>');function tr(be,U){ct(U,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,X]=Ct(),N=I(),p=I();let A=It(U,"open",8,!1),b=It(U,"item",12,null),$=It(U,"onClose",8,()=>{}),n=I(0),o=I(0),C=I(!1),te;function J(){v(C,!e(C)),e(C)?te=setInterval(()=>{v(o,e(o)+1)},1e3):te&&clearInterval(te)}function ae(){if(!b())return;v(n,Math.min(e(N),e(n)+1)),b(b().progress=e(n),!0);const j=r();if(j&&Array.isArray(j.practiceItems)){const ge=j.practiceItems.findIndex(h=>h.name===b().name);if(ge!==-1&&(j.practiceItems[ge]={...b()},Ke.set({...j}),typeof window<"u"))try{const h=JSON.parse(localStorage.getItem("studentsData")||"[]"),se=h.findIndex(y=>y.id===j.id);se!==-1&&(h[se]=j,localStorage.setItem("studentsData",JSON.stringify(h)))}catch{}}}T(()=>Ve(b()),()=>{v(N,b()?.steps||8)}),T(()=>Ve(b()),()=>{v(n,b()&&b().progress||0)}),T(()=>(Ve(b()),e(n),e(N)),()=>{v(p,b()&&Array.isArray(b().stepLabels)&&b().stepLabels[e(n)-1]?b().stepLabels[e(n)-1]:`Step ${e(n)} of ${e(N)}`)}),yt(),dt();var he=tt(),H=Re(he);{var G=j=>{{let ge=qt(()=>(Ve(b()),i(()=>b().name||"Training Session")));ea(j,{get title(){return e(ge)},get onClose(){return $()},children:(h,se)=>{var y=er(),k=a(y),L=a(k),ne=a(L,!0);t(L);var d=s(L,2),oe=a(d),D=a(oe);t(oe);var qe=s(oe,2),Le=a(qe);t(qe),t(d),t(k);var Q=s(k,2);Ye(Q,5,()=>(e(N),i(()=>Array.from({length:e(N)}))),Oe,(re,le,ke)=>{var ze=Qi();Z(B=>{Fe(ze,1,`heat-seg ${ke<e(n)?"is-filled":""}`,"svelte-e0lysx"),bt(ze,B)},[()=>(e(N),i(()=>`--h:${Math.round(0+120*(ke/Math.max(1,e(N)-1)))}`))]),l(re,ze)}),t(Q);var ce=s(Q,2),V=a(ce),fe=a(V,!0);t(V),t(ce),t(y),Z((re,le)=>{c(ne,e(p)),c(D,`${e(C)?"Pause":"Start"} Timer`),c(Le,`${re??""}:${le??""}`),V.disabled=e(n)>=e(N),c(fe,e(n)>=e(N)?"Completed":"Next Step")},[()=>(e(o),i(()=>String(Math.floor(e(o)/60)).padStart(2,"0"))),()=>(e(o),i(()=>String(e(o)%60).padStart(2,"0")))]),z("click",oe,J),z("click",V,ae),l(h,y)},$$slots:{default:!0}})}};S(H,j=>{A()&&b()&&j(G)})}l(be,he),ut(),X()}var ar=u("<div></div>"),sr=u('<article class="launcher-card svelte-1glgro6"><div class="launcher-title svelte-1glgro6"> </div> <div class="launcher-heatbar svelte-1glgro6"></div> <button type="button" class="start-btn svelte-1glgro6">Start</button></article>'),ir=u('<div class="launcher-grid svelte-1glgro6"></div>'),rr=u('<p class="empty-msg svelte-1glgro6">No practice items set yet. Ask your instructor for recommendations.</p>'),lr=u('<div class="day-date svelte-1glgro6"> </div>'),nr=u("<span> </span>"),or=u("<span> </span>"),vr=u('<article class="schedule-item svelte-1glgro6"><div class="schedule-day svelte-1glgro6"><div class="day-name svelte-1glgro6"> </div> <!></div> <div class="schedule-info svelte-1glgro6"><h4 class="class-name svelte-1glgro6"> </h4> <p class="class-meta svelte-1glgro6"><!> <!></p></div> <div class="schedule-time svelte-1glgro6"><span class="time-badge svelte-1glgro6"> </span></div></article>'),dr=u('<div class="schedule-list svelte-1glgro6"></div>'),cr=u('<p class="empty-msg svelte-1glgro6">No classes scheduled this week</p>'),ur=u("<span> </span>"),gr=u('<span class="notes svelte-1glgro6"> </span>'),fr=u('<article class="history-item svelte-1glgro6"><div class="history-date svelte-1glgro6"> </div> <div class="history-info svelte-1glgro6"><h4 class="history-name svelte-1glgro6"> </h4> <p class="history-meta svelte-1glgro6"><!> <!></p></div></article>'),pr=u('<div class="history-list svelte-1glgro6"></div>'),br=u('<p class="empty-msg svelte-1glgro6">No class history yet</p>'),mr=u('<section class="training-root svelte-1glgro6"><header class="training-header svelte-1glgro6"><h2 class="svelte-1glgro6">Training</h2> <p class="training-subtitle svelte-1glgro6">Your class schedule and training history</p></header> <div class="training-content svelte-1glgro6"><div class="training-funstrip svelte-1glgro6"><div class="fun-chip svelte-1glgro6"><div class="fun-label svelte-1glgro6">Forms Mastered</div><div class="fun-value svelte-1glgro6"> </div></div> <div class="fun-chip svelte-1glgro6"><div class="fun-label svelte-1glgro6">Classes This Month</div><div class="fun-value svelte-1glgro6"> </div></div> <div class="fun-chip svelte-1glgro6"><div class="fun-label svelte-1glgro6">Practice Days</div><div class="fun-value svelte-1glgro6"> </div></div></div> <div class="training-section svelte-1glgro6"><h3 class="section-title svelte-1glgro6">Session Launcher</h3> <!></div> <div class="training-section svelte-1glgro6"><h3 class="section-title svelte-1glgro6">Your Classes This Week</h3> <!></div> <div class="training-section svelte-1glgro6"><h3 class="section-title svelte-1glgro6">Recent Classes</h3> <!></div></div></section> <!>',1);function Ir(be,U){ct(U,!1);const r=()=>rt(Ke,"$activeStudent",_),[_,X]=Ct();let N=I([]),p=I([]);function A(B){return B?new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function b(B){return B||""}function $(B){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][B]||""}let n=I(!1),o=I(null);function C(B){v(o,B),v(n,!0)}function te(){v(n,!1),v(o,null)}T(()=>r(),()=>{r()&&(v(N,Array.isArray(r().schedule)?r().schedule:[]),v(p,Array.isArray(r().classHistory)?r().classHistory:[]))}),yt(),dt();var J=mr(),ae=Re(J),he=s(a(ae),2),H=a(he),G=a(H),j=s(a(G)),ge=a(j,!0);t(j),t(G);var h=s(G,2),se=s(a(h)),y=a(se,!0);t(se),t(h);var k=s(h,2),L=s(a(k)),ne=a(L,!0);t(L),t(k),t(H);var d=s(H,2),oe=s(a(d),2);{var D=B=>{var M=ir();Ye(M,5,()=>(r(),i(()=>r().practiceItems.slice(0,6))),Oe,(K,P)=>{var Se=sr(),me=a(Se),Ge=a(me,!0);t(me);var F=s(me,2);Ye(F,5,()=>(e(P),i(()=>Array.from({length:e(P).steps||8}))),Oe,(je,x,R)=>{var ie=ar();Z(w=>{Fe(ie,1,(e(P),i(()=>`heat-seg ${R<(e(P).progress||0)?"is-filled":""}`)),"svelte-1glgro6"),bt(ie,w)},[()=>(e(P),i(()=>`--h:${Math.round(0+120*(R/Math.max(1,(e(P).steps||8)-1)))}`))]),l(je,ie)}),t(F);var ee=s(F,2);t(Se),Z(()=>c(Ge,(e(P),i(()=>e(P).name||"Practice Item")))),z("click",ee,()=>C(e(P))),l(K,Se)}),t(M),l(B,M)},qe=B=>{var M=rr();l(B,M)};S(oe,B=>{r(),i(()=>Array.isArray(r()?.practiceItems)&&r().practiceItems.length)?B(D):B(qe,!1)})}t(d);var Le=s(d,2),Q=s(a(Le),2);{var ce=B=>{var M=dr();Ye(M,5,()=>e(N),K=>K.id||K.dayOfWeek,(K,P)=>{var Se=vr(),me=a(Se),Ge=a(me),F=a(Ge,!0);t(Ge);var ee=s(Ge,2);{var je=pe=>{var Ie=lr(),Be=a(Ie,!0);t(Ie),Z(Te=>c(Be,Te),[()=>(e(P),i(()=>A(e(P).date)))]),l(pe,Ie)};S(ee,pe=>{e(P),i(()=>e(P).date)&&pe(je)})}t(me);var x=s(me,2),R=a(x),ie=a(R,!0);t(R);var w=s(R,2),ue=a(w);{var ve=pe=>{var Ie=nr(),Be=a(Ie);t(Ie),Z(()=>c(Be,`Instructor: ${e(P),i(()=>e(P).instructor)??""}`)),l(pe,Ie)};S(ue,pe=>{e(P),i(()=>e(P).instructor)&&pe(ve)})}var we=s(ue,2);{var Y=pe=>{var Ie=or(),Be=a(Ie);t(Ie),Z(()=>c(Be,`â€¢ ${e(P),i(()=>e(P).location)??""}`)),l(pe,Ie)};S(we,pe=>{e(P),i(()=>e(P).location)&&pe(Y)})}t(w),t(x);var W=s(x,2),Ze=a(W),xe=a(Ze,!0);t(Ze),t(W),t(Se),Z((pe,Ie)=>{c(F,pe),c(ie,(e(P),i(()=>e(P).name||"Class"))),c(xe,Ie)},[()=>(e(P),i(()=>$(e(P).dayOfWeek))),()=>(e(P),i(()=>b(e(P).time)))]),l(K,Se)}),t(M),l(B,M)},V=B=>{var M=cr();l(B,M)};S(Q,B=>{e(N),i(()=>e(N).length)?B(ce):B(V,!1)})}t(Le);var fe=s(Le,2),re=s(a(fe),2);{var le=B=>{var M=pr();Ye(M,5,()=>(e(p),i(()=>e(p).slice(0,10))),K=>K.date+K.name,(K,P)=>{var Se=fr(),me=a(Se),Ge=a(me,!0);t(me);var F=s(me,2),ee=a(F),je=a(ee,!0);t(ee);var x=s(ee,2),R=a(x);{var ie=ve=>{var we=ur(),Y=a(we,!0);t(we),Z(()=>c(Y,(e(P),i(()=>e(P).instructor)))),l(ve,we)};S(R,ve=>{e(P),i(()=>e(P).instructor)&&ve(ie)})}var w=s(R,2);{var ue=ve=>{var we=gr(),Y=a(we);t(we),Z(()=>c(Y,`â€¢ ${e(P),i(()=>e(P).notes)??""}`)),l(ve,we)};S(w,ve=>{e(P),i(()=>e(P).notes)&&ve(ue)})}t(x),t(F),t(Se),Z(ve=>{c(Ge,ve),c(je,(e(P),i(()=>e(P).name||"Class")))},[()=>(e(P),i(()=>A(e(P).date)))]),l(K,Se)}),t(M),l(B,M)},ke=B=>{var M=br();l(B,M)};S(re,B=>{e(p),i(()=>e(p).length)?B(le):B(ke,!1)})}t(fe),t(he),t(ae);var ze=s(ae,2);tr(ze,{get open(){return e(n)},get item(){return e(o)},onClose:te}),Z(B=>{c(ge,(r(),i(()=>r()?.funStats?.formsMastered??0))),c(y,B),c(ne,(r(),i(()=>r()?.funStats?.practiceDays??0)))},[()=>(r(),i(()=>(r()?.attendanceDates||[]).filter(B=>{const M=new Date(B),K=new Date;return!isNaN(M)&&M.getMonth()===K.getMonth()&&M.getFullYear()===K.getFullYear()}).length))]),l(be,J),ut(),X()}const na=Ia({open:!1,article:null});function _r(be){na.set({open:!0,article:be})}function aa(){na.set({open:!1,article:null})}var yr=u('<div class="news-modal-backdrop svelte-rr5ax4" tabindex="-1"><article class="news-modal svelte-rr5ax4" role="dialog" aria-modal="true"><div class="news-modal-content svelte-rr5ax4"><header class="news-modal-header svelte-rr5ax4"><h2 class="news-modal-title svelte-rr5ax4"> </h2> <button class="news-modal-close svelte-rr5ax4" aria-label="Close">&times;</button></header> <div class="news-modal-body svelte-rr5ax4"><div class="news-modal-tag svelte-rr5ax4"> </div> <p class="news-modal-date svelte-rr5ax4"> </p> <div class="news-modal-text svelte-rr5ax4"><!></div></div> <footer class="news-modal-meta svelte-rr5ax4"><span> </span> <span> </span></footer></div></article></div>');function hr(be,U){ct(U,!1);let r=I(!1),_=I(null);const X=na.subscribe(n=>{v(r,n.open),v(_,n.article),e(r)?document.body.classList.add("news-modal-open"):document.body.classList.remove("news-modal-open")});ra(()=>{X(),document.body.classList.remove("news-modal-open")});function N(n){n.target===n.currentTarget&&aa()}function p(n){n.key==="Escape"&&aa()}dt();var A=tt(),b=Re(A);{var $=n=>{var o=yr(),C=a(o),te=a(C),J=a(te),ae=a(J),he=a(ae,!0);t(ae);var H=s(ae,2);t(J);var G=s(J,2),j=a(G),ge=a(j,!0);t(j);var h=s(j,2),se=a(h,!0);t(h);var y=s(h,2),k=a(y);ya(k,()=>e(_)?.fullText||e(_)?.summary||"No content available."),t(y),t(G);var L=s(G,2),ne=a(L),d=a(ne);t(ne);var oe=s(ne,2),D=a(oe);t(oe),t(L),t(te),t(C),t(o),Z(()=>{c(he,e(_)?.title||"News Article"),c(ge,e(_)?.tag||"General"),c(se,e(_)?.date||"Recent"),c(d,`Category: ${(e(_)?.tag||"General")??""}`),c(D,`Published: ${(e(_)?.date||"Recent")??""}`)}),z("click",H,function(...qe){aa?.apply(this,qe)}),z("click",o,N),z("keydown",o,p),l(n,o)};S(b,n=>{e(r)&&n($)})}l(be,A),ut()}var wr=u('<p class="featured-summary svelte-1az0nwd"> </p>'),Cr=u('<div class="featured-banner svelte-1az0nwd"><div class="featured-content svelte-1az0nwd"><div class="featured-eyebrow svelte-1az0nwd">Featured</div> <h3 class="featured-title svelte-1az0nwd"> </h3> <div class="featured-meta svelte-1az0nwd"><span class="tag"> </span> â€¢ <span class="date"> </span></div> <!> <div><button class="featured-btn svelte-1az0nwd">Read More</button></div></div></div>'),Ar=u('<li class="news-item"><button class="news-link svelte-1az0nwd"><strong> </strong> <div class="news-meta svelte-1az0nwd"><span class="tag"> </span> <span class="date"> </span></div> <div class="news-summary svelte-1az0nwd"> </div></button></li>'),Sr=u('<ul class="news-list svelte-1az0nwd"></ul>'),xr=u("<p>No news at the moment.</p>"),kr=u('<section class="news-root svelte-1az0nwd"><header class="svelte-1az0nwd"><h2 class="svelte-1az0nwd">News</h2> <div class="news-funstrip svelte-1az0nwd"><div class="fun-chip svelte-1az0nwd"><div class="fun-label svelte-1az0nwd">New This Week</div><div class="fun-value svelte-1az0nwd"> </div></div> <div class="fun-chip svelte-1az0nwd"><div class="fun-label svelte-1az0nwd">This Month</div><div class="fun-value svelte-1az0nwd"> </div></div> <div class="fun-chip svelte-1az0nwd"><div class="fun-label svelte-1az0nwd">Total</div><div class="fun-value svelte-1az0nwd"> </div></div></div></header> <div class="news-body"><!> <div class="news-filters svelte-1az0nwd"><button>All</button> <button>Announcements</button> <button>Events</button> <button>Tips</button></div> <!></div> <!></section>');function Zr(be,U){ct(U,!1);const r=I(),_=I();let X=I([]);const N=Wa.subscribe(Q=>v(X,Q||[]));let p=I("all");function A(Q){_r(Q)}ra(()=>N()),T(()=>(e(p),e(X)),()=>{v(r,e(p)==="all"?e(X):e(X).filter(Q=>(Q.tag||"").toLowerCase()===e(p).toLowerCase()))}),T(()=>e(X),()=>{v(_,(()=>{if(!Array.isArray(e(X))||e(X).length===0)return null;const Q=e(X).find(V=>V.featured===!0);return Q||[...e(X)].sort((V,fe)=>new Date(fe.date)-new Date(V.date))[0]||null})())}),yt(),dt();var b=kr(),$=a(b),n=s(a($),2),o=a(n),C=s(a(o)),te=a(C,!0);t(C),t(o);var J=s(o,2),ae=s(a(J)),he=a(ae,!0);t(ae),t(J);var H=s(J,2),G=s(a(H)),j=a(G,!0);t(G),t(H),t(n),t($);var ge=s($,2),h=a(ge);{var se=Q=>{var ce=Cr(),V=a(ce),fe=s(a(V),2),re=a(fe,!0);t(fe);var le=s(fe,2),ke=a(le),ze=a(ke,!0);t(ke);var B=s(ke,2),M=a(B,!0);t(B),t(le);var K=s(le,2);{var P=Ge=>{var F=wr(),ee=a(F,!0);t(F),Z(()=>c(ee,(e(_),i(()=>e(_).summary)))),l(Ge,F)};S(K,Ge=>{e(_),i(()=>e(_).summary)&&Ge(P)})}var Se=s(K,2),me=a(Se);t(Se),t(V),t(ce),Z(()=>{c(re,(e(_),i(()=>e(_).title))),c(ze,(e(_),i(()=>e(_).tag))),c(M,(e(_),i(()=>e(_).date)))}),z("click",me,()=>A(e(_))),l(Q,ce)};S(h,Q=>{e(_)&&Q(se)})}var y=s(h,2),k=a(y),L=s(k,2),ne=s(L,2),d=s(ne,2);t(y);var oe=s(y,2);{var D=Q=>{var ce=Sr();Ye(ce,5,()=>e(r),Oe,(V,fe)=>{var re=Ar(),le=a(re),ke=a(le),ze=a(ke,!0);t(ke);var B=s(ke,2),M=a(B),K=a(M,!0);t(M);var P=s(M,2),Se=a(P,!0);t(P),t(B);var me=s(B,2),Ge=a(me,!0);t(me),t(le),t(re),Z(()=>{c(ze,(e(fe),i(()=>e(fe).title))),c(K,(e(fe),i(()=>e(fe).tag))),c(Se,(e(fe),i(()=>e(fe).date))),c(Ge,(e(fe),i(()=>e(fe).summary)))}),z("click",le,()=>A(e(fe))),l(V,re)}),t(ce),l(Q,ce)},qe=Q=>{var ce=xr();l(Q,ce)};S(oe,Q=>{e(r),i(()=>e(r).length)?Q(D):Q(qe,!1)})}t(ge);var Le=s(ge,2);hr(Le,{}),t(b),Z((Q,ce)=>{c(te,Q),c(he,ce),c(j,(e(X),i(()=>e(X).length))),Fe(k,1,`tag-chip ${e(p)==="all"?"is-active":""}`,"svelte-1az0nwd"),Fe(L,1,`tag-chip ${e(p)==="Announcements"?"is-active":""}`,"svelte-1az0nwd"),Fe(ne,1,`tag-chip ${e(p)==="Events"?"is-active":""}`,"svelte-1az0nwd"),Fe(d,1,`tag-chip ${e(p)==="Tips"?"is-active":""}`,"svelte-1az0nwd")},[()=>(e(X),i(()=>e(X).filter(Q=>{const ce=new Date(Q.date),fe=(new Date-ce)/(1e3*60*60*24);return!isNaN(ce)&&fe<=7}).length)),()=>(e(X),i(()=>e(X).filter(Q=>{const ce=new Date(Q.date),V=new Date;return!isNaN(ce)&&ce.getMonth()===V.getMonth()&&ce.getFullYear()===V.getFullYear()}).length))]),z("click",k,()=>v(p,"all")),z("click",L,()=>v(p,"Announcements")),z("click",ne,()=>v(p,"Events")),z("click",d,()=>v(p,"Tips")),l(be,b),ut()}var Nr=u('<div class="dashboard-root svelte-lztlh0" style="margin-top: 80px;"><!> <!> <div class="hub-content svelte-lztlh0"><!></div></div>');function Mr(be,U){ct(U,!1);const r=()=>rt(_t,"$students",X),_=()=>rt(Qt,"$activeTab",X),[X,N]=Ct(),p=I();_a(()=>{(!e(p)||e(p).length===0)&&Ta().catch(J=>console.error("Failed to load students:",J))}),T(()=>r(),()=>{v(p,r()||[])}),yt(),dt();var A=Nr(),b=a(A);Oa(b,{});var $=s(b,2);ts($,{});var n=s($,2),o=a(n);{var C=J=>{xs(J,{})},te=J=>{var ae=tt(),he=Re(ae);{var H=j=>{hi(j)},G=j=>{var ge=tt(),h=Re(ge);{var se=k=>{Oi(k,{})},y=k=>{var L=tt(),ne=Re(L);{var d=D=>{Ir(D,{})},oe=D=>{Zr(D,{})};S(ne,D=>{_()==="training"?D(d):D(oe,!1)},!0)}l(k,L)};S(h,k=>{_()==="achievements"?k(se):k(y,!1)},!0)}l(j,ge)};S(he,j=>{_()==="messages"?j(H):j(G,!1)},!0)}l(J,ae)};S(o,J=>{_()==="status"?J(C):J(te,!1)})}t(n),t(A),l(be,A),ut(),N()}function Hr(be){Mr(be,{})}export{Hr as component};
