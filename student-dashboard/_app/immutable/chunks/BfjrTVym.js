import{ao as T,at as B,a2 as p,Z as F,F as A,X as I,h as m,D as Y,a0 as q,ap as x,U as C,a as H,a7 as $,an as z,W as G,a4 as Z,H as J,af as y,aG as K,R as Q,d as M,q as V,aH as N,aI as O,aq as W,aJ as X,aK as j,g,n as ee,o as se,aF as L,aL as te,aM as ae,aN as re,i as ie,am as ne,aO as fe,aP as ue,z as ce,aQ as de,aR as oe,aS as he,aT as le,aU as _e,aV as ve}from"./Wiajt4P9.js";import{l as be}from"./DIeogL5L.js";class ge{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#r=!0;constructor(e,a=!0){this.anchor=e,this.#r=a}#i=()=>{var e=T;if(this.#s.has(e)){var a=this.#s.get(e),t=this.#t.get(a);if(t)B(t),this.#a.delete(a);else{var i=this.#e.get(a);i&&(this.#t.set(a,i.effect),this.#e.delete(a),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[r,f]of this.#s){if(this.#s.delete(r),r===e)break;const n=this.#e.get(f);n&&(p(n.effect),this.#e.delete(f))}for(const[r,f]of this.#t){if(r===a||this.#a.has(r))continue;const n=()=>{if(Array.from(this.#s.values()).includes(r)){var d=document.createDocumentFragment();q(f,d),d.append(A()),this.#e.set(r,{effect:f,fragment:d})}else p(f);this.#a.delete(r),this.#t.delete(r)};this.#r||!t?(this.#a.add(r),F(f,n,!1)):n()}}};#n=e=>{this.#s.delete(e);const a=Array.from(this.#s.values());for(const[t,i]of this.#e)a.includes(t)||(p(i.effect),this.#e.delete(t))};ensure(e,a){var t=T,i=x();if(a&&!this.#t.has(e)&&!this.#e.has(e))if(i){var r=document.createDocumentFragment(),f=A();r.append(f),this.#e.set(e,{effect:I(()=>a(f)),fragment:r})}else this.#t.set(e,I(()=>a(this.anchor)));if(this.#s.set(t,e),i){for(const[n,u]of this.#t)n===e?t.skipped_effects.delete(u):t.skipped_effects.add(u);for(const[n,u]of this.#e)n===e?t.skipped_effects.delete(u.effect):t.skipped_effects.add(u.effect);t.oncommit(this.#i),t.ondiscard(this.#n)}else m&&(this.anchor=Y),this.#i()}}function Pe(s,e,a=!1){m&&H();var t=new ge(s),i=a?$:0;function r(f,n){if(m){const d=z(s)===G;if(f===d){var u=Z();J(u),t.anchor=u,y(!1),t.ensure(f,n),y(!0);return}}t.ensure(f,n)}C(()=>{var f=!1;e((n,u=!0)=>{f=!0,r(u,n)}),f||r(!1,null)},i)}function D(s,e){return s===e||s?.[N]===e}function Ee(s={},e,a,t){return K(()=>{var i,r;return Q(()=>{i=r,r=[],M(()=>{s!==a(...r)&&(e(s,...r),i&&D(a(...i),s)&&e(null,...i))})}),()=>{V(()=>{r&&D(a(...r),s)&&e(null,...r)})}}),s}let b=!1,P=Symbol();function Re(s,e,a){const t=a[e]??={store:null,source:W(void 0),unsubscribe:O};if(t.store!==s&&!(P in a))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=O;else{var i=!0;t.unsubscribe=X(s,r=>{i?t.source.v=r:L(t.source,r)}),i=!1}return s&&P in a?j(s):g(t.source)}function Te(){const s={};function e(){ee(()=>{for(var a in s)s[a].unsubscribe();se(s,P,{enumerable:!1,value:!0})})}return[s,e]}function Ae(s,e,a){return s.set(a),e}function Se(s){var e=b;try{return b=!1,[s(),b]}finally{b=e}}function Ie(s,e,a,t){var i=!be||(a&he)!==0,r=(a&oe)!==0,f=(a&_e)!==0,n=t,u=!0,d=()=>(u&&(u=!1,n=f?M(t):t),n),h;if(r){var w=N in s||ve in s;h=te(s,e)?.set??(w&&e in s?c=>s[e]=c:void 0)}var l,E=!1;r?[l,E]=Se(()=>s[e]):l=s[e],l===void 0&&t!==void 0&&(l=d(),h&&(i&&ae(),h(l)));var o;if(i?o=()=>{var c=s[e];return c===void 0?d():(u=!0,c)}:o=()=>{var c=s[e];return c!==void 0&&(n=void 0),c===void 0?n:c},i&&(a&re)===0)return o;if(h){var U=s.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||U||E)&&h(v?o():c),c):o()})}var S=!1,_=((a&le)!==0?ie:ne)(()=>(S=!1,o()));r&&g(_);var k=ce;return(function(c,v){if(arguments.length>0){const R=v?g(_):i&&r?fe(c):c;return L(_,R),S=!0,n!==void 0&&(n=R),c}return ue&&S||(k.f&de)!==0?_.v:g(_)})}export{ge as B,Re as a,Ee as b,Ae as c,Pe as i,Ie as p,Te as s};
